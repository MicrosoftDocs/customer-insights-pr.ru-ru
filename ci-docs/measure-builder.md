---
title: Создание мер с помощью конструктора мер
description: Создавайте меры с нуля, чтобы анализировать ключевые метрики вашего бизнеса.
ms.date: 03/25/2022
ms.subservice: audience-insights
ms.topic: conceptual
author: v-wendysmith
ms.author: wameng
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-measure-builder
- customerInsights
ms.openlocfilehash: fac00b8a1b4ca6e09dd29abe46dfe240adcc029e
ms.sourcegitcommit: 8a28e9458b857adf8e90e25e43b9bc422ebbb2cd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2022
ms.locfileid: "9170880"
---
# <a name="create-measures-with-measure-builder"></a>Создание мер с помощью конструктора мер

Конструктор мер позволяет определять расчеты с использованием математических операторов, функций агрегирования и фильтров. Определите меры с помощью атрибутов из сущностей, связанных с единой сущностью *Клиента*.

Создание мер в средах B2C и B2B работает одинаково. Однако, если ваша среда B2B [использет организации с иерархиями](relationships.md#set-up-account-hierarchies), выберите, следует ли агрегировать меру по связанным дочерним организациям.

# <a name="individual-consumers-b-to-c"></a>[Индивидуальные потребители (B2C)](#tab/b2c)

Создайте меры на уровне отдельных клиентов (атрибут клиента, меры клиента) или на уровне бизнеса/организации (бизнес-мера). Атрибут клиента и мера клиента позволяют отслеживать производительность каждого клиента. Например, общие расходы каждого клиента. Бизнес-меры отслеживают производительность каждого бизнеса. Например, общий доход компании.

- Атрибут клиента: генерирует выходные данные в виде нового атрибута, который сохраняется как новый столбец в сгенерированном системой сущности с именем *Customer_Measure*. При обновлении атрибута клиента все другие атрибуты клиента в сущности *Customer_Measure* обновляются одновременно. Кроме того, атрибуты клиента отображаются в карточке профиля клиента. После запуска или сохранения атрибут клиента нельзя изменить на меру клиента.

- Мера клиента: создает выходные данные как собственную сущность, и вы не можете изменить его на атрибут клиента после запуска или сохранения. Меры клиента не отображаются в карточке профиля клиента.

- Бизнес-мера: генерирует выходные данные как отдельную сущность и показывает их на домашней странице среды Customer Insights.

1. Выберите **Меры**.

1. Выберите **Создать** > **Создать собственные**.

   :::image type="content" source="media/measure-b2c.png" alt-text="Пустой экран конфигурации для меры B2C. " lightbox="media/measure-b2c.png":::

1. Выберите **Редактировать сведения** рядом с мерой без названия. Задайте имя для меры. При желании добавьте [теги](work-with-tags-columns.md#manage-tags) к мере.

   :::image type="content" source="media/measures_edit_details.png" alt-text="Диалоговое окно изменения сведений.":::

1. Нажмите кнопку **Готово**.

1. Чтобы отслеживать эффективность на уровне бизнеса, переключите **Тип меры** на **Бизнес-уровень**. **Уровень клиента** выбран по умолчанию. **Уровень клиента** автоматически добавляет атрибут *CustomerId* в измерения, в то время как **Бизнес-уровень** автоматически удаляет его.

1. В области конфигурации выберите функцию агрегирования из раскрывающегося меню **Выбрать функцию**. Функции агрегирования включают:
   - **Sum**
   - **Среднее значение**
   - **Численность**
   - **Количество уникальных**
   - **Макс**
   - **Min**
   - **Первый**: берет первое значение записи данных
   - **Последний**: берет последнее значение, которое было добавлено к записи данных
   - **ArgMax**: находит запись данных, дающую максимальное значение целевой функции
   - **ArgMin**: находит запись данных, дающую минимальное значение целевой функции

1. Выберите **Добавить атрибут**, чтобы выбрать данные, необходимые для создания этой меры.

   1. Выберите вкладку **Атрибуты**.
   1. Сущность данных: выберите сущность, которая включает в себя атрибут, который вы хотите измерить.
   1. Атрибут данных: выберите атрибут, который вы хотите использовать в функции агрегирования для вычисления меры. Одновременно можно выбрать только один атрибут.
   1. При желании выберите атрибут данных из существующей меры, выбрав вкладку **Меры**, или вы можете выполнить поиск по имени сущности или меры.
   1. Выберите **Добавить**.

1. Чтобы создать более сложные меры, добавьте дополнительные атрибуты или используйте математические операторы в своей функции меры.

1. Чтобы добавить фильтры, выберите **Фильтр** в области конфигурации. При применении фильтров для расчета меры будут использоваться только те записи, которые соответствуют фильтрам.
  
   1. В разделе **Добавить атрибут** в области **Фильтры** выберите атрибут, который вы хотите использовать для создания фильтров.
   1. Задайте операторы фильтра, чтобы определить фильтр для каждого выбранного атрибута.
   1. Выберите **Применить**.

1. Выбирать **Измерение**, чтобы выбрать дополнительные поля для добавления в виде столбцов в сущность выходных данных меры.

   1. Выберите **Изменить измерения** для добавления атрибутов данных, по которым вы хотите сгруппировать значения меры. Например, город или пол.
      > [!TIP]
      > Если вы выбрали **Уровень клиента** как **Тип меры**, атрибут *CustomerId* уже добавлен. Если вы удалите атрибут, **Тип меры** переключается на **Бизнес-уровень**.
   1. Нажмите кнопку **Готово**.

1. Если в ваших данных есть значения, которые нужно заменить целым числом, выберите **Правила**. Настройте правило и убедитесь, что вы выбираете только целые числа в качестве замены. Например, замените *null* на *0*.

1. Если существуют несколько путей между сопоставленной вами сущностью и сущностью *Клиент*, выберите один из определенных [путей к отношениям сущности](relationships.md). Результаты измерения могут отличаться в зависимости от выбранного пути.

   1. Выберите **Путь к отношениям** и выберите путь к сущности, который следует использовать для идентификации вашей меры. Если есть только один путь к сущности *Клиент*, этот элемент управления не будет отображаться.
   1. Нажмите кнопку **Готово**.

1. Чтобы добавить дополнительные вычисления для меры, выберите **Создать расчет**. Для новых вычислений используйте только сущности на том же пути к сущности. Дополнительные расчеты будут отображаться в виде новых столбцов в сущности выходных данных меры. При желании выберите **Изменить имя**, чтобы создать имя для расчета.

1. Выберите вертикальное многоточие (&vellip;) в расчете, чтобы **Дублировать** или **Удалить** расчет из меры.

1. В области **Предварительный просмотр** вы увидите схему данных сущности выходных данных меры, включая фильтры и измерения. Предварительный просмотр динамически реагирует на изменения в конфигурации.

1. Выберите **Выполнить** для расчета результатов для настроенной меры. Выберите **Сохранить и закрыть**, если вы хотите сохранить текущую конфигурацию и выполнить меру позже. Отображается страница **Меры**.

# <a name="business-accounts-b-to-b"></a>[Учетные записи компаний (B2B)](#tab/b2b)

Создайте меры на уровне отдельных учетных записей (мера клиента) или на уровне всех учетных записей (бизнес-мера).

- Мера клиента: генерирует выходные данные как собственную сущность. Меры клиента не отображаются в карточке профиля клиента.

- Бизнес-мера: генерирует выходные данные как отдельную сущность и показывает их на домашней странице среды Customer Insights.

1. Выберите **Меры**.

1. Выберите **Создать**.

   :::image type="content" source="media/measure-b2b.png" alt-text="Пустой экран конфигурации для меры B2B. ":::

1. Выберите **Редактировать сведения** рядом с мерой без названия. Задайте имя для меры. При желании добавьте [теги](work-with-tags-columns.md#manage-tags) к мере. 
   :::image type="content" source="media/measures_edit_details.png" alt-text="Диалоговое окно изменения сведений.":::

1. Нажмите кнопку **Готово**.

1. В области конфигурации выберите функцию агрегирования из раскрывающегося меню **Выбрать функцию**. Функции агрегирования включают:
   - **Sum**
   - **Среднее значение**
   - **Численность**
   - **Количество уникальных**
   - **Макс**
   - **Min**
   - **Первый**: берет первое значение записи данных
   - **Последний**: берет последнее значение, которое было добавлено к записи данных

1. Выберите **Добавить атрибут**, чтобы выбрать данные, необходимые для создания этой меры.

   1. Выберите вкладку **Атрибуты**.
   1. Сущность данных: выберите сущность, которая включает в себя атрибут, который вы хотите измерить.
   1. Атрибут данных: выберите атрибут, который вы хотите использовать в функции агрегирования для вычисления меры. Одновременно можно выбрать только один атрибут.
   1. При желании выберите атрибут данных из существующей меры, выбрав вкладку **Меры**, или вы можете выполнить поиск по имени сущности или меры.
   1. Выберите **Добавить**, чтобы добавить выбранный атрибут к мере.

1. Чтобы создать более сложные меры, добавьте дополнительные атрибуты или используйте математические операторы в своей функции меры.

1. Чтобы добавить фильтры, выберите **Фильтр** в области конфигурации. При применении фильтров для расчета меры будут использоваться только те записи, которые соответствуют фильтрам.
  
   1. В разделе **Добавить атрибут** в области **Фильтры** выберите атрибут, который вы хотите использовать для создания фильтров.
   1. Задайте операторы фильтра, чтобы определить фильтр для каждого выбранного атрибута.
   1. Выберите **Применить**, чтобы добавить фильтры к мере.

1. Выбирать **Измерение**, чтобы выбрать дополнительные поля для добавления в виде столбцов в сущность выходных данных меры.

   1. Выберите **Изменить измерения** для добавления атрибутов данных, по которым вы хотите сгруппировать значения меры. Например, город или пол.
      > [!TIP]
      > Атрибут *CustomerId* уже добавлен, указывая, что это тип меры на уровне клиента. Если вы удалите атрибут, тип меры меняется на бизнес-уровень.
   1. Выберите **Готово**, чтобы добавить измерения к мере.

1. Если в ваших данных есть значения, которые нужно заменить целым числом, выберите **Правила**. Настройте правило и убедитесь, что вы выбираете только целые числа в качестве замены. Например, замените *null* на *0*.

1. Если вы [используете организации с иерархиями](relationships.md#set-up-account-hierarchies), проверьте **Свернуть дочерние организации**.
   - Если он установлен как **Выкл**, мера рассчитывается для каждой организации. Каждая организация получает собственный результат.
   - Если он установлен как **Вкл** выберите **Редактировать** для выбора иерархии организаций в соответствии с загруженными иерархиями. Эта мера даст только один результат, потому что она агрегирована с дочерними организациями.

1. Если существуют несколько путей между сопоставленной вами сущностью и сущностью *Клиент*, выберите один из определенных [путей к отношениям сущности](relationships.md). Результаты измерения могут отличаться в зависимости от выбранного пути.

   1. Выберите **Путь к отношениям** и выберите путь к сущности, который следует использовать для идентификации вашей меры. Если есть только один путь к сущности *Клиент*, этот элемент управления не будет отображаться.
   1. Выберите **Готово**, чтобы применить ваш выбор.

1. Выберите вертикальное многоточие (&vellip;) в расчете, чтобы **Дублировать** или **Удалить** расчет из меры.

1. В области **Предварительный просмотр** вы увидите схему данных сущности выходных данных меры, включая фильтры и измерения. Предварительный просмотр динамически реагирует на изменения в конфигурации.

1. Выберите **Выполнить** для расчета результатов для настроенной меры. Выберите **Сохранить и закрыть**, если вы хотите сохранить текущую конфигурацию и выполнить меру позже. Отображается страница **Меры**.

---

## <a name="next-step"></a>Следующий шаг

Используйте существующие меры для создания [сегмента клиентов](segments.md).

[!INCLUDE [footer-include](includes/footer-banner.md)]
