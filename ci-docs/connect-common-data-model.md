---
title: Подключение данных Common Data Model к учетной записи Azure Data Lake
description: Работа с данными Common Data Model с помощью Azure Data Lake Storage.
ms.date: 05/24/2022
ms.subservice: audience-insights
ms.topic: how-to
author: adkuppa
ms.author: adkuppa
ms.reviewer: mhart
manager: shellyha
searchScope:
- ci-data-sources
- ci-create-data-source
- ci-attach-cdm
- customerInsights
ms.openlocfilehash: 2e8564950a3269180a85f80fb736d2dcbd1b03b6
ms.sourcegitcommit: f5af5613afd9c3f2f0695e2d62d225f0b504f033
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2022
ms.locfileid: "8833401"
---
# <a name="connect-to-a-common-data-model-folder-using-an-azure-data-lake-account"></a>Подключение к папке Common Data Model с помощью учетной записи Azure Data Lake

В этой статье содержится информация о том, как принимать данные в Dynamics 365 Customer Insights из папки Common Data Model, используя вашу учетную запись Azure Data Lake Storage Gen2.

## <a name="important-considerations"></a>Важные замечания

- Данные в Azure Data Lake должны соответствовать стандарту Common Data Model. Другие форматы в настоящее время не поддерживаются.

- Прием данных поддерживает исключительно учетные записи хранения Azure Data Lake *Gen2*. Вы не можете использовать учетные записи хранения Azure Data Lake Gen1 для приема данных.

- Учетная запись Azure Data Lake Storage должна иметь [включенное иерархическое пространство имен](/azure/storage/blobs/data-lake-storage-namespace).

- Чтобы пройти аутентификацию с помощью субъекта-службы Azure, убедитесь, что она настроена в вашем клиенте. Для получения дополнительной информации см. раздел [Подключение к учетной записи Azure Data Lake Storage Gen2 с помощью субъекта-службы Azure](connect-service-principal.md).

- Azure Data Lake, которое вы хотите подключить и из которого нужно принимать данные, должно находиться в том же регионе Azure, что и среда Dynamics 365 Customer Insights. Подключения к папке Common Data Model из озера данных в другом регионе Azure не поддерживаются. Чтобы узнать регион среды Azure, перейдите на страницу **Администратор** > **Система** > **Сведения** в Customer Insights.

- Данные, хранящиеся в веб-службах, могут храниться в месте, отличном от того, где данные обрабатываются или хранятся в Dynamics 365 Customer Insights. Импортируя данные или подключаясь к данным, хранящимся в веб-службах, вы соглашаетесь с тем, что данные могут быть переданы и сохранены в Dynamics 365 Customer Insights.  [Подробнее см. в Центре управления безопасностью Майкрософт](https://www.microsoft.com/trust-center).

## <a name="connect-to-a-common-data-model-folder"></a>Подключение к папке Common Data Model

1. Перейдите в раздел **Данные** > **Источники данных**.

1. Выберите **Добавить источник данных**.

1. Выберите **Azure Data Lake Storage**, введите **Имя** для источника данных, затем выберите **Далее**.

   - В случае появления запроса выберите один из демонстрационных наборов данных, относящихся к вашей отрасли, затем выберите **Далее**.

1. Вы можете выбрать между использованием варианта на основе ресурсов и варианта на основе подписки для аутентификации. Для получения дополнительной информации см. раздел [Подключение к учетной записи Azure Data Lake Storage Gen2 с помощью субъекта-службы Azure](connect-service-principal.md). Введите **Адрес сервера**, выберите **Вход**, затем выберите **Далее**.
   > [!div class="mx-imgBorder"]
   > ![Диалоговое окно для ввода сведений о новом подключении для Azure Data Lake.](media/enter-new-storage-details.png)
   > [!NOTE]
   > Вам потребуется одна из следующих ролей для доступа к контейнеру в учетной записи хранения либо для создания источника данных:
   >
   >  - Роли "Модуль чтения данных BLOB-объектов хранилища" достаточно для выполнения чтения из учетной записи хранения и загрузки данных в Customer Insights. 
   >  - Роли "Участник данных BLOB-объектов хранилища" или "Владелец данных BLOB-объектов хранилища" необходимы, если требуется редактировать файлы манифеста непосредственно в Customer Insights.

1. В диалоговом окне **Выбор папки Common Data Model** выберите файл model.json или manifest.json, из которого нужно импортировать данные, и выберите **Далее**.
   > [!NOTE]
   > Любой файл model.json или manifest.json, связанный с другим источником данных в среде, не будет отображаться в списке.

1. Вы увидите список доступных сущностей в выбранном файле model.json или manifest.json. Просморите список доступных сущностей и выберите нужную, затем нажмите **Сохранить**. Все выбранные сущности будут загружены из нового источника данных.
   > [!div class="mx-imgBorder"]
   > ![Диалоговое окно со списком сущностей из файла model.json.](media/review-entities.png)

1. Укажите, какие сущности данных требуется включить для профилирования данных, затем нажмите **Сохранить**. Профилирование данных включает аналитику и другие возможности. Вы можете выбрать всю сущность, которая выбирает все атрибуты из сущности, или выбрать определенные атрибуты по своему выбору. По умолчанию ни одна сущность не включена для профилирования данных.
   > [!div class="mx-imgBorder"]
   > ![Диалоговое окно с профилированием данных.](media/dataprofiling-entities.png)

1. После сохранения вашего выбора открывается страница **Источники данных**. Теперь вы должны увидеть соединение с папкой Common Data Model как с источником данных.

> [!NOTE]
> Файл model.json или manifest.json может быть связан только с одним источником данных в той же среде. Однако один и тот же файл model.json или manifest.json можно использовать для источников данных в нескольких средах.

## <a name="edit-a-common-data-model-folder-data-source"></a>Изменение источника данных папки Common Data Model

Вы можете обновить ключ доступа для учетной записи хранения, содержащей папку Common Data Model. Вы также можете изменить файл model.json или manifest.json. Чтобы подключиться к другому контейнеру из своей учетной записи хранилища или изменить имя учетной записи, [создайте новое соединение источника данных](#connect-to-a-common-data-model-folder).

1. Перейдите в раздел **Данные** > **Источники данных**.

2. Рядом с источником данных, который необходимо обновить, выберите вертикальное многоточие (&vellip;).

3. Выберите вариант **Изменить** из списка.

4. При желании обновите **Ключ доступа** и выберите **Далее**.

   ![Диалог для редактирования и обновления ключа доступа для существующего источника данных.](media/edit-access-key.png)

5. При желании вы можете выполнить обновление из подключения ключа учетной записи на подключение на основе ресурса или подписки. Для получения дополнительной информации см. раздел [Подключение к учетной записи Azure Data Lake Storage Gen2 с помощью субъекта-службы Azure](connect-service-principal.md). Невозможно изменить сведения **Контейнер** при обновлении соединения.
   > [!div class="mx-imgBorder"]

   > ![Диалоговое окно для ввода сведений о подключении Azure Data Lake к существующей учетной записи хранения.](media/enter-existing-storage-details.png)

6. При желании выберите другой файл model.json или manifest.json с другим набором сущностей из контейнера.

7. При желании вы можете выбрать дополнительные сущности для приема. Вы также можете удалить любые уже выбранные сущности, если нет никаких зависимостей.

   > [!IMPORTANT]
   > Если существуют зависимости от существующего файла model.json или manifest.json и набора сущностей, вы увидите сообщение об ошибке и не сможете выбрать другой файл model.json или manifest.json. Удалите эти зависимости перед изменением файла model.json или manifest.json или создайте новый источник данных с файлом model.json или manifest.json, который вы хотите использовать, чтобы избежать удаления зависимостей.

8. При желании вы можете выбрать дополнительные атрибуты или сущности, чтобы включить профилирование данных или отключить уже выбранные.

[!INCLUDE [footer-include](includes/footer-banner.md)]
