---
title: Прием данных через соединитель Power Query (содержит видео)
description: Соединители для источников данных на основе Power Query.
ms.date: 05/09/2022
ms.reviewer: v-wendysmith
ms.subservice: audience-insights
ms.topic: how-to
author: adkuppa
ms.author: matgos
manager: shellyha
searchScope:
- ci-data-sources
- ci-create-data-source
- customerInsights
ms.openlocfilehash: b99c3b446e580f455f9678d54d9db414aea9b331
ms.sourcegitcommit: 5e26cbb6d2258074471505af2da515818327cf2c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/14/2022
ms.locfileid: "9011673"
---
# <a name="connect-to-a-power-query-data-source"></a>Подключение к источникам данных Power Query

Power Query содержит широкий набор соединителей для приема данных. Большинство этих соединителей поддерживаются Dynamics 365 Customer Insights.

Добавление источников данных на базе соединителей Power Query обычно выполняется в соответствии с шагами, описанными в этом разделе. Однако в зависимости от используемого соединителя требуется различная информация. Подробнее см. в документации по отдельным соединителям в [справочнике по соединителям Power Query](/power-query/connectors/).

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RWN6EK]

## <a name="create-a-new-data-source"></a>Создание нового источника данных

1. Перейдите в раздел **Данные** > **Источники данных**.

1. Выберите **Добавить источник данных**.

1. Выберите **Microsoft Power Query**.

1. Укажите **Имя** и необязательное **Описание** для источника данных и выберите **Далее**.

1. Выберите один из [доступных соединителей](#available-power-query-data-sources). В этом примере мы выберем соединитель **Текст/CSV**.

1. Введите необходимые данные в поле **Параметры соединения** для выбранного соединителя и выберите **Далее** для предварительного просмотра данных.

1. Выберите **Преобразовать данные**. На этом этапе в источник данных будут добавлены сущности. Сущности — это наборы данных. Если у вас есть база данных, которая включает в себя несколько наборов данных, каждый набор данных является своей собственной сущностью.

1. В диалоговом окне **Power Query — Изменение запросов** можно просматривать и уточнять данные. Сущности, идентифицированные системами в выбранном источнике данных, отображаются на левой панели.

   :::image type="content" source="media/data-manager-configure-edit-queries.png" alt-text="Диалог изменения запросов":::

1. Также можно преобразовать ваши данные. Выберите сущность для изменения или преобразования. Используйте параметры в окне Power Query для применения преобразований. Каждое преобразование указано в пункте **Примененные шаги**. Power Query содержит множество готовых вариантов преобразования. Дополнительные сведения см. в [Преобразования Power Query](/power-query/power-query-what-is-power-query#transformations).

   Рекомендуем использовать следующие преобразования:

   - Если вы принимаете данные из файла CSV, первая строка часто содержит заголовки. Перейдите в **Преобразовать** и выберите **Использовать первую строку в качестве заголовков**.
   - Убедитесь, что тип данных установлен правильно. Например, для полей даты выберите тип даты.

1. Чтобы добавить дополнительные объекты в ваш источник данных в диалоговом окне **Изменение запросов**, перейдите в **Главная** и выберите **Получить данные**. Повторяйте шаги 6–10, пока не добавите все сущности для этого источника данных.

1. Выберите **Сохранить**. Открывается страница **Источники данных** с новым источником данных в статусе **Обновление**.

### <a name="available-power-query-data-sources"></a>Доступные источники данных Power Query

Список соединителей, которые можно использовать для импорта данных в Customer Insights, см. в [справочнике по соединителям Power Query](/power-query/connectors/).

Соединители с флажком в столбце **Customer Insights (потоки данных)** доступны для создания новых источников данных на основе Power Query. Просмотрите документацию по конкретному соединителю, чтобы узнать больше о его предварительных требованиях, [ограничениях запросов](/power-query/power-query-online-limits) и другие детали.

## <a name="add-data-from-on-premises-data-sources"></a>Добавление данных из локальных источников данных

Прием данных из локальных источников данных поддерживается на основе потоков данных Microsoft Power Platform (PPDF). Вы можете включить потоки данных в Customer Insights путем [указания URL-адреса среды Microsoft Dataverse](create-environment.md) при настройке среды.

Для источников данных, созданных после связывания среды Dataverse с Customer Insights, [потоки данных Power Platform](/power-query/dataflows/overview-dataflows-across-power-platform-dynamics-365) используются по умолчанию. Потоки данных поддерживают локальное подключение с использованием шлюза данных. Вы можете удалить и заново создать источники данных, которые существовали до того, как среда Dataverse была связана с Customer Insights, [с помощью локальных шлюзов данных](/data-integration/gateway/service-gateway-app).

Шлюзы данных из существующей среды Power BI или Power Apps будут видны, и вы сможете повторно использовать их в Customer Insights. На странице источников данных показаны ссылки для перехода к среде Microsoft Power Platform, в которой можно просматривать и настраивать локальные шлюзы данных.

> [!IMPORTANT]
> Убедитесь, что ваши шлюзы обновлены до последней версии. Вы можете установить обновление и перенастроить шлюз непосредственно из подсказки, отображаемой на экране шлюза, или [скачать последнюю версию](https://powerapps.microsoft.com/downloads/). Если вы не используете последнюю версию шлюза, обновление потока данных завершается с ошибкой, например **Ключевое слово не поддерживается: свойства конфигурации. Имя параметра: ключевое слово**.

## <a name="edit-power-query-data-sources"></a>Редактировать источники данных Power Query

> [!NOTE]
> Возможно, не удастся внести изменения в источники данных, которые в настоящее время используются в одном из процессов приложения (например, *сегментация*, *сопоставление* или *слияние*).
>
> На странице **Настройки** можно отслеживать ход выполнения каждого из активных процессов. Когда процесс завершается, вы можете вернуться на страницу **Источники данных** и внести изменения.

1. Перейдите в раздел **Данные** > **Источники данных**.

1. Рядом с источником данных, который необходимо обновить, выберите **Изменить**.

   [!INCLUDE [progress-details-include](includes/progress-details-pane.md)]

1. Примените свои изменения и преобразования диалоговом окне **Power Query — Изменение запросов**, как описано в разделе [Создайте новый источник данных](#create-a-new-data-source).

1. Выберите **Сохранить** в Power Query после завершения редактирования, чтобы сохранить изменения.
