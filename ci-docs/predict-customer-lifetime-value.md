---
title: Прогноз ценности клиентов в течение всего срока работы с ними (CLV)
description: Прогнозируйте потенциальный доход для активных клиентов в будущем.
ms.date: 07/21/2022
ms.reviewer: mhart
ms.subservice: audience-insights
ms.topic: how-to
author: m-hartmann
ms.author: wameng
manager: shellyha
searchScope:
- ci-predictions
- ci-create-prediction
- ci-custom-models
- customerInsights
ms.openlocfilehash: b6f6665d906cc96688efe84035336f64d2a39303
ms.sourcegitcommit: 80d8436d8c940f1267e6f26b221b8d7ce02ed26b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/22/2022
ms.locfileid: "9186456"
---
# <a name="customer-lifetime-value-clv-prediction"></a>Прогноз ценности клиентов в течение всего срока работы с ними (CLV)

Прогнозируйте потенциальную ценность (доход), которую отдельные активные клиенты принесут вашему бизнесу в течение определенного периода времени в будущем. Эта функция может помочь вам в достижении различных целей:

- Выявление ценных клиентов и обработка этой информации
- Создавайте стратегические клиентские сегменты на основе их потенциальной ценности для проведения персонализированных кампаний с целевыми продажами, маркетингом и поддержкой
- Направляйте разработку продукта, уделяя особое внимание функциям, повышающим ценность для клиентов
- Оптимизация стратегии продаж или маркетинга и более точное распределение бюджета для охвата клиентов
- Обнаруживайте и поощряйте ценных клиентов с помощью программ лояльности или вознаграждений

## <a name="prerequisites"></a>Предварительные условия

Прежде чем начать, подумайте, что CLV означает для вашего бизнеса. В настоящее время мы поддерживаем прогноз CLV на основе транзакций. Прогнозируемая ценность клиента основана на истории бизнес-транзакций. Чтобы создать прогноз, вам понадобится как минимум разрешения [Участник](permissions.md).

Поскольку настройка и запуск модели CLV не занимает много времени, рассмотрите возможность создания нескольких моделей с различными входными настройками и сравните результаты моделей, чтобы увидеть, какой сценарий модели лучше всего соответствует потребностям вашего бизнеса.

### <a name="data-requirements"></a>Требования к данным

Следующие данные являются обязательными и, если они отмечены как необязательные, рекомендуются для повышения эффективности модели. Чем больше данных может обработать модель, тем точнее будет прогноз. Поэтому мы рекомендуем вам получать больше данных о действиях клиентов, если они доступны.

- Идентификатор клиента: уникальный идентификатор для сопоставления транзакций с отдельным клиентом.

- История транзакций: журнал транзакций с приведенной ниже схемой семантических данных
    - **Идентификатор транзакции**: уникальный идентификатор каждой транзакции
    - **Дата транзакции**: дата, желательно метка времени каждой транзакции
    - **Сумма транзакции**: денежное выражение (например, выручка или рентабельность продаж) каждой транзакции
    - **Метка, присвоенная возвратам** (необязательно): логическое значение, указывающее, является ли транзакция возвратом 
    - **Идентификатор продукта** (необязательно): идентификатор продукта, участвующего в транзакции

- Дополнительные данные (необязательно), например
    - Веб-действия: история посещений веб-сайтов, история электронной почты
    - Действия лояльности: история начисления и использования бонусных баллов за лояльность
    - Журнал обслуживания клиентов, обращение в службу поддержки, жалоба или история возврата
    - Сведения профиля клиента
- Данные о действиях клиентов (необязательно):
    - Идентификаторы действия для различения действия одного типа
    - Идентификаторы клиентов для сопоставления действия с вашими клиентами
    - Информация о действия, содержащая название и дату действия
    - Схема семантических данных для действий включает:
        - **Первичный ключ**: уникальный идентификатор действия
        - **Метка времени:** дата и время события определены первичным ключом
        - **Событие (название действия)**: название события, которое вы хотите использовать
        - **Подробности (сумма или значение)**: подробные сведения о действиях клиента

- Предлагаемые характеристики данных:
    - Достаточно исторических данных: данные о транзакциях по крайней мере за один год. Желательно два-три года транзакционных данных для прогнозирования CLV на один год.
    - Несколько покупок на одного покупателя: идеально не менее двух-трех транзакций на один идентификатор клиента, желательно за несколько дат.
    - Количество клиентов: не менее 100 уникальных клиентов, предпочтительно более 10 000 клиентов. Модель потерпит неудачу с менее чем 100 клиентами и недостаточными историческими данными
    - Полнота данных: менее 20% пропущенных значений в обязательных полях входных данных

> [!NOTE]
> - Для модели требуется история транзакций ваших клиентов. В настоящее время можно настроить только одну сущность истории транзакций. Если есть несколько сущностей покупки/транзакции, вы можете объединить их в Power Query до приема данных.
> - Однако для дополнительных данных о действиях клиентов (необязательно) вы можете добавить столько сущностей действий клиентов, сколько захотите, для рассмотрения в модели.

## <a name="create-a-customer-lifetime-value-prediction"></a>Создание прогноза ценности клиентов на протяжении жизненного цикла

1. Перейдите в **Аналитика** > **Прогнозы**.

1. Выберите плитку **Ценность клиента на протяжении жизненного цикла** и выберите **Использовать модель**. 

1. В области **Ценность клиента на протяжении жизненного цикла** выберите **Начало работы**.

1. **Назовите эту модель** и присвойте **Имя сущности выходных данных**, чтобы отличить их от других моделей или сущностей.

1. Выберите **Далее**.

### <a name="define-model-preferences"></a>Задание параметров модели

1. Установить **Период времени прогноза**, чтобы определить, как далеко в будущем вы хотите прогнозировать CLV.    
   По умолчанию единицей измерения являются месяцы. Вы можете изменить его на годы, чтобы смотреть дальше в будущее.

   > [!TIP]
   > Чтобы точно предсказать CLV для установленного периода времени, вам потребуется сопоставимый период исторических данных. Например, если вы хотите сделать прогноз CLV на следующие 12 месяцев, рекомендуется располагать историческими данными как минимум за 18–24 месяца.

1. Укажите, что **Активные клиенты** означают для вашего бизнеса. Установите интервал времени, в котором у клиента должна быть хотя бы одна транзакция, чтобы считаться активным. Модель будет прогнозировать CLV только для активных клиентов. 
   - **Позвольте модели рассчитать интервал покупки (рекомендуется)**: модель анализирует ваши данные и определяет период времени на основе прошлых покупок.
   - **Установить интервал вручную**: если у вас есть конкретное определение бизнеса для активного клиента, выберите этот вариант и установите соответствующий период времени.

1. Определите процентиль **Ценный клиент**, чтобы модель давала результаты, соответствующие определению вашего бизнеса.
    - **Расчет модели (рекомендуется)**: модель анализирует ваши данные и определяет, чем может быть ценный клиент для вашего бизнеса, на основе истории транзакций ваших клиентов. В модели используется эвристическое правило (на основе правила 80/20 или принципа Парето) для определения доли ценных клиентов. Процент клиентов, которые обеспечили 80% совокупного дохода вашего бизнеса за исторический период, считаются ценными клиентами. Обычно менее 30–40% клиентов приносят 80% совокупного дохода. Однако это число может варьироваться в зависимости от вашего бизнеса и отрасли.    
    - **Процент самых активных клиентов**: определите ценных клиентов для вашего бизнеса как процентиль наиболее активных платящих клиентов. Например, вы можете использовать этот вариант, чтобы определить ценных клиентов как первых 20% будущих платежеспособных клиентов.

    Если ваш бизнес по-другому определяет ценных клиентов, [дайте нам знать, нам это очень интересно](https://go.microsoft.com/fwlink/?linkid=2074172).

1. Нажмите **Далее**, чтобы перейти к следующему шагу.

### <a name="add-required-data"></a>Добавление необходимых данных

1. На этапе **Необходимые данные** выберите **Добавить данные** для **История транзакций клиента** и выберите сущность, которая предоставляет информацию об истории транзакций, как описано в [необходимых условиях](#prerequisites).

1. Сопоставьте семантические поля с атрибутами в сущности истории покупок и выберите **Далее**.

   :::image type="content" source="media/clv-add-customer-data-mapping.png" alt-text="Изображение этапа настройки для сопоставления атрибутов данных для требуемых данных.":::
 
1. Если поля ниже не заполнены, настройте связь между сущностью истории покупок и сущностью *Клиент* и выберите **Сохранить**.
    1. Выберите сущность истории транзакций.
    1. Выберите поле, которое идентифицирует покупателя в сущности истории покупок. Это должно относиться к первичному идентификатору клиента вашей организации.
    1. Выберите сущность, которая соответствует вашей основной сущности клиента.
    1. Введите Имя, описывающее связь.

      :::image type="content" source="media/clv-add-customer-data-relationship.png" alt-text="Изображение этапа настройки для определения отношения с сущностью клиента.":::

1. Выберите **Далее**.

### <a name="add-optional-activity-data"></a>Добавьте необязательные данные о деятельности

Данные, отражающие ключевые взаимодействия с клиентами (например, Интернет, обслуживание клиентов и журналы событий), добавляют контекст к записям транзакций. Дополнительные закономерности, обнаруженные в данных о вашей клиентской активности, могут повысить точность прогнозов.

1. В шаге **Дополнительные данные (необязательно)** выберите **Добавить данные** в **Повысьте ценность аналитических сведений модели благодаря дополнительным данным о действиях**. Выберите сущность действия клиента, которая предоставляет информацию о действии клиента, как описано в [предварительных требованиях](#prerequisites).

1. Сопоставьте семантические поля с атрибутами в сущности действия клиента и выберите **Далее**.

   :::image type="content" source="media/clv-additional-data-mapping.png" alt-text="Изображение этапа настройки для сопоставления полей для дополнительных данных.":::

1. Выберите тип действия, соответствующий типу добавляемого вами действия клиентов. Выберите из существующих типов действий или добавьте новый тип действия.

1. Настройте отношения между сущностью действий клиентов и сущностью *Клиент*.

    1. Выберите поле, которое идентифицирует покупателя в сущности действия клиента. Он может быть напрямую связан с идентификатором основного клиента сущности *Клиент*.
    1. Выберите сущность *Клиент*, которая соответствует вашей первичной сущности *Клиент*.
    1. Введите Имя, описывающее связь.

   :::image type="content" source="media/clv-additional-data.png" alt-text="Изображение шага в потоке настройки для добавления дополнительных данных и настройки действия с заполненными примерами.":::

1. Нажмите кнопку **Сохранить**.
    Добавьте дополнительные данные, если вы хотите включить другие действия клиентов.

1. Добавьте необязательные данные клиента или выберите **Далее**.

### <a name="add-optional-customer-data"></a>Добавление необязательные данные клиента

Выберите из 18 часто используемых атрибутов профиля клиента, чтобы включить их в качестве входных данных в модель. Эти атрибуты могут привести к более персонализированным, релевантным и действенным результатам модели для ваших бизнес-сценариев.

Например: компания Contoso Coffee хочет спрогнозировать пожизненную ценность клиента, чтобы ориентироваться на ценных клиентов с помощью персонализированного предложения, связанного с запуском их новой кофемашины эспрессо. Компания Contoso использует модель CLV и добавляет все 18 атрибутов профилей клиентов, чтобы увидеть, какие факторы влияют на наиболее ценных клиентов. Они считают, что местоположение клиента является наиболее влиятельным фактором для этих клиентов.
Обладая такой информацией, они организуют местное мероприятие по запуску кофемашины эспрессо и сотрудничают с местными поставщиками для персонализированных предложений и особых впечатлений на мероприятии. Без этой информации компания Contoso, возможно, отправляла бы только стандартные маркетинговые сообщения электронной почты и упускала возможность персонализации для этого локального сегмента своих ценных клиентов.

1. В шаге **Дополнительные данные (необязательно)** выберите **Добавить данные** в **Используйте дополнительные данные клиентов, чтобы повысить ценность аналитических сведений модели**.

1. Для **Сущность** выберите **Клиент: CustomerInsights**, чтобы выбрать таблицу унифицированных профилей клиентов, которая сопоставляется с данными атрибутов клиентов. Для **Идентификатор клиента** выберите **System.Customer.CustomerId**.

1. Сопоставьте дополнительные поля, если данные доступны в ваших унифицированных профилях клиентов.

   :::image type="content" source="media/clv-optional-customer-profile-mapping.png" alt-text="Пример сопоставленных полей для данных профиля клиента.":::

1. Выбирать **Сохранять** после сопоставления атрибутов, которые модель должна использовать для прогнозирования ценности клиента на протяжении жизненного цикла.

1. Выберите **Далее**.

### <a name="set-update-schedule"></a>Настройка расписания обновлений

1. На этапе **Расписание обновления данных** выберите периодичность переобучения вашей модели на основе последних данных. Этот параметр важен для обновления точности прогнозов по мере поступления новых данных в Customer Insights. Большинство предприятий могут проходить повторного обучения один раз в месяц и получать точные прогнозы.

1. Выберите **Далее**.

### <a name="review-and-run-the-model-configuration"></a>Просмотрите и выполните конфигурацию модели

1. На этапе **Проверка сведений о модели** проверьте конфигурацию прогноз. Вы можете вернуться к любой части конфигурации прогнозирования, выбрав **редактировать** под показанным значением. Вы также можете выбрать шаг конфигурации по индикатору хода выполнения.

1. Если все значения настроены правильно, выберите **Сохранить и выполнить** для запуска модели. На вкладке **Мои прогнозы** можно увидеть статус процесса прогноза. Процесс может занять несколько часов в зависимости от объема данных, используемых в прогнозе.

## <a name="review-prediction-status-and-results"></a>Просмотр статуса и результатов прогноза

### <a name="review-prediction-status"></a>Просмотр статуса прогноза

1.  Перейдите **Аналитика** > **Прогнозы** и выберите вкладку **Мои прогнозы**.
2.  Выберите прогноз, который нужно проверить.

- **Имя прогноза**: имя прогноза, указанное при его создании.
- **Тип прогноза**: тип модели, используемой для прогноза
- **Выходная сущность**: имя сущности для хранения выходных данных прогноза. Перейдите **Данные** > **Сущности**, чтобы найти сущность с этим именем.
- **Прогнозируемое поле**: это поле заполняется только для некоторых типов прогнозов и не используется в прогнозе ценности клиентов на протяжении жизненного цикла.
- **Статус**: статус выполнения прогноза.
    - **В очереди**: прогноз ожидает выполнения других процессов.
    - **Обновление**: прогноз в настоящее время выполняется для создания результатов, которые будут переданы в выходную сущность.
    - **Не удалось**: прогноз выполнить не удалось. [Просмотрите журналы](manage-predictions.md#troubleshoot-a-failed-prediction) для получения подробностей.
    - **Успешно**: прогноз успешно выполнен. Выберите **Вид** под вертикальными эллипсами, чтобы просмотреть результаты прогноза.
- **Изменено**: дата, когда конфигурация для прогноза была изменена.
- **Последнее обновление**: дата обновления прогноза приводит к выходной сущности.

### <a name="review-prediction-results"></a>Просмотр результатов прогноза

1. Перейдите **Аналитика** > **Прогнозы** и выберите вкладку **Мои прогнозы**.

1. Выберите прогноз, результаты которого вы хотите просмотреть.

На странице результатов есть три основных раздела данных.

- **Эффективность обучения модели**: возможные оценки A, B или C. Эта оценка указывает на эффективность прогноза и может помочь вам принять решение об использовании результатов, хранящихся в выходной сущности. Выберите **Подробнее об этой оценке**, чтобы лучше понять основные показатели эффективности модели и способ получения окончательной оценки эффективности модели.
  
  :::image type="content" source="media/clv-model-score.png" alt-text="Изображение информационного поля оценки модели с оценкой A.":::

  Используя определение ценных клиентов, предоставленное при настройке прогноза, система оценивает эффективность модели ИИ при прогнозировании ценных клиентов по сравнению с базовой моделью.    

  Оценки устанавливаются на основании следующих правил:
  - **A** — когда модель точно предсказала как минимум на 5% больше ценных клиентов по сравнению с базовой моделью.
  - **B** — когда модель точно предсказала 0–5% больше ценных клиентов по сравнению с базовой моделью.
  - **C** — когда модель точно предсказала меньше ценных клиентов по сравнению с базовой моделью.

  В области **Рейтинг модели** показаны дополнительные сведения об эффективности модели ИИ и базовой модели. В базовой модели используется подход, не основанный на ИИ, для расчета ценности клиентов на протяжении жизненного цикла на основе, прежде всего, прошлых покупок, совершенных клиентами.     
  Стандартная формула, используемая для расчета CLV по базовой модели:    

  _**CLV для каждого клиента** = средняя ежемесячная покупка, совершенная клиентом в окне активного клиента * количество месяцев в периоде прогноза CLV * общий коэффициент удержания всех клиентов**_

  Модель ИИ сравнивается с базовой моделью на основе двух показателей эффективности модели.
  
  - **Коэффициент успешных прогнозов ценных клиентов**

    Оцените разницу в прогнозировании ценных клиентов с помощью модели ИИ по сравнению с базовой моделью. Например, 84% успеха означает, что из всех ценных клиентов в данных обучения модель ИИ смогла точно охватить 84%. Затем мы сравниваем этот показатель успеха с показателем успеха базовой модели, чтобы сообщить об относительном изменении. Это значение используется для присвоения модели оценки.

  - **Метрики с ошибками**
    
    Другая метрика позволяет вам оценить общую эффективность модели с точки зрения ошибок при прогнозировании будущих значений. Мы используем метрику общей среднеквадратичной ошибки (RMSE) для оценки этой ошибки. RMSE — это стандартный способ измерения ошибки модели при прогнозировании количественных данных. RMSE модели ИИ сравнивается со RMSE базовой модели, и указывается относительная разница.

  Модель ИИ отдает приоритет точному ранжированию клиентов в соответствии с их ценностью для вашего бизнеса. Таким образом, для получения окончательной оценки модели используется только показатель успешности прогнозирования ценных клиентов. Метрика RMSE чувствительна к выбросам. В сценариях, где у вас есть небольшой процент клиентов с чрезвычайно высокой стоимостью покупки, общая метрика RMSE может не дать полной картины эффективности модели.   

- **Ценность клиентов по процентилям**: используя ваше определение ценных клиентов, клиенты группируются на малоценные и ценные клиенты на основе их прогнозов CLV и отображаются на диаграмме. Наведя курсор на столбцы на гистограмме, вы можете увидеть количество клиентов в каждой группе и средний CLV для этой группы. Эти данные могут помочь, если вы хотите [создавать сегменты клиентов](segments.md) на основе их прогнозов CLV.

- **Наиболее влиятельные факторы**: при создании прогноза CLV на основе входных данных, предоставленных моделью ИИ, учитываются различные факторы. Важность каждого из факторов рассчитывается для агрегированных прогнозов, создаваемых моделью. Вы можете использовать эти факторы, чтобы подтвердить свои результаты прогноза. Эти факторы также позволяют лучше понять наиболее важные факторы, которые повлияли на прогнозирование CLV для всех ваших клиентов.

## <a name="manage-predictions"></a>Управляйте прогнозами

Прогнозы можно оптимизировать, устранять неполадки, обновлять или удалять. Просмотрите отчет об удобстве использования входных данных, чтобы узнать, как сделать прогноз более быстрым и надежным. Дополнительные сведения см. в статье [Управляйте прогнозами](manage-predictions.md).

[!INCLUDE [footer-include](includes/footer-banner.md)]
