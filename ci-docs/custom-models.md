---
title: Пользовательские модели машинного обучения | Документация Майкрософт
description: Работа с пользовательскими моделями из машинного обучения Azure в Dynamics 365 Customer Insights.
ms.date: 09/19/2022
ms.reviewer: mhart
ms.subservice: audience-insights
ms.topic: tutorial
author: zacookmsft
ms.author: zacook
manager: shellyha
searchScope:
- ci-custom-models
- customerInsights
ms.openlocfilehash: 89553b511d249fd586e36a1c4944a977513b0643
ms.sourcegitcommit: be341cb69329e507f527409ac4636c18742777d2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/30/2022
ms.locfileid: "9609762"
---
# <a name="custom-machine-learning-models"></a>Пользовательские модели машинного обучения

> [!NOTE]
> Поддержка Студии машинного обучения (классический вариант) закончится 31 августа 2024 г. Рекомендуем перейти на [Машинное обучение Azure](/azure/machine-learning/overview-what-is-azure-machine-learning) до этой даты.
>
> Начиная с 1 декабря 2021 г. вы не сможете создавать новые ресурсы Студии машинного обучения (классический вариант). До 31 августа 2024 г. вы можете продолжать использовать существующие ресурсы Студии машинного обучения (классический вариант). Дополнительные сведения см. в разделе [Миграция на Машинное обучение Azure](/azure/machine-learning/migrate-overview).

Пользовательские модели позволяют управлять рабочими процессами на основе моделей машинного обучения Azure. Бизнес-процессы помогают выбрать данные, на основе которых вы хотите получать информацию, и сопоставить результаты с вашими объединенными данными о клиентах. Для получения дополнительной информации о создании пользовательских моделей машинного обучения см. [Использование моделей на основе машинного обучения Azure](azure-machine-learning-experiments.md).

## <a name="prerequisites"></a>Предварительные условия

- Веб-службы, опубликованные через [пакетные конвейеры Машинного обучения Azure](/azure/machine-learning/concept-ml-pipelines).
- Конвейер должен быть опубликован в [конечной точке конвейера](/azure/machine-learning/how-to-run-batch-predictions-designer#submit-a-pipeline-run).
- [Учетная запись хранения Azure Data Lake Gen2](/azure/storage/blobs/data-lake-storage-quickstart-create-account), связанная с экземпляром Azure Studio.
- Для рабочих областей машинного обучения Azure с конвейерами — разрешения ответственного или права администратора для доступа к рабочей области машинного обучения Azure.

  > [!NOTE]
  > Данные передаются между вашими экземплярами Customer Insights и выбранными веб-службами или конвейерами Azure в бизнес-процессе. При передаче данных в службу Azure убедитесь, что эта обработка данных этой службой осуществляется в соответствии с нормативно-правовыми требованиями для этих данных в вашей организации.

## <a name="add-a-new-workflow"></a>Добавление нового рабочего процесса

1. Перейти к **Аналитика** > **Пользовательские модели** и выберите **Создать бизнес-процесс**.

1. Введите понятное **Имя**.

   :::image type="content" source="media/new-workflowv2.png" alt-text="Снимок экрана: область «Новый бизнес-процесс».":::

1. Выберите организацию, которая содержит веб-сервис в **Клиенте, содержащий ваш веб-сервис**.

1. Если ваша подписка Azure Machine Learning находится в другом клиенте, нежели Customer Insights, выберите **Войти** с вашими учетными данными для выбранной организации.

1. Выберите **Рабочие области**, связанные с вашей веб-службой.

1. Выберите конвейер Машинного обучения Azure в раскрывающемся списке **Веб-служба, содержащая вашу модель**. Затем выберите **Далее**.
   Узнать больше о [публикации конвейера в машинном обучении Azure с помощью конструктора](/azure/machine-learning/concept-ml-pipelines#building-pipelines-with-the-designer) или [SDK](/azure/machine-learning/concept-ml-pipelines#building-pipelines-with-the-python-sdk).

1. Для каждого пункта **Входные данные веб-службы** выберите соответствующий **Сущность** из Customer Insights. Затем выберите **Далее**.
   > [!NOTE]
   > Настраиваемый рабочий процесс модели будет применять эвристику для сопоставления полей ввода веб-службы с атрибутами сущности на основе имени и типа данных поля. Вы увидите ошибку, если поле веб-службы не может быть сопоставлено с сущностью.

   :::image type="content" source="media/intelligence-screen2-updated.png" alt-text="Настройка рабочего процесса.":::

1. Для **Параметры выходных данных модели** задайте следующие свойства:
   - **Имя сущности** для результатов вывода конвейера
   - **Имя параметра хранилища выходных данных** вашего пакетного конвейера
   - **Имя параметра пути выходных данных** вашего пакетного конвейера

   :::image type="content" source="media/intelligence-screen3-outputparameters.png" alt-text="Панель параметров выходных данных модели.":::

1. Выберите соответствующий атрибут из **Идентификатор клиента в результатах**, который идентифицирует клиентов, и выберите **Сохранить**.

   :::image type="content" source="media/intelligence-screen4-relatetocustomer.png" alt-text="Связь результатов с областью данных клиентов.":::

   Экран **Бизнес-процесс сохранен** отображает подробную информацию о бизнес-процессе. Если вы настроили рабочий процесс для конвейера машинного обучения Azure, Customer Insights подключается к рабочей области, содержащей конвейер. Customer Insights получит роль **участника** в рабочей области Azure.

1. Нажмите кнопку **Готово**. Отображается страница **Пользовательские модели**.

1. Выберите вертикальное многоточие (&vellip;) для рабочего процесса, затем выберите **Выполнить**. Ваш рабочий процесс также запускается автоматически при каждом [запланированном обновлении](schedule-refresh.md).

## <a name="manage-an-existing-workflow"></a>Управление существующим рабочим процессом

Перейдите в раздел **Аналитика** > **Пользовательские модели** для просмотра созданных вами рабочих процессов.

Выберите рабочий процесс, чтобы просмотреть доступные действия.

- **Изменить** рабочий процесс
- **Выполнить** рабочий процесс
- [**Удалить**](#delete-a-workflow) рабочий процесс

### <a name="edit-a-workflow"></a>Изменение рабочего процесса

1. Перейдите в раздел **Аналитика** > **Пользовательские модели**.

1. Рядом с рабочим процессом, который требуется обновить, выберите вертикальное многоточие (&vellip;) и выберите **Изменить**.

1. Измените **Отображаемое имя** при необходимости и выберите **Далее**.

1. Для каждого пункта **Входные данные веб-службы** обновите соответствующую **Сущность** из Customer Insights, если требуется. Затем выберите **Далее**.

1. Для **Параметры выходных данных модели** измените любые из следующих параметров:
   - **Имя сущности** для результатов вывода конвейера
   - **Имя параметра хранилища выходных данных** вашего пакетного конвейера
   - **Имя параметра пути выходных данных** вашего пакетного конвейера

1. Измените соответствующий атрибут из **Идентификатор клиента в результатах** для идентификации клиентов. Выберите атрибут из выходных данных со значениями, аналогичными столбцу "Идентификатор клиента" сущности "Клиент". Если в вашем наборе данных нет такого столбца, выберите атрибут, который однозначно идентифицирует строку.

1. Выберите **Сохранить**

### <a name="delete-a-workflow"></a>Удаление рабочего процесса

1. Перейдите в раздел **Аналитика** > **Пользовательские модели**.

1. Рядом с рабочим процессом, который требуется удалить, выберите вертикальное многоточие (&vellip;) и выберите **Удалить**.

1. Подтвердите удаление.

Ваш рабочий процесс будет удален. [Сущность](entities.md), созданная при создании рабочего процесса, сохраняется, и ее можно просмотреть на странице **Данные** > **Сущности**.

## <a name="view-the-results"></a>Просмотр результатов

Результаты из рабочего процесса хранятся в имени сущности, определенном для **Выходные параметры модели**. Доступ к этим данным можно получить на [странице **Данные** > **Сущности**](entities.md) или с помощью [API-доступа](apis.md).

### <a name="api-access"></a>API-доступ

Чтобы выполнить конкретный запрос OData для получения данных из сущности пользовательской модели используйте следующий формат:

`https://api.ci.ai.dynamics.com/v1/instances/<your instance id>/data/<custom model output entity name>%3Ffilter%3DCustomerId%20eq%20'<guid value>'`

1. Замените `<your instance id>` с идентификатором вашей среды Customer Insights, который отображается в адресной строке браузера при доступе к Customer Insights.

1. Замените `<custom model output entity>` именем сущности, которое вы указали для **Выходные параметры модели**.

1. Замените `<guid value>` идентификатором клиента, к которому вы хотите получить доступ. Этот идентификатор отображается на [странице профилей клиентов](customer-profiles.md) в поле CustomerID.

## <a name="frequently-asked-questions"></a>Вопросы и ответы

- Почему я не вижу свой конвейер при настройке бизнес-процесса пользовательской модели?
  Эта проблема часто вызвана ошибкой конфигурации в конвейере. Убедитесь, что [входной параметр настроен](azure-machine-learning-experiments.md#dataset-configuration), а [выходное хранилище данных и параметры пути](azure-machine-learning-experiments.md#import-pipeline-data-into-customer-insights) тоже настроены.

- Что означает ошибка "Не удалось сохранить бизнес-процесс аналитики"? 
  Пользователи обычно видят это сообщение об ошибке, если у них нет привилегий ответственного лица или администратора в рабочей области. Пользователю требуется более высокий уровень разрешений, чтобы позволить Customer Insights обрабатывать бизнес-процесс как услугу, а не использовать учетные данные пользователя для последующих запусков бизнес-процесса.

- Поддерживается ли частная конечная точка/частная ссылка для моего рабочего процесса пользовательской модели?
  Customer Insights в настоящее время не поддерживает частную конечную точку для пользовательских моделей в готовом виде, но доступен ручной обходной путь. Для получения дополнительных сведений обратитесь в службу поддержки.

## <a name="responsible-ai"></a>Ответственный ИИ

Прогнозы предлагают возможности для повышения качества обслуживания клиентов, улучшения бизнес-возможностей и потоков доходов. Мы настоятельно рекомендуем вам сбалансировать ценность вашего прогноза с учетом влияния, которое он оказывает, и отклонениями, которые могут быть внесены этическим образом. Узнайте больше о том, как Microsoft [работает с ответственным ИИ](https://www.microsoft.com/ai/responsible-ai?activetab=pivot1%3aprimaryr6). Вы также можете узнать о [методах и процессах для ответственного машинного обучения](/azure/machine-learning/concept-responsible-ml), относящегося к машинному обучению Azure.

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RWRElk]

[!INCLUDE [footer-include](includes/footer-banner.md)]
