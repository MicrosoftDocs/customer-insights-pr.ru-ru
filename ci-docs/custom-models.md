---
title: Пользовательские модели машинного обучения | Документация Майкрософт
description: Работа с пользовательскими моделями из машинного обучения Azure в Dynamics 365 Customer Insights.
ms.date: 12/01/2021
ms.reviewer: mhart
ms.subservice: audience-insights
ms.topic: tutorial
author: zacookmsft
ms.author: zacook
manager: shellyha
searchScope:
- ci-custom-models
- customerInsights
ms.openlocfilehash: a44d1f2c00c90de3ed5a9425e3a197e109cb28e0
ms.sourcegitcommit: b515120bebd2638f2639004422cee3cff42fbdf7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2022
ms.locfileid: "8800436"
---
# <a name="custom-machine-learning-models"></a>Пользовательские модели машинного обучения

> [!NOTE]
> Поддержка Студии машинного обучения (классический вариант) закончится 31 августа 2024 г. Рекомендуем перейти на [Машинное обучение Azure](/azure/machine-learning/overview-what-is-azure-machine-learning) до этой даты.
>
> Начиная с 1 декабря 2021 г. вы не сможете создавать новые ресурсы Студии машинного обучения (классический вариант). До 31 августа 2024 г. вы можете продолжать использовать существующие ресурсы Студии машинного обучения (классический вариант). Дополнительные сведения см. в разделе [Миграция на Машинное обучение Azure](/azure/machine-learning/migrate-overview).


**Аналитика** > **Пользовательские Модели** позволяет управлять бизнес-процессами на основе моделей машинного обучения Azure. Бизнес-процессы помогают выбрать данные, на основе которых вы хотите получать информацию, и сопоставить результаты с вашими объединенными данными о клиентах. Для получения дополнительной информации о создании пользовательских моделей машинного обучения см. [Использование моделей на основе машинного обучения Azure](azure-machine-learning-experiments.md).

## <a name="responsible-ai"></a>Ответственный ИИ

Прогнозы предлагают возможности для повышения качества обслуживания клиентов, улучшения бизнес-возможностей и потоков доходов. Мы настоятельно рекомендуем вам сбалансировать ценность вашего прогноза с учетом влияния, которое он оказывает, и отклонениями, которые могут быть внесены этическим образом. Узнайте больше о том, как Microsoft [работает с ответственным ИИ](https://www.microsoft.com/ai/responsible-ai?activetab=pivot1%3aprimaryr6). Вы также можете узнать о [методах и процессах для ответственного машинного обучения](/azure/machine-learning/concept-responsible-ml), относящегося к машинному обучению Azure.

## <a name="prerequisites"></a>Предварительные условия

- Эта функция поддерживает веб-службы, опубликованные через [пакетные конвейеры Машинного обучения Azure](/azure/machine-learning/concept-ml-pipelines).

- Для использования этой функции вам потребуется учетная запись хранения Azure Data Lake Gen2, связанная с экземпляром Azure Studio. Для получения дополнительной информации см. раздел [Создание учетной записи хранения Azure Data Lake Storage 2-го поколения](/azure/storage/blobs/data-lake-storage-quickstart-create-account).

- Для рабочих областей машинного обучения Azure с конвейерами необходимы разрешения ответственного или права администратора для доступа к рабочей области машинного обучения Azure.

   > [!NOTE]
   > Данные передаются между вашими экземплярами Customer Insights и выбранными веб-службами или конвейерами Azure в бизнес-процессе. При передаче данных в службу Azure убедитесь, что эта обработка данных этой службой осуществляется в соответствии с нормативно-правовыми требованиями для этих данных в вашей организации.

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RWRElk]

## <a name="add-a-new-workflow"></a>Добавление нового рабочего процесса

1. Перейти к **Аналитика** > **Пользовательские модели** и выберите **Создать бизнес-процесс**.

1. Дайте вашей пользовательской модели узнаваемое имя в поле **Имя**.

   > [!div class="mx-imgBorder"]
   > ![Снимок экрана: область «Новый бизнес-процесс».](media/new-workflowv2.png "Снимок экрана: область &quot;Новый бизнес-процесс&quot;")

1. Выберите организацию, которая содержит веб-сервис в **Клиенте, содержащий ваш веб-сервис**.

1. Если ваша подписка Azure Machine Learning находится в другом клиенте, нежели Customer Insights, выберите **Войти** с вашими учетными данными для выбранной организации.

1. Выберите **Рабочие области**, связанные с вашей веб-службой. 

1. Выберите конвейер Машинного обучения Azure в раскрывающемся списке **Веб-служба, содержащая вашу модель**. Затем выберите **Далее**.    
   Узнать больше о [публикации конвейера в машинном обучении Azure с помощью конструктора](/azure/machine-learning/concept-ml-pipelines#building-pipelines-with-the-designer) или [SDK](/azure/machine-learning/concept-ml-pipelines#building-pipelines-with-the-python-sdk). Ваш конвейер должен быть опубликован в [конечной точке конвейера](/azure/machine-learning/how-to-run-batch-predictions-designer#submit-a-pipeline-run).

1. Для каждого **Входные данные веб-службы** выберите соответствующий **Сущность** из Customer Insights и выберите **Далее**.
   > [!NOTE]
   > Настраиваемый рабочий процесс модели будет применять эвристику для сопоставления полей ввода веб-службы с атрибутами сущности на основе имени и типа данных поля. Вы увидите ошибку, если поле веб-службы не может быть сопоставлено с сущностью.

   > [!div class="mx-imgBorder"]
   > ![Настройка рабочего процесса.](media/intelligence-screen2-updated.png "Настройка рабочего процесса")

1. На этапе **Параметры выходных данных модели** задайте следующие свойства:
      1. Введите выходные данные **Имя сущности**, куда должны направляться выходные результаты конвейера.
      1. Выберите **Имя параметра хранилища выходных данных** для вашего пакетного конвейера в раскрывающемся списке.
      1. Выберите **Имя параметра пути выходных данных** для вашего пакетного конвейера в раскрывающемся списке.

      > [!div class="mx-imgBorder"]
      > ![Панель параметров выходных данных модели.](media/intelligence-screen3-outputparameters.png "Панель параметров выходных данных модели")

1. Выберите соответствующий атрибут из раскрывающегося списка **Идентификатор клиента в результатах**, который идентифицирует клиентов, и выберите **Сохранить**.

   > [!div class="mx-imgBorder"]
   > ![Связь результатов с областью данных клиентов.](media/intelligence-screen4-relatetocustomer.png "Связь результатов с областью данных клиентов")

1. Вы увидите экран **бизнес-процесс сохранен** с подробной информацией о бизнес-процессе.    
   Если вы настроили рабочий процесс для конвейера машинного обучения Azure, Customer Insights подключается к рабочей области, содержащей конвейер. Customer Insights получит роль **участника** в рабочей области Azure.

1. Нажмите кнопку **Готово**.

1. Теперь вы можете запустить бизнес-процесс на странице **Пользовательские модели**.

## <a name="edit-a-workflow"></a>Изменение рабочего процесса

1. На странице **Пользовательские модели** выберите вертикальное многоточие (&vellip;) в столбце **Действия** рядом с ранее созданным рабочим процессом, а затем — **Изменить**.

1. Вы можете обновить узнаваемое имя бизнес-процесса в поле **Отображаемое имя**, но вы не можете изменить настроенную веб-службу или конвейер. Выберите **Далее**.

1. Для каждого пункта **Входные данные веб-службы** можно обновить соответствующую **Сущность** из Customer Insights. Затем выберите **Далее**.

1. На этапе **Параметры выходных данных модели** задайте следующие свойства:
      1. Введите выходные данные **Имя сущности**, куда должны направляться выходные результаты конвейера.
      1. Выберите **Имя параметра хранилища выходных данных** для вашего тестового конвейера.
      1. Выберите **Имя параметра пути выходных данных** для вашего тестового конвейера.

1. Выберите соответствующий атрибут из раскрывающегося списка **Идентификатор клиента в результатах**, который идентифицирует клиентов, и выберите **Сохранить**.
   Выберите атрибут из выходных данных со значениями, аналогичными столбцу "Идентификатор клиента" сущности "Клиент". Если в вашем наборе данных нет такого столбца, выберите атрибут, который однозначно идентифицирует строку.

## <a name="run-a-workflow"></a>Запуск бизнес-процесса

1. На странице **Пользовательские модели** выберите вертикальное многоточие (&vellip;) в столбце **Действия** рядом с ранее созданным рабочим процессом.

1. Выберите **Выполнить**.

Ваш бизнес-процесс также запускается автоматически при каждом запланированном обновлении. Дополнительные сведения о [настройке запланированных обновлений](system.md#schedule-tab).

## <a name="delete-a-workflow"></a>Удаление рабочего процесса

1. На странице **Пользовательские модели** выберите вертикальное многоточие (&vellip;) в столбце **Действия** рядом с ранее созданным рабочим процессом.

1. Выберите **Удалить** и подтвердите удаление.

Ваш рабочий процесс будет удален. [Сущность](entities.md), созданная при создании рабочего процесса, сохраняется, и ее можно просмотреть на странице **Сущности**.

## <a name="results"></a>Результаты

Результаты бизнес-процесса хранятся в сущности, настроенной на этапе выходных параметров модели. Вы можете получить доступ к этим данным на [странице сущностей](entities.md) или с помощью [API-доступа](apis.md).

### <a name="api-access"></a>API-доступ

Чтобы выполнить конкретный запрос OData для получения данных из сущности пользовательской модели используйте следующий формат:

`https://api.ci.ai.dynamics.com/v1/instances/<your instance id>/data/<custom model output entity name>%3Ffilter%3DCustomerId%20eq%20'<guid value>'`

1. Замените `<your instance id>` с идентификатором вашей среды Customer Insights, который вы найдете в адресной строке браузера при доступе к Customer Insights.

1. Замените `<custom model output entity>` с именем сущности, которую вы указали на этапе «Выходные параметры модели» конфигурации пользовательской модели.

1. Замените `<guid value>` с идентификатором клиента, для которого вы хотите получить доступ к записи. Обычно вы можете найти этот идентификатор на [страница профилей клиентов](customer-profiles.md) в поле CustomerID.

## <a name="frequently-asked-questions"></a>Вопросы и ответы

- Почему я не вижу свой конвейер при настройке бизнес-процесса пользовательской модели?    
  Эта проблема часто вызвана ошибкой конфигурации в конвейере. Убедитесь, что [входной параметр настроен](azure-machine-learning-experiments.md#dataset-configuration), а [выходное хранилище данных и параметры пути](azure-machine-learning-experiments.md#import-pipeline-data-into-customer-insights) тоже настроены.

- Что означает ошибка "Не удалось сохранить бизнес-процесс аналитики"?    
  Пользователи обычно видят это сообщение об ошибке, если у них нет привилегий ответственного лица или администратора в рабочей области. Пользователю требуется более высокий уровень разрешений, чтобы позволить Customer Insights обрабатывать бизнес-процесс как услугу, а не использовать учетные данные пользователя для последующих запусков бизнес-процесса.

[!INCLUDE [footer-include](includes/footer-banner.md)]
