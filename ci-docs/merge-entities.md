---
title: Объединение сущностей для унификации данных
description: Объедините сущности для создания унифицированных профилей клиентов.
ms.date: 01/28/2022
ms.subservice: audience-insights
ms.topic: tutorial
author: adkuppa
ms.author: adkuppa
ms.reviewer: mhart
manager: shellyha
searchScope:
- ci-match
- ci-merge
- ci-relationships
- customerInsights
ms.openlocfilehash: 978a7c9bc440398fa39e9fa1d366d74e5c7aaea0
ms.sourcegitcommit: b7dbcd5627c2ebfbcfe65589991c159ba290d377
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2022
ms.locfileid: "8647381"
---
# <a name="merge-entities"></a>Объединение сущностей

Фаза слияния — это последняя фаза в процессе унификации данных. Его целью является согласование противоречивых данных. Примерами противоречивых данных могут быть имя клиента, найденное в двух ваших наборах данных, но отображаемое в каждом из них немного по-разному ("Грант Маршалл" и "Грант Маршал"), или номер телефона, который отличается по формату (617-803-091X и 617803091X). Объединение этих конфликтующих точек данных выполняется на основе "атрибут за атрибутом".

:::image type="content" source="media/merge-fields-page.png" alt-text="Страница объединения в процессе унификации данных с таблицей с объединенными полями, которые определяют единый профиль клиента.":::

После завершения [фазы поиска соответствий](match-entities.md), вы начинаете фазу слияния, выбрав плитку **Слияние** на странице **Объединить**.

## <a name="review-system-recommendations"></a>Проверка рекомендаций системы

В разделе **Данные** > **Унифицировать** > **Объединить** вы выбираете и исключаете атрибуты для объединения в сущность единого профиля клиента. Единый профиль клиента — это результат процесса унификации данных. Некоторые атрибуты автоматически объединяются системой.

Чтобы просмотреть атрибуты, включенные в один из автоматически объединяемых атрибутов, выберите этот объединенный атрибут на вкладке **Поля клиентов** в таблице. Атрибуты, составляющие этот объединенный атрибут, отображаются в двух новых строках под объединенным атрибутом.

## <a name="separate-rename-exclude-and-edit-merged-fields"></a>Разделение, переименование, исключение и редактирование объединенных полей

Вы можете изменить способ обработки объединенных атрибутов в системе для создания единого профиля клиента. Выберите **Показать больше** и выберите то, что вы хотите изменить.

:::image type="content" source="media/manage-merged-attributes.png" alt-text="Параметры в раскрывающемся меню &quot;Показать подробности&quot; для управления объединенными атрибутами.":::

Дополнительные сведения см. в следующих разделах.

## <a name="separate-merged-fields"></a>Разделение объединенных полей

Чтобы разделить объединенные поля, найдите атрибут в таблице. Разделенные поля отображаются как отдельные точки данных в едином профиле клиента. 

1. Выберите объединенное поле.
  
1. Выберите **Показать еще** и выберите **Разделить поля**.
 
1. Подтвердите разделение.

1. Выберите **Сохранить** и **Выполнить** для обработки изменений.

## <a name="rename-merged-fields"></a>Переименование объединенных полей

Измените отображаемое имя объединенных атрибутов. Вы не можете изменить имя сущности выходных данных.

1. Выберите объединенное поле.
  
1. Выберите **Показать еще** и выберите **Переименовать**.

1. Подтвердите измененное отображаемое имя. 

1. Выберите **Сохранить** и **Выполнить** для обработки изменений.

## <a name="exclude-merged-fields"></a>Исключение объединенных полей

Исключите атрибут из единого профиля клиента. Если поле используется в других процессах, например в сегменте, удалите его из этих процессов, прежде чем исключать его из профиля клиента. 

1. Выберите объединенное поле.
  
1. Выберите **Показать еще** и выберите **Исключить**.

1. Подтвердите исключение.

1. Выберите **Сохранить** и **Выполнить** для обработки изменений. 

На странице **Объединить** выберите **Исключенные поля**, чтобы увидеть список всех исключенных полей. Эта панель позволяет вам снова добавлять исключенные поля.

## <a name="edit-a-merged-field"></a>Изменение объединенного поля

1.  Выберите объединенное поле.

1.  Выберите **Показать еще** и выберите **Изменить**.

1.  Укажите, как объединить или слить поля, выбрав один из трех вариантов:
    - **Важность**: определяет значение победителя на основе ранга важности, указанного для участвующих полей. Это параметр объединения по умолчанию. Выберите **Вверх/вниз**, чтобы установить рейтинг важности.
    :::image type="content" source="media/importance-merge-option.png" alt-text="Параметр важности в диалоговом окне слияния полей."::: 
    - **Самый последний**: определяет значение победителя на основе самой последней даты. Требуется дата или числовое поле для каждой участвующей сущности в области полей слияния для определения давности.
    :::image type="content" source="media/recency-merge-option.png" alt-text="Параметр давности в диалоговом окне слияния полей.":::
    - **Самый давний**: определяет значение победителя на основе самой давней даты. Требуется дата или числовое поле для каждой участвующей сущности в области полей слияния для определения давности.

1.  Вы можете добавить больше полей для участия в процессе слияния.

1.  Вы можете переименовать объединенное поле.

1. Выберите **Готово**, чтобы применить изменения.

1. Выберите **Сохранить** и **Выполнить** для обработки изменений. 

## <a name="combine-fields-manually"></a>Объединение полей вручную

Укажите объединенный атрибут вручную.

1. На странице **Объединить** выберите **Объединить**.

1. Выберите параметр **Поля**.

1. Укажите политику победителя слияния в раскрывающемся списке **Объединить поля по**.

1. Выберите поле для добавления. Выберите **Добавить поля**, чтобы объединить дополнительные поля.

1. Укажите **Имя** и **Имя поля выходных данных**.

1. Выберите **Готово**, чтобы применить изменения.

1. Выберите **Сохранить** и **Выполнить** для обработки изменений. 

## <a name="combine-a-group-of-fields"></a>Объединение группы полей

Рассматривайте группу полей как единое целое. Например, если наши записи содержат поля Address1, Address2, City, State и Zip. Скорее всего, мы не захотим объединять в Address2 другой записи, думая, что это сделает наши данные более полными.

1. На странице **Объединить** выберите **Объединить**.

1. Выберите параметр **Группа полей**.

1. Укажите политику победителя слияния в раскрывающемся списке **Ранжирование групп по**.

1. Выберите **Добавить** и выберите, хотите ли вы добавить дополнительные поля или дополнительные группы к полям.

1. Укажите **Имя** и **Выходное имя** для каждого объединенного поля.

1. Укажите **Имя** для группы полей. 

1. Выберите **Готово**, чтобы применить изменения.

1. Выберите **Сохранить** и **Выполнить** для обработки изменений.

## <a name="change-the-order-of-fields"></a>Изменение порядка полей

Некоторые сущности содержат больше деталей, чем другие. Если сущность включает последние данные о поле, вы можете установить приоритет перед другими сущностями при объединении значений.

1. Выберите объединенное поле.
  
1. Выберите **Показать еще** и выберите **Изменить**.

1. В области **Объединить поля** выберите **Переместить вверх/вниз**, чтобы установить порядок, или перетащите их в нужное место.

1. Подтвердите изменение.

1. Выберите **Сохранить** и **Выполнить** для обработки изменений.

## <a name="configure-customer-id-generation"></a>Настройка создания ИД клиента 

После настройки полей слияния вы можете определить, как генерировать значения CustomerId — уникальные идентификаторы профиля клиента. На этапе слияния в процессе объединения данных создается уникальный идентификатор профиля клиента. Идентификатор — это CustomerId в сущности *Клиент*, возникающий в результате процесса объединения данных. 

Идентификатор CustomerId в сущности "Клиент" основан на хэше первого значения непустых первичных ключей-победителей. Эти ключи исходят от сущностей, используемых на этапах поиска соответствий и слияния, и на них влияет порядок поиска соответствий. Таким образом, сгенерированный CustomerID может измениться при изменении значения первичного ключа в первичной сущности порядка поиска соответствий. Таким образом, значение первичного ключа не всегда может представлять одного и того же клиента.

Настройка постоянного идентификатора клиента позволяет избежать такого поведения.

**Настройка уникального ИД клиента**

1. Перейдите в раздел **Объединить** > **Слияние**.

1. Перейдите на вкладку **Ключи**. 

1. Наведите указатель мыши на строку **CustomerId** и выберите параметр **Настроить**.
   :::image type="content" source="media/customize-stable-id.png" alt-text="Элемент управления для настройки создания идентификатора.":::

1. Выберите до пяти полей, которые будут составлять уникальный идентификатор клиента и являются более стабильными. Записи, которые не соответствуют вашей конфигурации, используют вместо этого идентификатор, настроенный системой.  

1. Выберите **Готово** и запустите процесс слияния, чтобы применить ваши изменения.

## <a name="group-profiles-into-households-or-clusters"></a>Сгруппируйте профили в домохозяйства или кластеры

В рамках процесса конфигурации создания профиля клиента вы можете определить правила для группировки связанных профилей в кластер. В настоящее время доступны два типа кластеров — домохозяйства и пользовательские кластеры. Система автоматически выбирает домохозяйство с заранее определенными правилами, если сущность *Клиент* содержит семантические поля *Person.LastName* и *Location.Address*. Вы также можете создать кластер со своими правилами и условиями, аналогично [правилам сопоставления](match-entities.md#define-rules-for-match-pairs).

**Определите домохозяйство или кластер**

1. Перейдите в раздел **Объединить** > **Слияние**.

1. На вкладке **Объединить** выберите **Дополнительно** > **Создать кластер**.

   :::image type="content" source="media/create-cluster.png" alt-text="Элемент управления для создания нового кластера.":::

1. Выберите кластер **Домохозяйство** или **Настраиваемый**. Если семантические поля *Person.LastName* и *Location.Address* существуют в сущности *Клиент*, домохозяйство выбирается автоматически.

1. Введите имя кластера и выберите **Готово**.

1. Выберите вкладку **Кластеры**, чтобы найти созданный вами кластер.

1. Укажите правила и условия для определения вашего кластера.

1. Выберите **Запустить** для запуска процесса слияния и создания кластера.

После запуска процесса слияния идентификаторы кластера добавляются как новые поля в сущность *Клиент*.

## <a name="run-your-merge"></a>Выполните слияние

Независимо от того, объединяете ли вы атрибуты вручную или позволяете системе объединить их, вы всегда можете выполнить свое слияние. Выберите **Выполнить** на странице **Слияние**, чтобы запустить процесс.

> [!div class="mx-imgBorder"]
> ![Сохранение и выполнение слияния данных.](media/configure-data-merge-save-run.png "Сохранение и выполнение слияния данных")

Выберите **Выполнить только объединение**, если вы хотите видеть только результат, отраженный в объединенной сущности клиента. Последующие процессы будут обновлены, как [определено в расписании обновления](system.md#schedule-tab).

Выберите **Выполнить объединение и нисходящие процессы**, чтобы обновить систему с вашими изменениями. Все процессы, включая обогащение, сегменты и измерения, будут перезапущены автоматически. После завершения всех последующих процессов в профилях клиентов отражаются все внесенные вами изменения.

Чтобы внести больше изменений и повторно запустить шаг, вы можете отменить текущее слияние. Выберите **Обновляется...** и выберите **Отменить задание** на боковой панели, которая появляется.

[!INCLUDE [progress-details-include](includes/progress-details-pane.md)]

:::image type="content" source="media/process-detail-path.png" alt-text="Путь детализации, чтобы перейти к сведениям о процессах по ссылке статуса задачи.":::

## <a name="next-step"></a>Следующий шаг

Настройте [действия](activities.md), [обогащение](enrichment-hub.md) или [отношения](relationships.md), чтобы узнать больше о ваших клиентах.

Если вы уже настроили действия, обогащение или сегменты, они будут обработаны автоматически с использованием последних данных о клиентах.

[!INCLUDE [footer-include](includes/footer-banner.md)]
