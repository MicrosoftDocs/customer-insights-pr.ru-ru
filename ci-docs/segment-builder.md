---
title: Создание сегментов с помощью конструктора сегментов
description: Создайте сегменты клиентов, чтобы сгруппировать их на основе различных атрибутов.
ms.date: 03/25/2022
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-segments
- ci-segment-builder
- ci-segment-details
- customerInsights
ms.openlocfilehash: e1a9cd0e3c0347285026d937ca7d951a602e7160
ms.sourcegitcommit: b515120bebd2638f2639004422cee3cff42fbdf7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2022
ms.locfileid: "8800112"
---
# <a name="create-segments"></a>Создать сегменты

Определите сложные фильтры вокруг единой сущности клиента и связанных с ней сущностей. Каждый сегмент после обработки создает набор записей о клиентах, которые можно экспортировать и выполнять действия с ними. Сегменты управляются на странице **Сегменты**. Вы можете [создавать новые сегменты](#create-a-new-segment) с помощью конструктора сегментов или [создавать быстрые сегменты](#quick-segments) из других областей приложения.

> [!TIP]
> - Быстрые сегменты поддерживаются только в средах для **частных клиентов**.
> - Сегменты на основе **частных клиентов** автоматически включают доступную контактную информацию для участников сегмента. В средах для **организаций** сегменты основаны на организациях (компаниях или дочерних компаниях). Чтобы включить информацию контакта в сегмент, используйте функцию **Атрибуты проекта** в конструкторе сегментов. Убедитесь, что источники контактных данных [семантически сопоставлены с сущностью ContactProfile](semantic-mappings.md#define-a-contactprofile-semantic-entity-mapping).

## <a name="segment-builder"></a>Конструктор сегментов

На следующем рисунке показаны различные аспекты конструктора сегментов. Он показывает сегмент, который в результате дает группу клиентов. Клиенты заказывали товары в определенном интервале времени и набирали баллы поощрения или потратили определенную сумму денег.

:::image type="content" source="media/segment-builder-overview.png" alt-text="Элементы конструктора сегментов." lightbox="media/segment-builder-overview.png":::

1. Организуйте свой сегмент с помощью правил и подправил. Каждое правило или субправило состоит из условий. Комбинируйте условия с логическими операторами

1. Выберите [путь отношений](relationships.md) между сущностями, который применяется к правилу. Путь отношения определяет, какие атрибуты могут использоваться в условии.

1. Управление правилами и субправилами. Измените положение правила или удалите его.

1. Добавьте условия и создайте правильный уровень вложенности с помощью подправил.

1. Применение операций задания к связанным правилам.

1. Используйте панель атрибутов, чтобы добавить доступные атрибуты сущности или создать условия на основе атрибутов. На панели отображается список сущностей и атрибутов, доступных для выбранного правила на основе выбранного пути отношения.

1. Добавьте условия на основе атрибутов к существующим правилам и субправилам или добавьте их в новое правило.

1. Отмена и повторение изменений при построении сегмента.

Приведенный выше пример иллюстрирует возможность сегментации. Мы определили сегмент для клиентов, которые купили в Интернете товаров не менее чем на 500 долларов США *и* проявляют интерес к разработке программного обеспечения.

## <a name="create-a-new-segment"></a>Создание нового сегмента

Существуют несколько способов создания нового сегмента. В этом разделе описывается, как создать собственный сегмент с нуля. Вы также можете создать *быстрый сегмент* на основе существующих сущностей или использовать модели машинного обучения, чтобы получить *предлагаемые сегменты*. Дополнительные сведения см. в [обзор сегментов](segments.md).

Создавая сегмент, вы можете сохранить черновик. На этапе черновика сегмент сохраняется как неактивный. Когда вы завершите настройку сегмента, запустите его, чтобы активировать сегмент. Вы также можете **Активировать** сегмент на странице **Все сегменты**.

1. Перейдите на страницу **Сегменты**.

1. Выберите **Создать** > **Создать собственные**.

1. На странице построителя сегментов вы определяете или составляете правила. Правило состоит из одного или нескольких условий, определяющих набор клиентов.

1. В разделе **Rule1** выберите атрибут сущности, по которому вы хотите отфильтровать клиентов. Имеется два способа выбора атрибутов:
   - Просмотрите список доступных сущностей и атрибутов на панели **Добавить в правило** и выберите значок **+** рядом с атрибутом, который нужно добавить. Выберите, хотите ли вы добавить атрибут к существующему правилу или использовать его для создания нового правила.
   - Введите имя атрибута в разделе правил, чтобы увидеть подходящие предложения.

1. Выберите операторы, чтобы указать совпадающие значения условия. Атрибут может иметь в качестве значения один из четырех типов данных: числовой, строковый, дата или логический. В зависимости от типа данных атрибута для указания условия доступны разные операторы. Для сегментов с организациями доступны два специальных оператора для включения потенциальных иерархий между загруженными организациями. Используйте операторы *дочерняя* и *родительская* для включения связанных организаций.

1. Выберите **Добавить условие**, чтобы добавить в правило дополнительные условия. Чтобы создать правило под текущим правилом, выберите **Добавить пункт правила**.

1. Если в правиле используются другие сущности, кроме сущности *Клиент*, вы должны установить путь отношения. Путь отношений необходим для сообщения системе, через какие отношения вы хотите получить доступ к единой сущности клиента. Выберите **Настройка пути к отношениям** для сопоставления выбранной сущности с объединенной сущностью клиента. Если существует только один возможный путь отношения, система выберет его автоматически. Различные пути отношений могут дать разные результаты. У каждого правила может быть свой собственный путь отношений.

   :::image type="content" source="media/relationship-path.png" alt-text="Потенциальный путь отношений при создании правила на основе сущности, сопоставленной с объединенной сущностью клиента.":::

   Например, сущность *eCommerce_eCommercePurchases* на снимке экрана имеет четыре варианта сопоставления с сущностью *Клиент*:
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > Клиент
   - eCommerce_eCommercePurchases > Клиент
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > Клиент
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > loyaltyScheme_loyCustomers > Клиент При выборе последнего варианта вы можете включить атрибуты из всех перечисленных сущностей в условия правила. Скорее всего, мы получим меньше результатов, потому что соответствующие записи о клиентах должны быть частью всех сущностей. В этом примере они приобрели товары через канал электронной торговли (*eCommerce_eCommercePurchases*), в POS (*POS_posPurchases*) и участвуют в нашей программе лояльности (*loyaltyScheme_loyCustomers*). При выборе второго варианта мы можем выбирать только атрибуты из сущности *eCommerce_eCommercePurchases* и *Клиент*. Это, вероятно, приведет к получению большего количества профилей клиентов.

1. Если у вас есть несколько условий в правиле, вы можете выбрать, какой логический оператор их связывает.  
   - Оператор **И**: должны быть соблюдены все условия для включения записи в сегмент. Эта опция наиболее полезна, когда вы определяете условия для разных сущностей.
   - Оператор **ИЛИ**: должно быть соблюдено одно из условий для включения записи в сегмент. Эта опция наиболее полезна, когда вы определяете несколько условий для одной сущности.

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="Правило с двумя условиями «И».":::

   При использовании оператора ИЛИ все условия должны основываться на сущностях, включенных в путь отношений.

   - Вы можете создать несколько правил для создания разных наборов записей о клиентах. Вы можете объединять группы, чтобы включать клиентов, необходимых для вашего бизнес-случая. Чтобы создать новое правило, выберите **Добавить правило**. В частности, если вы не можете включить сущность в правило из-за указанного пути отношения, вам необходимо создать новое правило, чтобы выбрать из нее атрибуты.

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="Добавьте новое правило в сегмент и выберите оператор набора.":::

   - Выберите один из операторов набора: **Объединение**, **Пересечение** или **Исключение**.

      - **Объединение** объединяет две группы.
      - **Пересечение** перекрывает две группы. Только данные, которые *являются общими* в обеих группах, останутся в объединенной группе.
      - **За исключением** объединяет две группы. Только данные в группе А, которые *не являются общими* с данными в группе B, будут сохранены.

1. По умолчанию сегменты генерируют выходную сущность, содержащую все атрибуты профилей клиентов, которые соответствуют определенным фильтрам. Если сегмент основан на других сущностях, кроме сущности *Клиент*, вы можете добавить дополнительные атрибуты из этих сущностей в выходную сущность. Укажите **Атрибуты проекта** для выбора атрибутов, которые будут добавлены к выходной сущности.

   > [!IMPORTANT]
   > Для сегментов, основанных на организациях, в сегмент необходимо включить сведения об одном или нескольких контактах каждой организации из сущности *ContactProfile*, чтобы этот сегмент можно было активировать или экспортировать в места назначения, требующие информации контакта. Для получения дополнительной информации о сущности *ContactProfile* см. в разделе [Семантические сопоставления](semantic-mappings.md).
   > Пример вывода для сегмента, основанного на корпоративных учетных записях с предполагаемыми атрибутами контактов, может выглядеть следующим образом:
   >
   > |ИД  |Имя учетной записи  |Выручка  |Имя контакта  | Роль контакта|
   > |---------|---------|---------|---------|---|
   > |10021     | Contoso | 100 тыс. | [Эбби Мосс, Рут Сото]  | [Генеральный директор, менеджер по закупкам]

   :::image type="content" source="media/segments-project-attributes.png" alt-text="Пример проецируемых атрибутов, выбранных на боковой панели для добавления к выходной сущности.":::
  
   Например: сегмент основан на сущности, содержащей данные о покупках, которые связаны с сущностью *Клиент*. Сегмент ищет всех клиентов из Испании, которые приобрели товары в текущем году. Вы можете добавить такие атрибуты, как цена товаров или дата покупки, ко всем совпадающим записям клиентов в выходной сущности. Эта информация может быть полезна для анализа сезонных корреляций общих расходов.

   > [!NOTE]
   > - **Атрибуты проекта** работают только для сущностей, которые имеют отношения «один ко многим» с сущностью клиента. Например, у одного клиента может быть несколько подписок.
   > - Если атрибут, который вы хотите проецировать, находится на расстоянии более одного прыжка от сущности *Клиент*, как определено отношением, этот атрибут должен использоваться в каждом правиле сегментного запроса, который вы создаете.
   > - Если атрибут, который вы хотите проецировать, находится на расстоянии ровно одного прыжка от сущности *Клиент*, этот атрибут не должен использоваться в каждом правиле сегментного запроса, который вы создаете.
   > - **Спроецированные атрибуты** учитываются при использовании операторов множества.

1. Выберите **Редактировать сведения** рядом с сегментом без названия. Укажите название для своего сегмента и обновите предложенное **Имя выходной сущности** для сегмента. При желании добавьте описание и [теги](work-with-tags-columns.md#manage-tags) к сегменту.

   :::image type="content" source="media/segments_edit_details.png" alt-text="Диалоговое окно изменения сведений.":::

1. Выберите **Запустить**, чтобы сохранить сегмент, активируйте его и начните обработку своего сегмента на основе всех правил и условий. В противном случае он будет сохранен как неактивный сегмент.

1. Выберите **Назад к сегментам**, чтобы вернуться к странице **Сегменты**.

1. По умолчанию сегмент создается как динамический сегмент. Это означает, что сегмент обновляется во время обновления системы. Чтобы [остановить автоматическое обновление](segments.md#manage-existing-segments), выберите сегмент и выберите параметр **Сделать статическим**. Статические сегменты можно [обновлять вручную](segments.md#refresh-segments) в любой момент.

> [!TIP]
> - Конструктор сегментов не будет предлагать допустимые значения из сущностей при установке операторов для условий. Вы можете перейти в раздел **Данные** > **Сущности** и загрузить данные сущности, чтобы увидеть, какие значения доступны.
> - Условия, основанные на датах, позволяют переключаться между фиксированными датами и плавающим диапазоном дат.
> - Если у вас есть несколько правил для вашего сегмента, рядом с правилом, которое вы редактируете, будет синяя вертикальная линия.
> - Вы можете перемещать правила и условия в другие места в определении сегмента. Выберите вертикальное многоточие (&vellip;) рядом с правилом или условием, а затем укажите, как и куда его переместить.
> - Элементы управления **Отменить** и **Повторить** на панели команд позволяют откатывать изменения.
> - После создания сегмента в некоторых сегментах можно [отслеживать использование сегмента](segments.md#track-usage-of-a-segment).

## <a name="quick-segments"></a>Быстрые сегменты

Быстрые сегменты позволяют быстро создавать простые сегменты с помощью одного оператора для более быстрого анализа.

1. На странице **Сегменты** выберите **Создать** > **Создать из**.
   - Выберите параметр **Профили** для построения сегмента на основе сущности *единого клиента*.
   - Выберите параметр **Меры**, чтобы построить сегмент вокруг ранее созданных мер.
   - Выберите параметр **Аналитика**, чтобы построить сегмент вокруг одной из выходных сущностей, которые вы сгенерировали, используя возможности **Прогнозы** или **Пользовательские модели**.

2. В диалоговом окне **Создать быстрый сегмент** выберите атрибут из раскрывающегося списка **Поле**.

3. Система предоставит больше аналитики, которая поможет вам создать лучшие сегменты ваших клиентов.
   - Для категориальных полей мы покажем количество 10 лучших клиентов. Выберите **Значение** и выберите **Проверить**.
   - Для числового атрибута система покажет, какое значение атрибута попадает под процентиль каждого клиента. Выберите **Оператор** и **Значение**, затем выберите **Проверить**.

4. Система предоставит вам **Расчетный размер сегмента**. Вы можете выбрать, создавать ли определенный вами сегмент или сначала вернуться к нему, чтобы получить другой размер сегмента.

   :::image type="content" source="media/quick-segment-name.png" alt-text="Название и оценка для быстрого сегмента.":::

5. Укажите **Имя** и **Имя выходной сущности** для своего сегмента. При желании добавьте [теги](work-with-tags-columns.md#manage-tags).

6. Нажмите **Сохранить**, чтобы создать сегмент.

7. После того как обработка сегмента завершена, вы можете просмотреть его, как и любой другой созданный вами сегмент.

## <a name="next-steps"></a>Дальнейшие действия

[Экспортируйте сегмент](export-destinations.md) и исследуйте [интеграцию карточки клиента](customer-card-add-in.md), чтобы использовать сегменты в других приложениях.

[!INCLUDE [footer-include](includes/footer-banner.md)]
