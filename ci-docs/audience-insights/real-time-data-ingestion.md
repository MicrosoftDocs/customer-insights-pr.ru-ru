---
title: Прием данных в реальном времени и ограничения
description: Общая информация о возможностях работы в реальном времени в аналитике аудитории.
ms.date: 10/27/2020
ms.reviewer: nikeller
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
manager: shellyha
ms.openlocfilehash: b00a72e6a67e33c8e70ccc6139c5e62020f9d3e1
ms.sourcegitcommit: b50c754481d0af6d0cf4b550775d7b31d95846ef
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2020
ms.locfileid: "4689191"
---
# <a name="real-time-data-ingestion-preview"></a><span data-ttu-id="0101f-103">Прием данных в режиме реального времени (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="0101f-103">Real-time data ingestion (preview)</span></span>

<span data-ttu-id="0101f-104">Функциональность работы в режиме, близком к режиму реального времени, позволяет за считанные секунды увидеть последние взаимодействия ваших клиентов с вашими продуктами или услугами.</span><span class="sxs-lookup"><span data-stu-id="0101f-104">The near real-time functionality lets you see, within seconds, the latest interactions that your customers have made with your products or services.</span></span>

<span data-ttu-id="0101f-105">[Запланированные обновления](system.md#schedule-tab) включают большое количество записей и несколько сложных операций.</span><span class="sxs-lookup"><span data-stu-id="0101f-105">[Scheduled refreshes](system.md#schedule-tab) include large numbers of records and several complex operations.</span></span> <span data-ttu-id="0101f-106">Сначала данные извлекаются из источника данных.</span><span class="sxs-lookup"><span data-stu-id="0101f-106">First, data is pulled from the data source.</span></span> <span data-ttu-id="0101f-107">Далее данные унифицируются, затем обогащаются дополнительной информацией.</span><span class="sxs-lookup"><span data-stu-id="0101f-107">Next, the data is unified, and then enriched with additional information.</span></span> <span data-ttu-id="0101f-108">Каждый запуск этого процесса может занимать от нескольких минут до нескольких часов.</span><span class="sxs-lookup"><span data-stu-id="0101f-108">Every run of this process can take minutes to hours.</span></span>

<span data-ttu-id="0101f-109">Функция в реальном времени предоставляет данные для немедленного потребления, пока последующее запланированное обновление не извлечет эти данные из источника данных.</span><span class="sxs-lookup"><span data-stu-id="0101f-109">The real-time functionality provides data immediately for consumption, until the subsequent scheduled refresh pulls this data from the data source.</span></span>

<span data-ttu-id="0101f-110">Обновления в режиме реального времени имеют срок действия, после которого они больше не переопределяют значение из источника данных:</span><span class="sxs-lookup"><span data-stu-id="0101f-110">Real-time updates have an expiration time after which they no longer override the value from the data source:</span></span>

- <span data-ttu-id="0101f-111">Обновления профиля будут храниться в течение 4 часов</span><span class="sxs-lookup"><span data-stu-id="0101f-111">Profile updates will be kept for 4 hours</span></span>
- <span data-ttu-id="0101f-112">Действия будут храниться в течение 30 дней</span><span class="sxs-lookup"><span data-stu-id="0101f-112">Activities will be kept for 30 days</span></span>

<span data-ttu-id="0101f-113">Эти значения являются параметрами вызова API-интерфейса, которые вы можете изменить.</span><span class="sxs-lookup"><span data-stu-id="0101f-113">These values are API call parameters that you can change.</span></span> <span data-ttu-id="0101f-114">Они нацелены на то, чтобы ваши исходные данные оставались вашим источником истинных данных.</span><span class="sxs-lookup"><span data-stu-id="0101f-114">They aim to ensure that your source data remains your source of truth.</span></span> <span data-ttu-id="0101f-115">Если вы хотите, чтобы обновления в реальном времени оставались включенными дольше, вам необходимо добавить их в источник данных, чтобы они были извлечены во время следующего запланированного обновления.</span><span class="sxs-lookup"><span data-stu-id="0101f-115">If you want real-time updates to be included for longer, you need to add them to a data source so they get pulled during the next scheduled refresh.</span></span>

## <a name="real-time-update-of-the-unified-customer-profile-fields"></a><span data-ttu-id="0101f-116">Обновление унифицированных полей профиля клиента в режиме реального времени</span><span class="sxs-lookup"><span data-stu-id="0101f-116">Real-time update of the unified customer profile fields</span></span>

<span data-ttu-id="0101f-117">Обновленные профили отобразятся в карточке клиента или любой другой визуализации в течение нескольких секунд.</span><span class="sxs-lookup"><span data-stu-id="0101f-117">Updated profiles will show in the customer card view, or any other visualization, within a few seconds.</span></span>

<span data-ttu-id="0101f-118">Поскольку операции в реальном времени выполняются после объединения данных, они применяются только к унифицированным профилям клиентов.</span><span class="sxs-lookup"><span data-stu-id="0101f-118">Because real-time operations take place after the data unification has happened, they only apply to the unified customer profiles.</span></span> <span data-ttu-id="0101f-119">Следовательно, изменения профиля в реальном времени не будут обновлять показатели, членство в сегментах или обогащение.</span><span class="sxs-lookup"><span data-stu-id="0101f-119">Consequently, real-time profile changes will not update measures, segment membership, or enrichments.</span></span>

### <a name="limitations"></a><span data-ttu-id="0101f-120">Ограничения</span><span class="sxs-lookup"><span data-stu-id="0101f-120">Limitations</span></span>

- <span data-ttu-id="0101f-121">Профили клиентов могут быть обновлены, но не созданы или удалены.</span><span class="sxs-lookup"><span data-stu-id="0101f-121">Customer profiles can be updated, but not created or deleted.</span></span>
- <span data-ttu-id="0101f-122">Экспорт обновлений в режиме реального времени во внешние системы, такие как Power BI, невозможен в данный момент.</span><span class="sxs-lookup"><span data-stu-id="0101f-122">Exporting real-time updates to external systems, like Power BI, is not possible at the moment.</span></span>

## <a name="real-time-creation-of-activities"></a><span data-ttu-id="0101f-123">Создание действий в режиме реального времени</span><span class="sxs-lookup"><span data-stu-id="0101f-123">Real-time creation of activities</span></span>

<span data-ttu-id="0101f-124">API реального времени позволяет публиковать новое действие из исходной системы (отдельную исходную запись) в унифицированный профиль клиента.</span><span class="sxs-lookup"><span data-stu-id="0101f-124">The real-time API lets you publish a new activity from your source system (an individual source record) to a unified customer profile.</span></span> <span data-ttu-id="0101f-125">Новое действие будет доступно как единое действие на временной шкале этого унифицированного профиля клиента в течение нескольких секунд.</span><span class="sxs-lookup"><span data-stu-id="0101f-125">The new activity will be available as a unified activity in that unified customer profile's timeline within seconds.</span></span> <span data-ttu-id="0101f-126">Вы можете увидеть временную шкалу в представлении карточки клиента или любой другой интеграции временной шкалы, которую вы настроили.</span><span class="sxs-lookup"><span data-stu-id="0101f-126">You can see the timeline in the customer card view or any other timeline integration you configured.</span></span>

> [!NOTE]
>
> - <span data-ttu-id="0101f-127">Действия не могут быть изменены.</span><span class="sxs-lookup"><span data-stu-id="0101f-127">Activities are immutable.</span></span> <span data-ttu-id="0101f-128">Они не меняются после создания.</span><span class="sxs-lookup"><span data-stu-id="0101f-128">They don't change once created.</span></span>
> - <span data-ttu-id="0101f-129">В настоящее время сегменты и показатели не будут обновляться на основе нового действия.</span><span class="sxs-lookup"><span data-stu-id="0101f-129">Currently, segments and measures won't update based on the new activity.</span></span>
> - <span data-ttu-id="0101f-130">Действия, добавленные только через API-интерфейс режима реального времени, не являются частью экспорта и не будут отображаться в PowerBI.</span><span class="sxs-lookup"><span data-stu-id="0101f-130">Activities added only through the real-time API are not part of exports and won't show up in PowerBI.</span></span>

<span data-ttu-id="0101f-131">Есть два способа подключиться к API реального времени:</span><span class="sxs-lookup"><span data-stu-id="0101f-131">There are two ways to connect to the real-time API:</span></span>

- <span data-ttu-id="0101f-132">[косвенно](#connect-via-the-dynamics-365-customer-insights-connector), с использованием [соединителя Dynamics 365 Customer Insights](https://docs.microsoft.com/connectors/customerinsights/)</span><span class="sxs-lookup"><span data-stu-id="0101f-132">[indirectly](#connect-via-the-dynamics-365-customer-insights-connector), using the [Dynamics 365 Customer Insights connector](https://docs.microsoft.com/connectors/customerinsights/)</span></span>
- <span data-ttu-id="0101f-133">[непосредственно](#connect-directly-to-the-real-time-api), с помощью кода</span><span class="sxs-lookup"><span data-stu-id="0101f-133">[directly](#connect-directly-to-the-real-time-api), with code</span></span>

<span data-ttu-id="0101f-134">К обоим способам применяются следующие общие необходимые условия:</span><span class="sxs-lookup"><span data-stu-id="0101f-134">Both ways share the following prerequisites:</span></span>

- <span data-ttu-id="0101f-135">Среда Customer Insights</span><span class="sxs-lookup"><span data-stu-id="0101f-135">A Customer Insights environment</span></span>
- <span data-ttu-id="0101f-136">Объединенные профили клиента</span><span class="sxs-lookup"><span data-stu-id="0101f-136">Unified customer profiles</span></span>
- <span data-ttu-id="0101f-137">Действия настроены и запущены</span><span class="sxs-lookup"><span data-stu-id="0101f-137">Activities configured and run</span></span>
- <span data-ttu-id="0101f-138">Разрешения участника или администратора для аутентификации вашей учетной записи</span><span class="sxs-lookup"><span data-stu-id="0101f-138">Contributor or Administrator permissions to authenticate your account</span></span>

## <a name="connect-via-the-dynamics-365-customer-insights-connector"></a><span data-ttu-id="0101f-139">Подключение через соединитель Dynamics 365 Customer Insights</span><span class="sxs-lookup"><span data-stu-id="0101f-139">Connect via the Dynamics 365 Customer Insights connector</span></span>

<span data-ttu-id="0101f-140">API-интерфейс режима реальном времени может принимать данные от выделенного соединителя Power Platform, [соединителя Dynamics 365 Customer Insights](https://docs.microsoft.com/connectors/customerinsights/), без необходимости писать и развертывать какой-либо код.</span><span class="sxs-lookup"><span data-stu-id="0101f-140">The real-time API can ingest data from a dedicated Power Platform connector, the [Dynamics 365 Customer Insights connector](https://docs.microsoft.com/connectors/customerinsights/), without the need to write and deploy any code.</span></span>    
<span data-ttu-id="0101f-141">Соединитель может выполнять те же действия в реальном времени, что и API.</span><span class="sxs-lookup"><span data-stu-id="0101f-141">The connector can do the same real-time actions as the API.</span></span> <span data-ttu-id="0101f-142">Вам нужна действующая лицензия на премиум-соединители.</span><span class="sxs-lookup"><span data-stu-id="0101f-142">You need a valid license for premium connectors.</span></span> <span data-ttu-id="0101f-143">Дополнительные сведения см. в разделе [Вопросы и ответы по лицензированию Power Apps и Power Automate](https://docs.microsoft.com/power-platform/admin/powerapps-flow-licensing-faq).</span><span class="sxs-lookup"><span data-stu-id="0101f-143">For more information, see [Power Apps and Power Automate licensing FAQs](https://docs.microsoft.com/power-platform/admin/powerapps-flow-licensing-faq).</span></span>

- <span data-ttu-id="0101f-144">Power Platform [Power Apps и/или Power Automate](https://docs.microsoft.com/connectors/)</span><span class="sxs-lookup"><span data-stu-id="0101f-144">Power Platform [Power Apps and/or Power Automate](https://docs.microsoft.com/connectors/)</span></span>
- <span data-ttu-id="0101f-145">Azure [Logic Apps](https://docs.microsoft.com/azure/connectors/apis-list)</span><span class="sxs-lookup"><span data-stu-id="0101f-145">Azure [Logic Apps](https://docs.microsoft.com/azure/connectors/apis-list)</span></span>

<span data-ttu-id="0101f-146">Подробнее о создании потоков см. в разделе [Документация по Power Automate](https://docs.microsoft.com/power-automate/),</span><span class="sxs-lookup"><span data-stu-id="0101f-146">For details about creating flows, see the [Power Automate documentation](https://docs.microsoft.com/power-automate/).</span></span>

## <a name="connect-directly-to-the-real-time-api"></a><span data-ttu-id="0101f-147">Подключение напрямую к API-интерфейсу режима реального времени</span><span class="sxs-lookup"><span data-stu-id="0101f-147">Connect directly to the real-time API</span></span>

<span data-ttu-id="0101f-148">Вы можете использовать возможности реального времени, создав свой собственный конвейер и подключившись напрямую к API реального времени.</span><span class="sxs-lookup"><span data-stu-id="0101f-148">You can use the real-time capabilities by building your own pipeline and connecting directly to the real-time API.</span></span>    
<span data-ttu-id="0101f-149">Вы можете опубликовать действие в формате вашей исходной системы или в формате UnifiedActivity.</span><span class="sxs-lookup"><span data-stu-id="0101f-149">You can post an activity in the format of your source system or in the UnifiedActivity format.</span></span> <span data-ttu-id="0101f-150">Получите формат, сделав вызов API для /api/instances/{instanceId}/manage/entities/UnifiedActivity.</span><span class="sxs-lookup"><span data-stu-id="0101f-150">Get the format by making an API call to /api/instances/{instanceId}/manage/entities/UnifiedActivity.</span></span>

<span data-ttu-id="0101f-151">Подробную информацию об этом API, включая параметры и ответы, можно найти в разделе **EntityData** в [Справочник по API Customer Insights](https://developer.ci.ai.dynamics.com/api-details#api=CustomerInsights).</span><span class="sxs-lookup"><span data-stu-id="0101f-151">Details of this API, including parameters and responses, can be found in the **EntityData** section on the [Customer Insights APIs reference](https://developer.ci.ai.dynamics.com/api-details#api=CustomerInsights).</span></span> <span data-ttu-id="0101f-152">Для получения дополнительной информации см. [Работа с API Customer Insights](apis.md).</span><span class="sxs-lookup"><span data-stu-id="0101f-152">For more information, see [Work with Customer Insights APIs](apis.md).</span></span>

## <a name="understand-your-real-time-usage-with-telemetry"></a><span data-ttu-id="0101f-153">Понимание использования в реальном времени с помощью телеметрии</span><span class="sxs-lookup"><span data-stu-id="0101f-153">Understand your real-time usage with telemetry</span></span>

<span data-ttu-id="0101f-154">Получите обзор объема запросов к API в реальном времени и информацию о проблемах, с которыми может столкнуться система.</span><span class="sxs-lookup"><span data-stu-id="0101f-154">Get an overview of the volume of requests to the real-time API and information about issues the system may encounter.</span></span> <span data-ttu-id="0101f-155">Вы можете [получить доступ к телеметрии в реальном времени](system.md#api-usage-tab), перейдя в **Администрирование** > **Система** > **Использование API**.</span><span class="sxs-lookup"><span data-stu-id="0101f-155">You can [access the real-time telemetry](system.md#api-usage-tab) by going to **Admin** > **System** > **API usage**.</span></span> <span data-ttu-id="0101f-156">В таблице **Операции** строки для операций API, которые используют методы реального времени, содержат кнопку для просмотра использования API в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="0101f-156">In the **Operations** table, rows for API operations which use the real-time methods contain a button to view real-time API usage.</span></span> <span data-ttu-id="0101f-157">Кнопка представлена в виде символа бинокля.</span><span class="sxs-lookup"><span data-stu-id="0101f-157">The button is visualized with a binocular symbol.</span></span> <span data-ttu-id="0101f-158">Нажмите кнопку, чтобы открыть боковую панель, содержащую сведения об использовании API в реальном времени в текущей среде.</span><span class="sxs-lookup"><span data-stu-id="0101f-158">Select the button to open a side pane containing usage details for the real-time API usage in the current environment.</span></span>

<span data-ttu-id="0101f-159">Использовать выбор **Группировать по**, чтобы выбрать, как лучше всего представлять ваши взаимодействия в режиме реального времени на временной шкале в диапазоне от последних 24 часов до последних 30 дней.</span><span class="sxs-lookup"><span data-stu-id="0101f-159">Use the **Group by** selector to choose how to best present your real-time interactions on a timeline ranging from the last 24 hours to the last 30 days.</span></span> <span data-ttu-id="0101f-160">Вы можете сгруппировать данные по методу API, квалифицированному имени сущности (принятой сущности), кем создано (источник события), результату (успех или неудача) или кодам ошибок.</span><span class="sxs-lookup"><span data-stu-id="0101f-160">You can group the data by API method, entity qualified name (ingested entity), created by (source of the event), result (success or failure) or error codes.</span></span> <span data-ttu-id="0101f-161">Данные доступны в виде историческая диаграмма и в виде таблицы.</span><span class="sxs-lookup"><span data-stu-id="0101f-161">The data is available as a history chart and as a table.</span></span>
