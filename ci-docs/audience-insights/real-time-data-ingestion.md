---
title: Прием данных в реальном времени и ограничения
description: Общая информация о возможностях работы в реальном времени в аналитике аудитории.
ms.date: 10/27/2020
ms.reviewer: nikeller
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
manager: shellyha
ms.openlocfilehash: b00a72e6a67e33c8e70ccc6139c5e62020f9d3e1
ms.sourcegitcommit: b50c754481d0af6d0cf4b550775d7b31d95846ef
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2020
ms.locfileid: "4689191"
---
# <a name="real-time-data-ingestion-preview"></a>Прием данных в режиме реального времени (предварительная версия)

Функциональность работы в режиме, близком к режиму реального времени, позволяет за считанные секунды увидеть последние взаимодействия ваших клиентов с вашими продуктами или услугами.

[Запланированные обновления](system.md#schedule-tab) включают большое количество записей и несколько сложных операций. Сначала данные извлекаются из источника данных. Далее данные унифицируются, затем обогащаются дополнительной информацией. Каждый запуск этого процесса может занимать от нескольких минут до нескольких часов.

Функция в реальном времени предоставляет данные для немедленного потребления, пока последующее запланированное обновление не извлечет эти данные из источника данных.

Обновления в режиме реального времени имеют срок действия, после которого они больше не переопределяют значение из источника данных:

- Обновления профиля будут храниться в течение 4 часов
- Действия будут храниться в течение 30 дней

Эти значения являются параметрами вызова API-интерфейса, которые вы можете изменить. Они нацелены на то, чтобы ваши исходные данные оставались вашим источником истинных данных. Если вы хотите, чтобы обновления в реальном времени оставались включенными дольше, вам необходимо добавить их в источник данных, чтобы они были извлечены во время следующего запланированного обновления.

## <a name="real-time-update-of-the-unified-customer-profile-fields"></a>Обновление унифицированных полей профиля клиента в режиме реального времени

Обновленные профили отобразятся в карточке клиента или любой другой визуализации в течение нескольких секунд.

Поскольку операции в реальном времени выполняются после объединения данных, они применяются только к унифицированным профилям клиентов. Следовательно, изменения профиля в реальном времени не будут обновлять показатели, членство в сегментах или обогащение.

### <a name="limitations"></a>Ограничения

- Профили клиентов могут быть обновлены, но не созданы или удалены.
- Экспорт обновлений в режиме реального времени во внешние системы, такие как Power BI, невозможен в данный момент.

## <a name="real-time-creation-of-activities"></a>Создание действий в режиме реального времени

API реального времени позволяет публиковать новое действие из исходной системы (отдельную исходную запись) в унифицированный профиль клиента. Новое действие будет доступно как единое действие на временной шкале этого унифицированного профиля клиента в течение нескольких секунд. Вы можете увидеть временную шкалу в представлении карточки клиента или любой другой интеграции временной шкалы, которую вы настроили.

> [!NOTE]
>
> - Действия не могут быть изменены. Они не меняются после создания.
> - В настоящее время сегменты и показатели не будут обновляться на основе нового действия.
> - Действия, добавленные только через API-интерфейс режима реального времени, не являются частью экспорта и не будут отображаться в PowerBI.

Есть два способа подключиться к API реального времени:

- [косвенно](#connect-via-the-dynamics-365-customer-insights-connector), с использованием [соединителя Dynamics 365 Customer Insights](https://docs.microsoft.com/connectors/customerinsights/)
- [непосредственно](#connect-directly-to-the-real-time-api), с помощью кода

К обоим способам применяются следующие общие необходимые условия:

- Среда Customer Insights
- Объединенные профили клиента
- Действия настроены и запущены
- Разрешения участника или администратора для аутентификации вашей учетной записи

## <a name="connect-via-the-dynamics-365-customer-insights-connector"></a>Подключение через соединитель Dynamics 365 Customer Insights

API-интерфейс режима реальном времени может принимать данные от выделенного соединителя Power Platform, [соединителя Dynamics 365 Customer Insights](https://docs.microsoft.com/connectors/customerinsights/), без необходимости писать и развертывать какой-либо код.    
Соединитель может выполнять те же действия в реальном времени, что и API. Вам нужна действующая лицензия на премиум-соединители. Дополнительные сведения см. в разделе [Вопросы и ответы по лицензированию Power Apps и Power Automate](https://docs.microsoft.com/power-platform/admin/powerapps-flow-licensing-faq).

- Power Platform [Power Apps и/или Power Automate](https://docs.microsoft.com/connectors/)
- Azure [Logic Apps](https://docs.microsoft.com/azure/connectors/apis-list)

Подробнее о создании потоков см. в разделе [Документация по Power Automate](https://docs.microsoft.com/power-automate/),

## <a name="connect-directly-to-the-real-time-api"></a>Подключение напрямую к API-интерфейсу режима реального времени

Вы можете использовать возможности реального времени, создав свой собственный конвейер и подключившись напрямую к API реального времени.    
Вы можете опубликовать действие в формате вашей исходной системы или в формате UnifiedActivity. Получите формат, сделав вызов API для /api/instances/{instanceId}/manage/entities/UnifiedActivity.

Подробную информацию об этом API, включая параметры и ответы, можно найти в разделе **EntityData** в [Справочник по API Customer Insights](https://developer.ci.ai.dynamics.com/api-details#api=CustomerInsights). Для получения дополнительной информации см. [Работа с API Customer Insights](apis.md).

## <a name="understand-your-real-time-usage-with-telemetry"></a>Понимание использования в реальном времени с помощью телеметрии

Получите обзор объема запросов к API в реальном времени и информацию о проблемах, с которыми может столкнуться система. Вы можете [получить доступ к телеметрии в реальном времени](system.md#api-usage-tab), перейдя в **Администрирование** > **Система** > **Использование API**. В таблице **Операции** строки для операций API, которые используют методы реального времени, содержат кнопку для просмотра использования API в реальном времени. Кнопка представлена в виде символа бинокля. Нажмите кнопку, чтобы открыть боковую панель, содержащую сведения об использовании API в реальном времени в текущей среде.

Использовать выбор **Группировать по**, чтобы выбрать, как лучше всего представлять ваши взаимодействия в режиме реального времени на временной шкале в диапазоне от последних 24 часов до последних 30 дней. Вы можете сгруппировать данные по методу API, квалифицированному имени сущности (принятой сущности), кем создано (источник события), результату (успех или неудача) или кодам ошибок. Данные доступны в виде историческая диаграмма и в виде таблицы.
