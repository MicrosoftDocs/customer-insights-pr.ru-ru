---
title: Интегрируйте веб-данные из аналитики взаимодействий с помощью аналитики аудитории
description: Перенесите веб-информацию о клиентах из аналитики взаимодействия в аналитику аудитории.
ms.date: 12/17/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: mukeshpo
manager: shellyha
ms.openlocfilehash: ba1cf6c7e85b8fe90baf34018f1309095573adf1
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2021
ms.locfileid: "5267692"
---
# <a name="integrate-web-data-from-engagement-insights-with-audience-insights"></a><span data-ttu-id="b390c-103">Интегрируйте веб-данные из аналитики взаимодействий с помощью аналитики аудитории</span><span class="sxs-lookup"><span data-stu-id="b390c-103">Integrate web data from engagement insights with audience insights</span></span>

<span data-ttu-id="b390c-104">Клиенты часто проводят свои повседневные транзакции в Интернете с помощью веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="b390c-104">Customers often do their day to day transactions online using web sites.</span></span> <span data-ttu-id="b390c-105">Возможность аналитики взаимодействия в Dynamics 365 Customer Insights — удобное решение для интеграции веб-данных в качестве источника.</span><span class="sxs-lookup"><span data-stu-id="b390c-105">The engagement insights capability in Dynamics 365 Customer Insights is a handy solution to integrate web data as a source.</span></span> <span data-ttu-id="b390c-106">В дополнение к транзакционным, демографическим или поведенческим данным мы можем видеть действия в Интернете в единых профилях клиентов.</span><span class="sxs-lookup"><span data-stu-id="b390c-106">In addition to transactional, demographic, or behavioral data we can see activities on the web in unified customer profiles.</span></span> <span data-ttu-id="b390c-107">Мы можем использовать этот профиль, чтобы получить дополнительную информацию, такую как сегменты, меры или прогнозы для активации аудитории.</span><span class="sxs-lookup"><span data-stu-id="b390c-107">We can use this profile to gain additional insights like segments, measures, or predictions for audience activation.</span></span>

<span data-ttu-id="b390c-108">В этой статье описываются шаги по переносу данных о веб-активности ваших клиентов из аналитики взаимодействия в существующую среду аналитики аудитории.</span><span class="sxs-lookup"><span data-stu-id="b390c-108">This article describes the steps to bring your customers’ web activity data from engagement insights into your existing audience insights environment.</span></span>

<span data-ttu-id="b390c-109">В этом примере мы предполагаем, что среда содержит единые профили клиентов.</span><span class="sxs-lookup"><span data-stu-id="b390c-109">In this example, we assume an environment that contains unified customer profiles.</span></span> <span data-ttu-id="b390c-110">Профили были объединены с источниками из опросов, розничных продаж и билетной системы.</span><span class="sxs-lookup"><span data-stu-id="b390c-110">The profiles were unified with sources from surveys, retail sales, and a ticketing system.</span></span> <span data-ttu-id="b390c-111">Также показывает связанные с этим действия клиентов.</span><span class="sxs-lookup"><span data-stu-id="b390c-111">It also shows the related activities of the customers.</span></span> 

<span data-ttu-id="b390c-112">Теперь мы хотим знать, посещает ли клиент наши веб-ресурсы и понимает ли их действия.</span><span class="sxs-lookup"><span data-stu-id="b390c-112">We now want to know if a customer visits our web properties and understand their activities.</span></span> <span data-ttu-id="b390c-113">Действия включают, например, посещение веб-сайтов или просмотр страниц продуктов по ссылке, полученной в электронном письме.</span><span class="sxs-lookup"><span data-stu-id="b390c-113">Activities include, for example, visited websites or viewed product pages from a link received in an email.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b390c-114">Предварительные условия</span><span class="sxs-lookup"><span data-stu-id="b390c-114">Prerequisites</span></span>

<span data-ttu-id="b390c-115">Чтобы интегрировать данные из аналитики взаимодействия, необходимо выполнить несколько предварительных условий:</span><span class="sxs-lookup"><span data-stu-id="b390c-115">To integrate data from engagement insights, a few prerequisites need to be met:</span></span> 

- <span data-ttu-id="b390c-116">Интегрируйте SDK аналитики взаимодействия в свой веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="b390c-116">Integrate the engagement insights SDK with your website.</span></span> <span data-ttu-id="b390c-117">Дополнительные сведения см. в статье о [начале работы с веб-SDK](../engagement-insights/instrument-website.md).</span><span class="sxs-lookup"><span data-stu-id="b390c-117">For more information, see [Get started with the web SDK](../engagement-insights/instrument-website.md).</span></span>
- <span data-ttu-id="b390c-118">Для экспорта веб-событий из аналитики взаимодействия требуется доступ к учетной записи хранения ADLS Gen 2, которая будет использоваться для приема данных веб-событий в аналитику аудитории.</span><span class="sxs-lookup"><span data-stu-id="b390c-118">Exporting web events from engagement insights requires access to an ADLS Gen 2 storage account that will be used to ingest the web events data to audience insights.</span></span> <span data-ttu-id="b390c-119">Дополнительные сведения см. в разделе [Экспорт событий](../engagement-insights/export-events.md).</span><span class="sxs-lookup"><span data-stu-id="b390c-119">For more information, see [Export events](../engagement-insights/export-events.md).</span></span>

## <a name="configure-refined-events-in-engagement-insights"></a><span data-ttu-id="b390c-120">Настройте уточненные события в аналитике взаимодействия</span><span class="sxs-lookup"><span data-stu-id="b390c-120">Configure refined events in engagement insights</span></span>

<span data-ttu-id="b390c-121">После того, как администратор оснастил веб-сайт SDK аналитики взаимодействия, *базовые события* собираются, когда пользователь просматривает веб-страницу или где-то щелкает.</span><span class="sxs-lookup"><span data-stu-id="b390c-121">After an administrator instrumented a website with the engagement insights SDK, *base events* are gathered when a user views a web page or clicks somewhere.</span></span> <span data-ttu-id="b390c-122">Базовые события обычно содержат множество деталей.</span><span class="sxs-lookup"><span data-stu-id="b390c-122">Base events tend to contain numerous details.</span></span> <span data-ttu-id="b390c-123">В зависимости от вашего варианта использования вам понадобится только подмножество данных в базовом событии.</span><span class="sxs-lookup"><span data-stu-id="b390c-123">Depending on your use case, you only need a subset of the data in a base event.</span></span> <span data-ttu-id="b390c-124">Аналитика взаимодействия позволяет создавать *уточненные события*, которые содержат только свойства выбранного вами базового события.</span><span class="sxs-lookup"><span data-stu-id="b390c-124">Engagement insights let you create *refined events* that contain only the properties of a base event that you select.</span></span>     

<span data-ttu-id="b390c-125">Для получения дополнительной информации см. [Создание и изменение уточненных событий](../engagement-insights/refined-events.md).</span><span class="sxs-lookup"><span data-stu-id="b390c-125">For more information, see [Create and modify refined events](../engagement-insights/refined-events.md).</span></span>

<span data-ttu-id="b390c-126">Соображения при создании уточненных событий:</span><span class="sxs-lookup"><span data-stu-id="b390c-126">Considerations when creating refined events:</span></span> 

- <span data-ttu-id="b390c-127">Дайте понятное имя для уточненного события.</span><span class="sxs-lookup"><span data-stu-id="b390c-127">Provide a meaningful name for the refined event.</span></span> <span data-ttu-id="b390c-128">Он используется как название действия в аналитике аудитории.</span><span class="sxs-lookup"><span data-stu-id="b390c-128">It's be used as an activity name in audience insights.</span></span>
- <span data-ttu-id="b390c-129">Выберите по крайней мере следующие свойства, чтобы создать действие в аналитике аудитории:</span><span class="sxs-lookup"><span data-stu-id="b390c-129">Select at least the following properties to create an activity in audience insights:</span></span> 
    - <span data-ttu-id="b390c-130">Signal.Action.Name — указание подробностей действия</span><span class="sxs-lookup"><span data-stu-id="b390c-130">Signal.Action.Name - indicating the activity details</span></span>
    - <span data-ttu-id="b390c-131">Signal.User.Id — используется для сопоставления с идентификатором клиента</span><span class="sxs-lookup"><span data-stu-id="b390c-131">Signal.User.Id - used to map with the customer ID</span></span>
    - <span data-ttu-id="b390c-132">Signal.View.Uri — используется как веб-адрес в качестве основы для сегментов или мер</span><span class="sxs-lookup"><span data-stu-id="b390c-132">Signal.View.Uri - used as a web address as a basis for segments or measures</span></span>
    - <span data-ttu-id="b390c-133">Signal.Export.Id — используется в качестве первичного ключа для событий</span><span class="sxs-lookup"><span data-stu-id="b390c-133">Signal.Export.Id - to use as a primary key for events</span></span> <!-- system generated, do we need to list?-->
    - <span data-ttu-id="b390c-134">Signal.Timestamp — для определения даты и времени действия</span><span class="sxs-lookup"><span data-stu-id="b390c-134">Signal.Timestamp - to determine the date and time for the activity</span></span>

<span data-ttu-id="b390c-135">Выберите фильтры, чтобы сосредоточиться на событиях и страницах, которые имеют значение для вашего варианта использования.</span><span class="sxs-lookup"><span data-stu-id="b390c-135">Select the filters to focus on the events and pages that matter for your use case.</span></span> <span data-ttu-id="b390c-136">В этом примере мы будем использовать название действия «Продвижение по электронной почте».</span><span class="sxs-lookup"><span data-stu-id="b390c-136">In this example, we'll use the "Email promotion" action name.</span></span>

## <a name="export-the-refined-web-events"></a><span data-ttu-id="b390c-137">Экспорт уточненных веб-событий</span><span class="sxs-lookup"><span data-stu-id="b390c-137">Export the Refined Web Events</span></span> 

<span data-ttu-id="b390c-138">После определения уточненного события необходимо настроить экспорт данных события в Azure Data Lake Storage, который можно задать как источник данных для вставки в аналитику аудитории.</span><span class="sxs-lookup"><span data-stu-id="b390c-138">After defining the refined event is defined, you have to configure the export of the event data to an Azure Data Lake Storage, that can be set as a data source for ingestion in audience insights.</span></span> <span data-ttu-id="b390c-139">Экспорт происходит постоянно, поскольку события исходят из веб-свойства.</span><span class="sxs-lookup"><span data-stu-id="b390c-139">Exports happen constantly as the events flow from the web property.</span></span>

<span data-ttu-id="b390c-140">Дополнительные сведения см. в разделе [Экспорт событий](../engagement-insights/export-events.md).</span><span class="sxs-lookup"><span data-stu-id="b390c-140">For more information, see [Export events](../engagement-insights/export-events.md).</span></span>

## <a name="ingest-event-data-to-audience-insights"></a><span data-ttu-id="b390c-141">Передача данных о событиях в аналитику аудитории</span><span class="sxs-lookup"><span data-stu-id="b390c-141">Ingest event data to audience insights</span></span>

<span data-ttu-id="b390c-142">Теперь, когда вы определили уточненное событие и настроили его экспорт, мы переходим к загрузке данных в аналитику аудитории.</span><span class="sxs-lookup"><span data-stu-id="b390c-142">Now that you have defined the refined event and configured its export, we move on to ingesting the data to audience insights.</span></span> <span data-ttu-id="b390c-143">Вам необходимо создать новый источник данных на основе папки Common Data Model.</span><span class="sxs-lookup"><span data-stu-id="b390c-143">You need to create a new data source based on a Common Data Model folder.</span></span> <span data-ttu-id="b390c-144">Введите сведения об учетной записи хранения, в которую вы экспортируете события.</span><span class="sxs-lookup"><span data-stu-id="b390c-144">Enter the details for the storage account you export the events to.</span></span> <span data-ttu-id="b390c-145">В файле *default.cdm.json* выберите уточненное событие для передачи и создайте сущность в аналитике аудитории.</span><span class="sxs-lookup"><span data-stu-id="b390c-145">In the *default.cdm.json* file, select the refined event to ingest and create the entity in audience insights.</span></span>

<span data-ttu-id="b390c-146">Для получения дополнительной информации см. [Подключение к папке Common Data Model с помощью учетной записи Azure Data Lake](connect-common-data-model.md)</span><span class="sxs-lookup"><span data-stu-id="b390c-146">For more information, see [Connect to a Common Data Model folder using an Azure Data Lake account](connect-common-data-model.md)</span></span>


## <a name="relate-refined-event-data-as-an-activity-of-a-customer-profile"></a><span data-ttu-id="b390c-147">Свяжите уточненные данные о событиях с действием профиля клиента</span><span class="sxs-lookup"><span data-stu-id="b390c-147">Relate refined event data as an activity of a customer profile</span></span>

<span data-ttu-id="b390c-148">После завершения приема сущности вы можете настроить действие для профиля клиента.</span><span class="sxs-lookup"><span data-stu-id="b390c-148">After completing the entity ingestion, you can configure the activity for the customer profile.</span></span>

<span data-ttu-id="b390c-149">Дополнительные сведения см. в статье [Действия клиента](activities.md).</span><span class="sxs-lookup"><span data-stu-id="b390c-149">For more information, see [Customer activities](activities.md).</span></span>

:::image type="content" source="media/web-event-activity.png" alt-text="Страница действий с развернутой панелью редактирования действий и заполненными полями.":::

<span data-ttu-id="b390c-151">Настройте новое действие со следующим сопоставлением:</span><span class="sxs-lookup"><span data-stu-id="b390c-151">Configure the new activity with the following mapping:</span></span> 

- <span data-ttu-id="b390c-152">**Первичный ключ:** Signal.Export.Id, уникальный идентификатор, доступный для каждой записи события в аналитике взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="b390c-152">**Primary Key:** Signal.Export.Id, a unique ID that is available for every event record in engagement insights.</span></span> <span data-ttu-id="b390c-153">Это свойство создается автоматически.</span><span class="sxs-lookup"><span data-stu-id="b390c-153">This property is automatically generated.</span></span>

- <span data-ttu-id="b390c-154">**Метка времени:** Signal.Timestamp в свойстве события.</span><span class="sxs-lookup"><span data-stu-id="b390c-154">**Timestamp:** Signal.Timestamp in the event property.</span></span>

- <span data-ttu-id="b390c-155">**Событие:** Signal.Name, название события, которое вы хотите отслеживать.</span><span class="sxs-lookup"><span data-stu-id="b390c-155">**Event:** Signal.Name, the event name that you want to track.</span></span>

- <span data-ttu-id="b390c-156">**Веб-адрес:** Signal.View.Uri, относящийся к URI страницы, создавшей событие.</span><span class="sxs-lookup"><span data-stu-id="b390c-156">**Web address:** Signal.View.Uri referring to the uri of the page that created the event.</span></span>

- <span data-ttu-id="b390c-157">**Подробности:** Signal.Action.Name для представления информации, связанной с событием.</span><span class="sxs-lookup"><span data-stu-id="b390c-157">**Details:** Signal.Action.Name to represent the information to associate with the event.</span></span> <span data-ttu-id="b390c-158">Выбранное свойство в этом случае указывает, что событие предназначено для продвижения по электронной почте.</span><span class="sxs-lookup"><span data-stu-id="b390c-158">The selected property in this case indicates that the event is for email promotion.</span></span>

- <span data-ttu-id="b390c-159">**Тип действия:** в этом примере мы выбираем существующий тип действия WebLog.</span><span class="sxs-lookup"><span data-stu-id="b390c-159">**Activity type:** In this example, we choose the exsting activity type WebLog.</span></span> <span data-ttu-id="b390c-160">Этот выбор является полезным параметром фильтра для запуска моделей прогноза или создания сегментов на основе этого типа действий.</span><span class="sxs-lookup"><span data-stu-id="b390c-160">This selection is a useful filter option to run prediction models or create segments based on this activity type.</span></span>

- <span data-ttu-id="b390c-161">**Установить отношение:** этот важный параметр связывает действие с существующими профилями клиентов.</span><span class="sxs-lookup"><span data-stu-id="b390c-161">**Set up relationship:** This important setting ties the activity to existing customer profiles.</span></span> <span data-ttu-id="b390c-162">**Signal.User.Id** — это идентификатор, настроенный в SDK для сбора и связанный с идентификатором пользователя в других источниках данных, настроенных в аналитике аудитории.</span><span class="sxs-lookup"><span data-stu-id="b390c-162">**Signal.User.Id** is the identifier configured in the SDK to be collected and that relates to the user ID in other data sources that are configured in audience insights.</span></span> <span data-ttu-id="b390c-163">В этом примере мы настраиваем отношение между Signal.User.Id и RetailCustomers:CustomerRetailId, которое является первичным ключом, который был определен на этапе сопоставления в процессе объединения данных.</span><span class="sxs-lookup"><span data-stu-id="b390c-163">In this example, we configure the relationship between Signal.User.Id and RetailCustomers:CustomerRetailId, which is the primary key that was deinfed in the map step of the data unification process.</span></span>


<span data-ttu-id="b390c-164">После обработки действий вы можете просмотреть записи о клиентах и открыть карточку клиента, чтобы увидеть действия из аналитики взаимодействия на временной шкале.</span><span class="sxs-lookup"><span data-stu-id="b390c-164">After processing the activities, you can review customer records and open a customer card to see activities from engagement insights in the timeline.</span></span> 

> [!TIP]
> <span data-ttu-id="b390c-165">Чтобы найти идентификатор клиента, у которого есть аналитика взаимодействия, перейдите на страницу **Сущности** и предварительно просмотрите данные для сущности UnifiedActivity.</span><span class="sxs-lookup"><span data-stu-id="b390c-165">To find a customer id that has an engagement insights activity, go to **Entities** and preview the data for the UnifiedActivity entity.</span></span> <span data-ttu-id="b390c-166">ActivityTypeDisplay = WebLog содержит действие аналитики взаимодействия, настроенное в приведенном выше примере.</span><span class="sxs-lookup"><span data-stu-id="b390c-166">ActivityTypeDisplay = WebLog contain the engagement insights activity configured in the example above.</span></span> <span data-ttu-id="b390c-167">Скопируйте идентификатор клиента для одной из этих записей и для этого идентификатора на странице **Клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b390c-167">Copy the customer ID for one of those records and for that ID on the **Customers** page.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b390c-168">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="b390c-168">Next Steps</span></span>

<span data-ttu-id="b390c-169">Теперь вы можете создать [сегменты](segments.md), [меры](measures.md) и [прогнозы](predictions.md), чтобы установить значимую связь со своими клиентами.</span><span class="sxs-lookup"><span data-stu-id="b390c-169">You can now create [segments](segments.md), [measures](measures.md), and [predictions](predictions.md) to make a meaningful connection with your customers.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]