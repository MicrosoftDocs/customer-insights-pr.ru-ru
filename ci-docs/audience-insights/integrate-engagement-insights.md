---
title: Интегрируйте веб-данные из аналитики взаимодействий с помощью аналитики аудитории
description: Перенесите веб-информацию о клиентах из аналитики взаимодействия в аналитику аудитории.
ms.date: 06/24/2021
ms.subservice: audience-insights
ms.topic: conceptual
author: mukeshpo
ms.author: mukeshpo
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 037e264658bc354618cff56a89645ef7552aeb13
ms.sourcegitcommit: 1946d7af0bd2ca216885bec3c5c95009996d9a28
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/25/2022
ms.locfileid: "8350561"
---
# <a name="integrate-web-data-from-engagement-insights-with-audience-insights"></a>Интегрируйте веб-данные из аналитики взаимодействий с помощью аналитики аудитории


[!INCLUDE [cc-beta-prerelease-disclaimer](../engagement-insights/includes/cc-beta-prerelease-disclaimer.md)]

Клиенты часто проводят свои повседневные транзакции в Интернете с помощью веб-сайтов. Возможность аналитики взаимодействия (предварительная версия) в Dynamics 365 Customer Insights — удобное решение для интеграции веб-данных в качестве источника. В дополнение к транзакционным, демографическим или поведенческим данным мы можем видеть действия в Интернете в единых профилях клиентов. Мы можем использовать эти профили, чтобы получить дополнительную информацию, такую как сегменты, показатели или прогнозы для действий аудитории.

В этой статье описываются шаги по переносу данных о веб-активности ваших клиентов из аналитики взаимодействия в существующую среду аналитики аудитории.

В этом примере мы предполагаем, что среда содержит единые профили клиентов. Профили были объединены с источниками из опросов, розничных продаж и билетной системы. Также показывает связанные с этим действия клиентов. 

Теперь мы хотим знать, посещает ли клиент наши веб-ресурсы и понимает ли их действия. Действия включают, например, посещение веб-сайтов или просмотр страниц продуктов по ссылке, полученной в электронном письме.

## <a name="prerequisites"></a>Предварительные условия

Чтобы интегрировать данные из аналитики взаимодействия, необходимо выполнить несколько предварительных условий: 

- Интегрируйте SDK аналитики взаимодействия в свой веб-сайт. Дополнительные сведения см. в разделе [Обзор ресурсов для разработчиков](../engagement-insights/developer-resources.md).
- Для экспорта веб-событий из аналитики взаимодействия требуется доступ к учетной записи Azure Data Lake Storage, которая будет использоваться для передачи данных веб-событий в аналитику аудитории. Дополнительные сведения см. в разделе [Экспорт событий](../engagement-insights/export-events.md).

## <a name="configure-refined-events-in-engagement-insights"></a>Настройте уточненные события в аналитике взаимодействия

После того как администратор оснастит веб-сайт с SDK аналитики взаимодействия, *базовые события* собираются, когда пользователь просматривает веб-страницу или где-то щелкает. Базовые события обычно содержат множество деталей. В зависимости от вашего варианта использования вам понадобится только подмножество данных в базовом событии. Аналитика взаимодействия позволяет создавать *уточненные события*, которые содержат только свойства выбранного вами базового события.     

Для получения дополнительной информации см. [Создание и изменение уточненных событий](../engagement-insights/refined-events.md).

Соображения при создании уточненных событий: 

- Дайте понятное имя для уточненного события. Оно будет использоваться как название действия в аналитики аудитории.
- Выберите по крайней мере следующие свойства, чтобы создать действие в аналитике аудитории: 
    - Signal.Action.Name — указывает сведения действия.
    - Signal.User.Id — используется для сопоставления с идентификатором клиента.
    - Signal.View.Uri — используется как веб-адрес в качестве основы для сегментов или мер.
    - Signal.Export.Id — используется как первичный ключ для событий.
    - Signal.Timestamp — определяет дату и время действия.

Выберите фильтры, чтобы сосредоточиться на событиях и страницах, которые имеют значение для вашего варианта использования. В этом примере мы будем использовать название действия «Продвижение по электронной почте».

## <a name="export-the-refined-web-events"></a>Экспорт уточненных веб-событий 

После определения уточненного события необходимо настроить экспорт данных события в Azure Data Lake Storage, который можно задать как источник данных для приема в аналитику аудитория. Экспорт происходит постоянно, поскольку события исходят из веб-свойства.

Дополнительные сведения см. в разделе [Экспорт событий](../engagement-insights/export-events.md).

## <a name="ingest-event-data-to-audience-insights"></a>Передача данных о событиях в аналитику аудитории

Теперь, когда вы определили уточненное событие и настроили его экспорт, мы переходим к загрузке данных в аналитику аудитории. Вам необходимо создать новый источник данных на основе папки Common Data Model. Введите сведения об учетной записи хранения, в которую вы экспортируете события. В файле *default.cdm.json* выберите уточненное событие для передачи и создайте сущность в аналитике аудитории.

Для получения дополнительной информации см. [Подключение к папке Common Data Model с помощью учетной записи Azure Data Lake](connect-common-data-model.md).


## <a name="relate-refined-event-data-as-an-activity-of-a-customer-profile"></a>Свяжите уточненные данные о событиях с действием профиля клиента

После завершения приема сущности вы можете настроить действие для профиля клиента.

Дополнительные сведения см. в статье [Действия клиента](activities.md).

:::image type="content" source="media/web-event-activity.png" alt-text="Страница действий с развернутой панелью редактирования действий и заполненными полями.":::

Настройте новое действие со следующим сопоставлением: 

- **Первичный ключ**: Signal.Export.Id, уникальный идентификатор, доступный для каждой записи события в аналитике взаимодействия. Это свойство создается автоматически.

- **Метка времени**: Signal.Timestamp в свойстве события.

- **Событие**: Signal.Name, название события, которое вы хотите отслеживать.

- **Веб-адрес**: Signal.View.Uri ссылается на URI страницы, создавшей событие.

- **Подробности**: Signal.Action.Name для представления информации, связанной с событием. Выбранное свойство в этом случае указывает, что событие предназначено для продвижения по электронной почте.

- **Тип действия**: в этом примере мы выбираем существующий тип действия WebLog. Этот выбор является полезным параметром фильтра для запуска моделей прогноза или создания сегментов на основе этого типа действий.

- **Установить отношение**: этот важный параметр связывает действие с существующими профилями клиентов. **Signal.User.Id** — это идентификатор, настроенный в SDK для сбора и связанный с идентификатором пользователя в других источниках данных, настроенных в аналитике аудитории. В этом примере мы настраиваем связь между Signal.User.Id и RetailCustomers: CustomerRetailId, который является первичным ключом, который был идентифицирован на этапе сопоставления в процессе объединения данных.

После обработки действий вы можете просмотреть записи о клиентах и открыть карточку клиента, чтобы увидеть действия из аналитики взаимодействия на временной шкале. 

> [!TIP]
> Чтобы найти идентификатор клиента, у которого есть аналитика взаимодействия, перейдите на страницу **Сущности** и предварительно просмотрите данные для сущности UnifiedActivity. ActivityTypeDisplay = WebLog содержит действия аналитики взаимодействия, настроенное в приведенном выше примере. Скопируйте идентификатор клиента для одной из этих записей и для этого идентификатора на странице **Клиенты**.

## <a name="next-steps"></a>Дальнейшие действия

Теперь вы можете создать [сегменты](segments.md), [меры](measures.md) и [прогнозы](predictions.md), чтобы установить значимую связь со своими клиентами.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
