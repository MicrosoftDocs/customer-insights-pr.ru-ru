---
title: Подключение данных Common Data Model к учетной записи Azure Data Lake
description: Работа с данными Common Data Model с помощью Azure Data Lake Storage.
ms.date: 05/29/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: how-to
author: adkuppa
ms.author: adkuppa
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 49bab0605197912cd4b81ff193b914599a092792
ms.sourcegitcommit: dab2cbf818fafc9436e685376df94c5e44e4b144
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/13/2021
ms.locfileid: "6554910"
---
# <a name="connect-to-a-common-data-model-folder-using-an-azure-data-lake-account"></a>Подключение к папке Common Data Model с помощью учетной записи Azure Data Lake

В этой статье содержится информация о том, как принимать данные из папки Common Data Model с помощью вашей учетной записи Azure Data Lake Storage Gen2.

## <a name="important-considerations"></a>Важные замечания

- Данные в Azure Data Lake должны соответствовать стандарту Common Data Model. Другие форматы в настоящее время не поддерживаются.

- Прием данных поддерживает исключительно учетные записи хранения Azure Data Lake *Gen2*. Вы не можете использовать учетные записи хранения Azure Data Lake Gen1 для приема данных.

- Чтобы пройти аутентификацию с помощью субъекта-службы Azure, убедитесь, что она настроена в вашем клиенте. Для получения дополнительной информации см. [Подключение аналитики аудитории к учетной записи Azure Data Lake Storage Gen2 с помощью субъекта-службы Azure](connect-service-principal.md).

- Azure Data Lake, которое вы хотите подключить и из которого нужно принимать данные, должно находиться в том же регионе Azure, что и среда Dynamics 365 Customer Insights. Подключения к папке Common Data Model из озера данных в другом регионе Azure не поддерживаются. Чтобы узнать регион Azure среды, перейдите **Администрирование** > **Система** > **О системе** в аналитике аудитории.

- Данные, хранящиеся в веб-службах, могут храниться в другом месте, отличном от того, где данные обрабатываются или хранятся в Dynamics 365 Customer Insights. Импортируя данные или подключаясь к данным, хранящимся в онлайн-сервисах, вы соглашаетесь с тем, что данные могут быть переданы и сохранены в Dynamics 365 Customer Insights.  [Подробнее см. в центре обеспечения безопасности Microsoft.](https://www.microsoft.com/trust-center)

## <a name="connect-to-a-common-data-model-folder"></a>Подключение к папке Common Data Model

1. В аналитике аудитории перейдите **Данные** > **Источники данных**.

1. Выберите **Добавить источник данных**.

1. Выберите **Подключиться к папке Common Data Model**, введите **Имя** для источника данных и выберите **Далее**. Рекомендации по названию: 
   - Начните с буквы.
   - Используйте только буквы и цифры. Использовать специальные символы и пробелы не разрешается.
   - Используйте от 3 до 64 символов.

1. Вы можете выбрать между использованием варианта на основе ресурсов и варианта на основе подписки для аутентификации. Для получения дополнительной информации см. [Подключение аналитики аудитории к учетной записи Azure Data Lake Storage Gen2 с помощью субъекта-службы Azure](connect-service-principal.md). Введите сведения **Контейнер** и выберите **Далее**.
   > [!div class="mx-imgBorder"]
   > ![Диалоговое окно для ввода сведений о новом подключении для Azure Data Lake.](media/enter-new-storage-details.png)
   > [!NOTE]
   > Для подключения и создания источника данных вам потребуется одна из следующих ролей либо для контейнера, либо для учетной записи хранения, упомянутой выше:
   >  - Средство чтения данных хранилища BLOB-объектов
   >  - Владелец данных хранилища BLOB-объектов
   >  - Участник данных хранилища BLOB-объектов

1. В диалоговом окне **Выбор папки Common Data Model** выберите файл model.json или manifest.json, из которого нужно импортировать данные, и выберите **Далее**.
   > [!NOTE]
   > Любой файл model.json или manifest.json, связанный с другим источником данных в среде, не будет отображаться в списке.

1. Вы получите список доступных сущностей в выбранном файле model.json или manifest.json. Вы можете просмотреть и выбрать из списка доступных сущностей и выбрать **Сохранить**. Все выбранные сущности будут загружены из нового источника данных.
   > [!div class="mx-imgBorder"]
   > ![Диалоговое окно со списком сущностей из файла model.json.](media/review-entities.png)

8. Укажите, для каких сущностей вы хотите включить профилирование данных и выберите **Сохранить**. Профилирование данных включает аналитику и другие возможности. Вы можете выбрать всю сущность, которая выбирает все атрибуты из сущности, или выбрать определенные атрибуты по своему выбору. По умолчанию ни одна сущность не включена для профилирования данных.
   > [!div class="mx-imgBorder"]
   > ![Диалоговое окно с профилированием данных.](media/dataprofiling-entities.png)

9. После сохранения вашего выбора открывается страница **Источники данных**. Теперь вы должны увидеть соединение с папкой Common Data Model как с источником данных.

> [!NOTE]
> Файл model.json или manifest.json может быть связан только с одним источником данных в той же среде. Однако один и тот же файл model.json или manifest.json можно использовать для источников данных в нескольких средах.

## <a name="edit-a-common-data-model-folder-data-source"></a>Изменение источника данных папки Common Data Model

Вы можете обновить ключ доступа для учетной записи хранения, содержащей папку Common Data Model. Вы также можете изменить файл model.json или manifest.json. Чтобы подключиться к другому контейнеру из своей учетной записи хранилища или изменить имя учетной записи, [создайте новое соединение источника данных](#connect-to-a-common-data-model-folder).

1. В аналитике аудитории перейдите **Данные** > **Источники данных**.

2. Рядом с источником данных, который вы хотите обновить, выберите многоточие.

3. Выберите вариант **Изменить** из списка.

4. При желании обновите **Ключ доступа** и выберите **Далее**.

   ![Диалог для редактирования и обновления ключа доступа для существующего источника данных.](media/edit-access-key.png)

5. При желании вы можете выполнить обновление из подключения ключа учетной записи на подключение на основе ресурса или подписки. Для получения дополнительной информации см. [Подключение аналитики аудитории к учетной записи Azure Data Lake Storage Gen2 с помощью субъекта-службы Azure](connect-service-principal.md). Невозможно изменить сведения **Контейнер** при обновлении соединения.
   > [!div class="mx-imgBorder"]

   > ![Диалоговое окно для ввода сведений о подключении Azure Data Lake к существующей учетной записи хранения.](media/enter-existing-storage-details.png)

   > [!NOTE]
   > Для подключения и создания источника данных вам потребуется одна из следующих ролей либо для контейнера, либо для учетной записи хранения, упомянутой выше:
   >  - Средство чтения данных хранилища BLOB-объектов
   >  - Владелец данных хранилища BLOB-объектов
   >  - Участник данных хранилища BLOB-объектов


6. При желании выберите другой файл model.json или manifest.json с другим набором сущностей из контейнера.

7. При желании вы можете выбрать дополнительные сущности для приема. Вы также можете удалить любые уже выбранные сущности, если нет никаких зависимостей.

   > [!IMPORTANT]
   > Если существуют зависимости от существующего файла model.json или manifest.json и набора сущностей, вы увидите сообщение об ошибке и не сможете выбрать другой файл model.json или manifest.json. Удалите эти зависимости перед изменением файла model.json или manifest.json или создайте новый источник данных с файлом model.json или manifest.json, который вы хотите использовать, чтобы избежать удаления зависимостей.

8. При желании вы можете выбрать дополнительные атрибуты или сущности, чтобы включить профилирование данных или отключить уже выбранные.   


[!INCLUDE[footer-include](../includes/footer-banner.md)]