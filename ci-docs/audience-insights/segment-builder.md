---
title: Создание сегментов с помощью конструктора сегментов
description: Создайте сегменты клиентов, чтобы сгруппировать их на основе различных атрибутов.
ms.date: 09/07/2021
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 7f7bd0e7e581305836287bd503ef273a2d556bff
ms.sourcegitcommit: fecdee73e26816c42d39d160d4d5cfb6c8a91596
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2021
ms.locfileid: "7494518"
---
# <a name="create-segments"></a>Создать сегменты

Определите сложные фильтры вокруг единой сущности клиента и связанных с ней сущностей. Каждый сегмент после обработки создает набор записей о клиентах, которые можно экспортировать и выполнять действия с ними. Сегменты управляются на странице **Сегменты**. Вы можете [создавать новые сегменты](#create-a-new-segment) с помощью [конструктора сегментов](#segment-builder) или [создавать быстрые сегменты](#quick-segments) из других областей приложения.

## <a name="segment-builder"></a>Конструктор сегментов

На следующем рисунке показаны различные аспекты конструктора сегментов. Он показывает сегмент, который в результате дает группу клиентов. Клиенты заказали товары в определенном интервале времени и набрали определенное количество бонусных баллов или потратили определенную сумму денег. 

:::image type="content" source="media/segment-builder-overview.png" alt-text="Элементы конструктора сегментов." lightbox="media/segment-builder-overview.png":::

1 - Организуйте свой сегмент с помощью правил и подправил. Каждое правило или субправило состоит из условий. Комбинируйте условия с логическими операторами

2 - Выберите [путь отношений](relationships.md) между сущностями, который применяется к правилу. Путь отношения определяет, какие атрибуты могут использоваться в условии.

3 - Управление правилами и субправилами. Измените положение правила или удалите его.

4 - Добавьте условия и создайте правильный уровень вложенности с помощью подправил.

5 - Применение операций задания к связанным правилам.

6 - Используйте панель атрибутов, чтобы добавить доступные атрибуты сущности или создать условия на основе атрибутов. На панели отображается список сущностей и атрибутов, доступных для выбранного правила на основе выбранного пути отношения.

7 - Добавьте условия на основе атрибутов к существующим правилам и субправилам или добавьте их в новое правило.

8 - Отмена и повторение изменений при построении сегмента.

Приведенный выше пример иллюстрирует возможность сегментации. Мы определили сегмент для клиентов, которые купили в Интернете товаров не менее чем на 500 долларов США *и* проявляют интерес к разработке программного обеспечения.

## <a name="create-a-new-segment"></a>Создание нового сегмента

Существуют несколько способов создания нового сегмента. В этом разделе описывается, как создать собственный сегмент с нуля. Вы также можете создать *быстрый сегмент* на основе существующих сущностей или использовать модели машинного обучения, чтобы получить *предлагаемые сегменты*. Подробнее: [Обзор сегментов](segments.md).

Создавая сегмент, вы можете сохранить черновик. Он будет сохранен как неактивный сегмент и не может быть активирован, пока не будет завершен с допустимой конфигурацией.

1. Перейдите на страницу **Сегменты**.

1. Выберите **Создать** > **Создать собственные**.

1. На странице конструктора сегментов вы определяете первое правило. Правило состоит из одного или нескольких условий и определяет набор клиентов.

1. В разделе **Правило1** выберите атрибут сущности, по которому вы хотите фильтровать клиентов. Имеется два способа выбора атрибутов: 
   - Просмотрите список доступных сущностей и атрибутов на панели **Добавить в правило** и выберите значок **+** рядом с атрибутом, который нужно добавить. Выберите, хотите ли вы добавить атрибут к существующему правилу или использовать его для создания нового правила.
   - Введите имя атрибута в разделе правил, чтобы увидеть подходящие предложения.

1. Выберите операторы, чтобы указать совпадающие значения условия. Атрибут может иметь в качестве значения один из четырех типов данных: числовой, строковый, дата или логический. В зависимости от типа данных атрибута для указания условия доступны разные операторы. 

1. Выберите **Добавить условие**, чтобы добавить в правило дополнительные условия. Чтобы создать правило под текущим правилом, выберите **Добавить пункт правила**.

1. Если в правиле используются другие сущности, кроме сущности *Клиент*, вы должны установить путь отношения. Путь отношений необходим для сообщения системе, через какие отношения вы хотите получить доступ к единой сущности клиента. Выберите **Настройка пути к отношениям** для сопоставления выбранной сущности с объединенной сущностью клиента. Если существует только один возможный путь отношения, система выберет его автоматически. Различные пути отношений могут дать разные результаты. У каждого правила может быть свой собственный путь отношений.

   :::image type="content" source="media/relationship-path.png" alt-text="Потенциальный путь отношений при создании правила на основе сущности, сопоставленной с объединенной сущностью клиента.":::

   Например, сущность *eCommerce_eCommercePurchases* на снимке экрана имеет четыре варианта сопоставления с сущностью *Клиент*: 
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > Клиент
   - eCommerce_eCommercePurchases > Клиент
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > Клиент
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > loyaltyScheme_loyCustomers > Клиент При выборе последнего варианта вы можете включить атрибуты из всех перечисленных сущностей в условия правила. Скорее всего, мы получим меньше результатов, потому что соответствующие записи о клиентах должны быть частью всех сущностей. В этом примере они приобрели товары через канал электронной торговли (*eCommerce_eCommercePurchases*), в POS (*POS_posPurchases*) и участвовуют в нашей программе лояльности (*loyaltyScheme_loyCustomers*). При выборе второго варианта мы можем выбирать только атрибуты из сущности *eCommerce_eCommercePurchases* и *Клиент*. Это, вероятно, приведет к получению большего количества профилей клиентов.

1. Если у вас есть несколько условий в правиле, вы можете выбрать, какой логический оператор их связывает.

   - Оператор **И**: должны быть соблюдены все условия для включения записи в сегмент. Эта опция наиболее полезна, когда вы определяете условия для разных сущностей.

   - Оператор **ИЛИ**: должно быть соблюдено одно из условий для включения записи в сегмент. Эта опция наиболее полезна, когда вы определяете несколько условий для одной сущности.

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="Правило с двумя условиями «И».":::

   При использовании оператора ИЛИ все условия должны основываться на сущностях, включенных в путь отношений.

   1. Вы можете создать несколько правил для создания разных наборов записей о клиентах. Вы можете объединять группы, чтобы включать клиентов, необходимых для вашего бизнес-случая. Чтобы создать новое правило, выберите **Добавить правило**. В частности, если вы не можете включить сущность в правило из-за указанного пути отношений, вам необходимо создать новое правило, чтобы выбрать из него атрибуты.

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="Добавьте новое правило в сегмент и выберите оператор набора.":::

   1. Выберите один из операторов набора: **Объединение**, **Пересечение** или **Исключение**.

   - **Объединение** объединяет две группы.

   - **Пересечение** перекрывает две группы. Только данные, которые *общие* в обеих группах, сохраняются в унифицированной группе.

   - **За исключением** объединяет две группы. Только данные в группе "А", которые *не общие* для данных в группе "Б", сохраняются.

1. По умолчанию сегменты генерируют выходную сущность, содержащую все атрибуты профилей клиентов, которые соответствуют определенным фильтрам. Если сегмент основан на других сущностях, кроме сущности *Клиент*, вы можете добавить дополнительные атрибуты из этих сущностей в выходную сущность. Укажите **Атрибуты проекта** для выбора атрибутов, которые будут добавлены к выходной сущности.  

   :::image type="content" source="media/segments-project-attributes.png" alt-text="Пример проецируемых атрибутов, выбранных на боковой панели для добавления к выходной сущности.":::
  
   Пример: сегмент основан на сущности, которая содержит данные о покупках, которые связаны с сущностью *Клиент*. Сегмент ищет всех клиентов из Испании, которые приобрели товары в текущем году. Вы можете добавить такие атрибуты, как цена товаров или дата покупки, ко всем совпадающим записям клиентов в выходной сущности. Эта информация может быть полезна для анализа сезонных корреляций общих расходов.

   > [!NOTE]
   > - Проецированные атрибуты работают только для сущностей, которые имеют отношение "один ко многим" с сущностью клиента. Например, у одного клиента может быть несколько подписок.
   > - Вы можете проецировать атрибуты только из сущности, которая используется в каждом правиле сегментного запроса, который вы создаете.
   > - Спроецированные атрибуты учитываются при использовании операторов множества.

1. Перед сохранением и запуском сегмента выберите **Изменить сведения** рядом с названием сегмента. Укажите название для своего сегмента и обновите предложенное **Имя выходной сущности** для сегмента. Вы также можете добавить описание к сегменту.

1. Выберите **Выполнить** для сохранения и обработки вашего сегмента, если все требования подтверждены. В противном случае он будет сохранен как черновик неактивного сегмента.

1. Выберите **Назад к сегментам**, чтобы вернуться к странице **Сегменты**.

> [!TIP]
> - Конструктор сегментов не будет предлагать допустимые значения из сущностей при установке операторов для условий. Вы можете перейти в раздел **Данные** > **Сущности** и загрузить данные сущности, чтобы увидеть, какие значения доступны.
> - Условия, основанные на датах, позволяют переключаться между фиксированными датами и плавающим диапазоном дат.
> - Если у вас есть несколько правил для вашего сегмента, вы увидите синюю полосу вокруг правила, которое вы редактируете.
> - Вы можете перемещать правила и условия в другие места в определении сегмента. Выберите [...] рядом с правилом или условием и выберите, как и куда его переместить.
> - Элементы управления **Отменить** и **Повторить** на панели команд позволяют откатить изменения.

## <a name="quick-segments"></a>Быстрые сегменты

Быстрые сегменты позволяют быстро создавать простые сегменты с помощью одного оператора для более быстрого анализа.

1. На странице **Сегменты** выберите **Создать** > **Создать из**.

   - Выберите параметр **Профили** для построения сегмента на основе сущности *единого клиента*.
   - Выберите параметр **Меры**, чтобы построить сегмент вокруг ранее созданных мер.
   - Выберите параметр **Аналитика**, чтобы построить сегмент вокруг одной из выходных сущностей, которые вы сгенерировали, используя возможности **Прогнозы** или **Пользовательские модели**.

2. В диалоговом окне **Создать быстрый сегмент** выберите атрибут из раскрывающегося списка **Поле**.

3. Система предоставит больше аналитики, которая поможет вам создать лучшие сегменты ваших клиентов.
   - Для категориальных полей мы покажем количество 10 лучших клиентов. Выберите **Значение** и выберите **Проверить**.

   - Для числового атрибута система покажет, какое значение атрибута попадает под процентиль каждого клиента. Выберите **Оператор** и **Значение**, затем выберите **Проверить**.

4. Система предоставит вам **Расчетный размер сегмента**. Вы можете выбрать, создавать ли определенный вами сегмент или сначала вернуться к нему, чтобы получить другой размер сегмента.

    > [!div class="mx-imgBorder"]
    > ![Название и оценка для быстрого сегмента.](media/quick-segment-name.png "Название и оценка для быстрого сегмента")

5. Задайте **Имя** для сегмента. Если требуется, укажите **Отображаемое имя**.

6. Нажмите **Сохранить**, чтобы создать сегмент.

7. После того как обработка сегмента завершена, вы можете просмотреть его, как и любой другой созданный вами сегмент.

## <a name="next-steps"></a>Дальнейшие действия

[Экспортируйте сегмент](export-destinations.md) и исследуйте [интеграцию карточки клиента](customer-card-add-in.md), чтобы использовать сегменты в других приложениях.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
