---
title: Соответствие сущностей для унификации данных
description: Найдите совпадения сущностей для создания унифицированных профилей клиентов.
ms.date: 10/14/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: mhart
ms.reviewer: adkuppa
manager: shellyha
ms.openlocfilehash: 05afd17b7f1b34f7f24a8fa8cb2dc32c1649d40f
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2021
ms.locfileid: "5267494"
---
# <a name="match-entities"></a><span data-ttu-id="4c072-103">Поиск совпадений сущностей</span><span class="sxs-lookup"><span data-stu-id="4c072-103">Match entities</span></span>

<span data-ttu-id="4c072-104">После завершения этапа сопоставления вы готовы к поиску соответствий в ваших объектах.</span><span class="sxs-lookup"><span data-stu-id="4c072-104">After completing the map phase, you're ready to match your entities.</span></span> <span data-ttu-id="4c072-105">На этапе соответствия указывается, как объединить наборы данных в единый набор данных профиля клиента.</span><span class="sxs-lookup"><span data-stu-id="4c072-105">The match phase specifies how to combine your datasets into a unified customer profile dataset.</span></span> <span data-ttu-id="4c072-106">Фаза соответствия требует по крайней мере [двух сопоставленных сущностей](map-entities.md).</span><span class="sxs-lookup"><span data-stu-id="4c072-106">The match phase requires at least [two mapped entities](map-entities.md).</span></span>

## <a name="specify-the-match-order"></a><span data-ttu-id="4c072-107">Задание порядка установления соответствия</span><span class="sxs-lookup"><span data-stu-id="4c072-107">Specify the match order</span></span>

<span data-ttu-id="4c072-108">Перейдите **Данные** > **Объединить** > **Соответствие** и выберите **Задать порядок**, чтобы начать фазу соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-108">Go to **Data** > **Unify** > **Match** and select **Set order** to start the match phase.</span></span>

<span data-ttu-id="4c072-109">Каждое соответствие объединяет две или более сущностей в одну сущность, сохраняя при этом каждую уникальную запись клиента.</span><span class="sxs-lookup"><span data-stu-id="4c072-109">Each match unifies two or more entities into a single entity, while persisting each unique customer record.</span></span> <span data-ttu-id="4c072-110">В следующем примере мы выбрали три сущности: **ContactCSV: TestData** как **Основная** сущность, **WebAccountCSV: TestData** как **Сущность 2** и **CallRecordSmall: TestData** как **Сущность 3**.</span><span class="sxs-lookup"><span data-stu-id="4c072-110">In the following example, we selected three entities: **ContactCSV: TestData** as the **Primary** entity, **WebAccountCSV: TestData** as **Entity 2**, and **CallRecordSmall: TestData** as **Entity 3**.</span></span> <span data-ttu-id="4c072-111">Диаграмма над сделанным выбором иллюстрирует, как будет выполняться порядок соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-111">The diagram above the selections illustrates how the match order will be executed.</span></span>

> [!div class="mx-imgBorder"]
> <span data-ttu-id="4c072-112">![Изменение порядка поиска соответствия данных](media/configure-data-match-order-edit-page.png "Изменение порядка поиска соответствия данных")</span><span class="sxs-lookup"><span data-stu-id="4c072-112">![Edit the data match order](media/configure-data-match-order-edit-page.png "Edit the data match order")</span></span>
  
<span data-ttu-id="4c072-113">Сущность **Основная** сопоставляется с сущностью **Сущность 2**.</span><span class="sxs-lookup"><span data-stu-id="4c072-113">The **Primary** entity is matched with **Entity 2**.</span></span> <span data-ttu-id="4c072-114">Набор данных, получившийся после первого поиска соответствий, сопоставляется с **Сущность 3**.</span><span class="sxs-lookup"><span data-stu-id="4c072-114">The dataset that results from the first match is matched with **Entity 3**.</span></span>
<span data-ttu-id="4c072-115">В этом примере мы выбрали только два соответствия, но система может поддерживать больше.</span><span class="sxs-lookup"><span data-stu-id="4c072-115">In this example, we only selected two matches, but the system can support more.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4c072-116">Сущность, которую вы выбираете в качестве **Основной** сущности будет служить основой для вашего единого набора данных.</span><span class="sxs-lookup"><span data-stu-id="4c072-116">The entity that you choose as your **Primary** entity will serve as the basis for your unified master dataset.</span></span> <span data-ttu-id="4c072-117">К этому объекту будут добавлены дополнительные объекты, выбранные на этапе соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-117">Additional entities that are selected during the match phase will be added to this entity.</span></span> <span data-ttu-id="4c072-118">В то же время это не означает, что единая сущность будет включать в себя *все* данные, включенные в эту сущность.</span><span class="sxs-lookup"><span data-stu-id="4c072-118">At the same time, this doesn't mean that the unified entity will include *all* of the data included in this entity.</span></span>
>
> <span data-ttu-id="4c072-119">Есть два соображения, которые могут помочь вам выбрать иерархию ваших сущностей:</span><span class="sxs-lookup"><span data-stu-id="4c072-119">There are two considerations that can help you choose the hierarchy of your entities:</span></span>
>
> - <span data-ttu-id="4c072-120">Какую сущность вы считаете содержащей наиболее полные и надежные данные о ваших клиентах?</span><span class="sxs-lookup"><span data-stu-id="4c072-120">What entity do you consider having the most complete and reliable data about your customers?</span></span>
> - <span data-ttu-id="4c072-121">Есть ли у только что идентифицированной сущности атрибуты, которыми также используются другими сущностями (например, имя, номер телефона или адрес электронной почты)?</span><span class="sxs-lookup"><span data-stu-id="4c072-121">Does the entity that you just identified have attributes that are also shared by other entities (for example, name, phone number, or email address)?</span></span> <span data-ttu-id="4c072-122">Если нет, выберите вторую наиболее надежную сущность.</span><span class="sxs-lookup"><span data-stu-id="4c072-122">If not, choose your second most reliable entity.</span></span>

<span data-ttu-id="4c072-123">Выберите **Готово**, чтобы сохранить ваш порядок поиска соответствий.</span><span class="sxs-lookup"><span data-stu-id="4c072-123">Select **Done** to save your match order.</span></span>

## <a name="define-rules-for-your-first-match-pair"></a><span data-ttu-id="4c072-124">Определение правил для первой пары соответствий</span><span class="sxs-lookup"><span data-stu-id="4c072-124">Define rules for your first match pair</span></span>

<span data-ttu-id="4c072-125">После задания порядка поиска соответствий вы увидите определенные соответствия на странице **Соответствие**.</span><span class="sxs-lookup"><span data-stu-id="4c072-125">After specifying the match order, you'll see the defined matches on the **Match** page.</span></span> <span data-ttu-id="4c072-126">Плитки в верхней части экрана будут пустыми до тех пор, пока вы не запустите порядок поиска соответствий.</span><span class="sxs-lookup"><span data-stu-id="4c072-126">The tiles at the top of the screen will be empty until you run your match order.</span></span>

> [!div class="mx-imgBorder"]
> <span data-ttu-id="4c072-127">![Определение правил](media/configure-data-match-need-rules.png "Определение правил")</span><span class="sxs-lookup"><span data-stu-id="4c072-127">![Define rules](media/configure-data-match-need-rules.png "Define rules")</span></span>

<span data-ttu-id="4c072-128">Предупреждение **Требуются правила** предполагает, что для пары соответствий не определено правило соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-128">The **Needs Rules** warning suggests that no match rule is defined for a match pair.</span></span> <span data-ttu-id="4c072-129">Правила соответствия определяют логику, по которой будет производиться поиск соответствий в определенной паре сущностей.</span><span class="sxs-lookup"><span data-stu-id="4c072-129">Match rules specify the logic by which a specific pair of entities will be matched.</span></span>

1. <span data-ttu-id="4c072-130">Чтобы определить первое правило, откройте панель **Определение правил**, выбрав соответствующую строку соответствия в таблице соответствий (1), затем выберите **Создать новое правило** (2).</span><span class="sxs-lookup"><span data-stu-id="4c072-130">To define your first rule, open the **Rule Definition** pane by selecting the corresponding match row in the matches table (1) and then selecting **Create new rule** (2).</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="4c072-131">![Создать новое правило](media/configure-data-match-new-rule2.png "Создать новое правило")</span><span class="sxs-lookup"><span data-stu-id="4c072-131">![Create new rule](media/configure-data-match-new-rule2.png "Create new rule")</span></span>

2. <span data-ttu-id="4c072-132">На панели **Изменить правило** настройте условия для этого правила.</span><span class="sxs-lookup"><span data-stu-id="4c072-132">In the **Edit Rule** pane, configure the conditions for that rule.</span></span> <span data-ttu-id="4c072-133">Каждое условие представлено двумя строками, которые включают обязательный выбор.</span><span class="sxs-lookup"><span data-stu-id="4c072-133">Each condition is represented by two rows that include mandatory selections.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="4c072-134">![Панель создания правила](media/configure-data-match-new-rule-condition.png "Панель создания правила")</span><span class="sxs-lookup"><span data-stu-id="4c072-134">![New rule pane](media/configure-data-match-new-rule-condition.png "New rule pane")</span></span>

   <span data-ttu-id="4c072-135">Сущность/Поле (первый) — атрибут, который будет использоваться для поиска соответствий для первой пары сущностей.</span><span class="sxs-lookup"><span data-stu-id="4c072-135">Entity/Field (first) - An attribute that will be used for matching from the first match pair entity.</span></span> <span data-ttu-id="4c072-136">Примеры могут включать номер телефона или адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="4c072-136">Examples could include a phone number or email address.</span></span> <span data-ttu-id="4c072-137">Выберите атрибут, который может быть уникальным для клиента.</span><span class="sxs-lookup"><span data-stu-id="4c072-137">Choose an attribute that is likely to be unique to the customer.</span></span>

   > [!TIP]
   > <span data-ttu-id="4c072-138">Избегайте поиска соответствий на основе атрибутов типа действий.</span><span class="sxs-lookup"><span data-stu-id="4c072-138">Avoid matching on the basis of activity-type attributes.</span></span> <span data-ttu-id="4c072-139">Другими словами, если атрибут кажется действием, то это может быть плохим критерием для поиска соответствий.</span><span class="sxs-lookup"><span data-stu-id="4c072-139">In other words, if an attribute seems to be an activity, then it might be a poor criteria to match by.</span></span>  

   <span data-ttu-id="4c072-140">Сущность/Поле (второй) — атрибут, который будет использоваться для поиска соответствий для второй пары сущностей.</span><span class="sxs-lookup"><span data-stu-id="4c072-140">Entity/Field (Second) - An attribute that will be used for matching from the second match pair entity.</span></span>

   <span data-ttu-id="4c072-141">Нормализовать — **Метод нормализации**: различные варианты нормализации доступны для выбранных атрибутов.</span><span class="sxs-lookup"><span data-stu-id="4c072-141">Normalize - **Normalization method**: Various normalization options are available for the selected attributes.</span></span> <span data-ttu-id="4c072-142">Например, удаление знаков препинания или удаление пробелов</span><span class="sxs-lookup"><span data-stu-id="4c072-142">For example, removing punctuation or removing spaces</span></span>

   <span data-ttu-id="4c072-143">Для нормализации имени организации (предварительная версия) можно также выбрать **Тип (телефон, имя, организация)**</span><span class="sxs-lookup"><span data-stu-id="4c072-143">For Organization name normalization (Preview), you can also select **Type (Phone, Name, Organization)**</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="4c072-144">![Нормализация-B2B](media/match-normalization-b2b.png "Нормализация-B2B")</span><span class="sxs-lookup"><span data-stu-id="4c072-144">![Normalization-B2B](media/match-normalization-b2b.png "Normalization-B2B")</span></span>

   <span data-ttu-id="4c072-145">Уровень точности — уровень точности, который будет использоваться для этого условия.</span><span class="sxs-lookup"><span data-stu-id="4c072-145">Precision level - The level of precision that will be used for this condition.</span></span> <span data-ttu-id="4c072-146">Установка уровня точности для условия соответствия может иметь два типа: **Базовый** и **Пользовательский**.</span><span class="sxs-lookup"><span data-stu-id="4c072-146">Setting a precision level for a match condition can have two types: **Basic** and **Custom**.</span></span>  
   - <span data-ttu-id="4c072-147">Базовый: предоставляет четыре варианта на выбор: низкий, средний, высокий и точный.</span><span class="sxs-lookup"><span data-stu-id="4c072-147">Basic: Provides you with four options to select from: Low, Medium, High, and Exact.</span></span> <span data-ttu-id="4c072-148">Выберите **Точный**, чтобы сопоставлять только те записи, которые совпадают на 100%.</span><span class="sxs-lookup"><span data-stu-id="4c072-148">Select **Exact** to only match records that that match 100 percent.</span></span> <span data-ttu-id="4c072-149">Выберите один из других уровней, чтобы сопоставить записи, которые не идентичны на 100 процентов.</span><span class="sxs-lookup"><span data-stu-id="4c072-149">Select one of the other levels to match records that aren't 100 percent identical.</span></span>
   - <span data-ttu-id="4c072-150">Пользовательский: используйте ползунок, чтобы определить пользовательский процент, которому должны соответствовать записи, или введите значение в поле **Пользовательский**.</span><span class="sxs-lookup"><span data-stu-id="4c072-150">Custom: Use the slider to define the custom percentage that records need to match or enter a value in the **Custom** field.</span></span> <span data-ttu-id="4c072-151">Система будет сопоставлять только записи, превышающие этот порог, как обогащенные совпадающие пары.</span><span class="sxs-lookup"><span data-stu-id="4c072-151">The system will only match records passing this threshold as conflated match pairs.</span></span> <span data-ttu-id="4c072-152">Значения на ползунке находятся в диапазоне от 0 до 1.</span><span class="sxs-lookup"><span data-stu-id="4c072-152">Values on the slider are between 0 and 1.</span></span> <span data-ttu-id="4c072-153">Таким образом, 0,64 представляет 64 процента.</span><span class="sxs-lookup"><span data-stu-id="4c072-153">So 0.64 represents 64 percent.</span></span>

3. <span data-ttu-id="4c072-154">Выберите **Готово**, чтобы сохранить правило.</span><span class="sxs-lookup"><span data-stu-id="4c072-154">Select **Done** to save the rule.</span></span>

### <a name="add-multiple-conditions"></a><span data-ttu-id="4c072-155">Добавление нескольких условий</span><span class="sxs-lookup"><span data-stu-id="4c072-155">Add multiple conditions</span></span>

<span data-ttu-id="4c072-156">Чтобы сопоставлять ваши сущности, только если выполняется несколько условий, добавьте больше условий, связанных через оператор AND (И).</span><span class="sxs-lookup"><span data-stu-id="4c072-156">To match your entities only if multiple conditions are met, add more conditions that are linked through an AND operator.</span></span>

1. <span data-ttu-id="4c072-157">На панели **Изменить правило** выберите **Добавить условие**.</span><span class="sxs-lookup"><span data-stu-id="4c072-157">In the **Edit rule** pane, select **Add condition**.</span></span> <span data-ttu-id="4c072-158">Вы также можете удалить условия, нажав кнопку "Удалить" рядом с существующим условием.</span><span class="sxs-lookup"><span data-stu-id="4c072-158">You can also delete conditions by selecting the remove button next to an existing condition.</span></span>

2. <span data-ttu-id="4c072-159">Выберите **Готово**, чтобы сохранить правило.</span><span class="sxs-lookup"><span data-stu-id="4c072-159">Select **Done** so save the rule.</span></span>

## <a name="add-multiple-rules"></a><span data-ttu-id="4c072-160">Добавление нескольких правил</span><span class="sxs-lookup"><span data-stu-id="4c072-160">Add multiple rules</span></span>

<span data-ttu-id="4c072-161">Каждое условие применяется к одной паре атрибутов, а правила представляют наборы условий.</span><span class="sxs-lookup"><span data-stu-id="4c072-161">Each condition applies to a single pair of attributes, while rules represent sets of conditions.</span></span> <span data-ttu-id="4c072-162">Чтобы поиск соответствия ваших сущностей проводился по разным наборам атрибутов, вы можете добавить больше правил.</span><span class="sxs-lookup"><span data-stu-id="4c072-162">To have your entities matched by different sets of attributes, you can add more rules.</span></span>

1. <span data-ttu-id="4c072-163">В аналитике аудитории перейдите **Данные** > **Унификация** > **Соответствие**.</span><span class="sxs-lookup"><span data-stu-id="4c072-163">In audience insights, go to **Data** > **Unify** > **Match**.</span></span>

2. <span data-ttu-id="4c072-164">Выберите сущность, которую требуется обновить, и выберите **Добавить правила**.</span><span class="sxs-lookup"><span data-stu-id="4c072-164">Select the entity you want to update and select **Add rules**.</span></span>

3. <span data-ttu-id="4c072-165">Следуйте процедуре, изложенной в разделе [Определение правил для первой пары соответствий](#define-rules-for-your-first-match-pair).</span><span class="sxs-lookup"><span data-stu-id="4c072-165">Follow the procedure as outlined in [Define rules for your first match pair](#define-rules-for-your-first-match-pair).</span></span>

> [!NOTE]
> <span data-ttu-id="4c072-166">Порядок правил имеет значение.</span><span class="sxs-lookup"><span data-stu-id="4c072-166">The rule order matters.</span></span> <span data-ttu-id="4c072-167">Алгоритм поиска соответствий пытается найти совпадение на основе вашего первого правила и переходит ко второму правилу, только если в первом правиле не было найдено совпадений.</span><span class="sxs-lookup"><span data-stu-id="4c072-167">The matching algorithm tries to match on the basis of your first rule and continues to the second rule only if no matches were identified under the first rule.</span></span>

## <a name="define-deduplication-on-a-match-entity"></a><span data-ttu-id="4c072-168">Определите дедупликацию для соответствующей сущности</span><span class="sxs-lookup"><span data-stu-id="4c072-168">Define deduplication on a match entity</span></span>

<span data-ttu-id="4c072-169">Наряду с указанием правил соответствия между сущностями, как описано в приведенных выше разделах, вы также можете указать правила дедупликации.</span><span class="sxs-lookup"><span data-stu-id="4c072-169">Along with specifying cross entity matching rules as outlined in the above sections, you can also specify deduplications rules.</span></span> <span data-ttu-id="4c072-170">*Дедупликация* — это процесс.</span><span class="sxs-lookup"><span data-stu-id="4c072-170">*Deduplication* is a process.</span></span> <span data-ttu-id="4c072-171">Он идентифицирует повторяющиеся записи, объединяет их в одну запись и связывает все исходные записи с этой объединенной записью с альтернативными идентификаторами объединенной записи.</span><span class="sxs-lookup"><span data-stu-id="4c072-171">It identifies duplicate records, merges them into one record, and links all the source records to this merged record with alternate IDs to the merged record.</span></span>

<span data-ttu-id="4c072-172">После идентификации дедуплицированной записи эта запись будет использоваться в процессе сопоставления между объектами.</span><span class="sxs-lookup"><span data-stu-id="4c072-172">After a deduplicated record is identified, that record will be used in the cross-entity matching process.</span></span> <span data-ttu-id="4c072-173">Дедупликация реализована на уровне сущности и может применяться ко всем сущностям, используемым в процессе соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-173">Deduplication is implemented at the entity level and can be applied to every entity used in the Match process.</span></span>

### <a name="add-deduplication-rules"></a><span data-ttu-id="4c072-174">Добавить правила дедупликации</span><span class="sxs-lookup"><span data-stu-id="4c072-174">Add deduplication rules</span></span>

1. <span data-ttu-id="4c072-175">В аналитике аудитории перейдите **Данные** > **Унификация** > **Соответствие**.</span><span class="sxs-lookup"><span data-stu-id="4c072-175">In audience insights, go to **Data** > **Unify** > **Match**.</span></span>

1. <span data-ttu-id="4c072-176">В разделе **Объединенные повторы** выберите **Задать сущности**.</span><span class="sxs-lookup"><span data-stu-id="4c072-176">In the **Merged duplicates** section, select **Set entities**.</span></span>

1. <span data-ttu-id="4c072-177">В разделе **Параметры объединения** выберите сущности, к которым вы хотите применить дедупликацию.</span><span class="sxs-lookup"><span data-stu-id="4c072-177">In the **Merge preferences** section, select the entities you want to apply deduplication to.</span></span>

1. <span data-ttu-id="4c072-178">Укажите, как объединить повторяющиеся записи, и выберите один из трех вариантов объединения:</span><span class="sxs-lookup"><span data-stu-id="4c072-178">Specify how to merge the duplicate records and choose one of three merge options:</span></span>
   - <span data-ttu-id="4c072-179">*Наиболее заполненные*: определяет запись с наиболее заполненными атрибутами как запись победителя.</span><span class="sxs-lookup"><span data-stu-id="4c072-179">*Most filled*: Identifies the record with most filled attributes as the winner record.</span></span> <span data-ttu-id="4c072-180">Это параметр объединения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="4c072-180">This is the default merge option.</span></span>
   - <span data-ttu-id="4c072-181">*Самые новые*: определяет запись победителя на основе "самая новая".</span><span class="sxs-lookup"><span data-stu-id="4c072-181">*Most recent*: Identifies the winner record based on the most recency.</span></span> <span data-ttu-id="4c072-182">Требуется дата или числовое поле для определения давности.</span><span class="sxs-lookup"><span data-stu-id="4c072-182">Requires a date or a numeric field to define the recency.</span></span>
   - <span data-ttu-id="4c072-183">*Наименее недавние*: определяет запись победителя на основе "наименее недавние".</span><span class="sxs-lookup"><span data-stu-id="4c072-183">*Least recent*: Identifies the winner record based on the least recency.</span></span> <span data-ttu-id="4c072-184">Требуется дата или числовое поле для определения давности.</span><span class="sxs-lookup"><span data-stu-id="4c072-184">Requires a date or a numeric field to define the recency.</span></span>
 
   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="4c072-185">![Правила дедупликации, шаг 1](media/match-selfconflation.png "Правила дедупликации, шаг 1")</span><span class="sxs-lookup"><span data-stu-id="4c072-185">![Deduplication rules step 1](media/match-selfconflation.png "Deduplication rules step 1")</span></span>
 
1. <span data-ttu-id="4c072-186">После выбора сущностей и задания их предпочтений слияния выберите **Создать правило** для определения правил дедупликации на уровне сущности.</span><span class="sxs-lookup"><span data-stu-id="4c072-186">Once the entities are selected and their merge preference is set, select **Create new rule** to define the deduplication rules at an entity level.</span></span>
   - <span data-ttu-id="4c072-187">В списке **Выбрать поле** перечислены все доступные поля этой сущности, для которых вы хотите дедуплицировать исходные данные.</span><span class="sxs-lookup"><span data-stu-id="4c072-187">**Select field** lists all the available fields from that entity you want to deduplicate source data on.</span></span>
   - <span data-ttu-id="4c072-188">Задайте настройки нормализации и точности аналогично тому, как указано в определении соответствия между сущностям.</span><span class="sxs-lookup"><span data-stu-id="4c072-188">Specify the normalization and precision settings in similar way as specified in the cross entity matching.</span></span>
   - <span data-ttu-id="4c072-189">Вы можете определить дополнительные условия, выбрав **Добавить условие**.</span><span class="sxs-lookup"><span data-stu-id="4c072-189">You can define additional conditions by selecting **Add condition**.</span></span>
 
   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="4c072-190">![Правила дедупликации, шаг 2](media/match-selfconflation-rules.png "Правила дедупликации, шаг 2")</span><span class="sxs-lookup"><span data-stu-id="4c072-190">![Deduplication rules step 2](media/match-selfconflation-rules.png "Deduplication rules step 2")</span></span>

  <span data-ttu-id="4c072-191">Можно создать несколько правил дедупликации для сущности.</span><span class="sxs-lookup"><span data-stu-id="4c072-191">You can create multiple deduplication rules for an entity.</span></span> 

1. <span data-ttu-id="4c072-192">Теперь при выполнении процесса соответствия записи группируются на основе условий, определенных в правилах дедупликации.</span><span class="sxs-lookup"><span data-stu-id="4c072-192">Running the match process now groups the records based on the conditions defined in the deduplication rules.</span></span> <span data-ttu-id="4c072-193">После группировки записей для определения победившей записи применяется политика слияния.</span><span class="sxs-lookup"><span data-stu-id="4c072-193">After grouping the records, the merge policy is applied to identify the winner record.</span></span>

1. <span data-ttu-id="4c072-194">Эта запись победителя затем передается в сопоставление между сущностями вместе с записями без победителя (например, альтернативными идентификаторами) для повышения качества соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-194">This winner record is then passed on to the cross-entity matching, along with the non-winner records (for example, alternate IDs) to improve the matching quality.</span></span>

1. <span data-ttu-id="4c072-195">Любые настраиваемые правила сопоставления, определенные для "всегда совпадают" и "никогда не совпадают", отменяют правила дедупликации.</span><span class="sxs-lookup"><span data-stu-id="4c072-195">Any custom match rules defined for always match and never match overrule deduplication rules.</span></span> <span data-ttu-id="4c072-196">Если правило дедупликации идентифицирует совпадающие записи, а настраиваемое правило сопоставления настроено так, чтобы никогда не совпадать с этими записями, то эти две записи не будут сопоставлены.</span><span class="sxs-lookup"><span data-stu-id="4c072-196">If a deduplication rule identifies matching records, and a custom match rule is set to never match those records, then these two records won't be matched.</span></span>

1. <span data-ttu-id="4c072-197">После запуска процесса сопоставления вы увидите статистику дедупликации.</span><span class="sxs-lookup"><span data-stu-id="4c072-197">After running the match process, you will see the deduplication stats.</span></span>
   
> [!NOTE]
> <span data-ttu-id="4c072-198">Указание правил дедупликации не является обязательным.</span><span class="sxs-lookup"><span data-stu-id="4c072-198">Specifying deduplication rules isn't mandatory.</span></span> <span data-ttu-id="4c072-199">Если такие правила не настроены, применяются правила, определенные системой.</span><span class="sxs-lookup"><span data-stu-id="4c072-199">If no such rules are configured, the system-defined rules are applied.</span></span> <span data-ttu-id="4c072-200">Они сворачивают все записи с одинаковой комбинацией значений (точное совпадение) из первичного ключа и полей в правилах сопоставления в единую запись перед передачей данных сущности в сопоставление между сущностями для повышения производительности и работоспособности системы.</span><span class="sxs-lookup"><span data-stu-id="4c072-200">They collapse all records that share the same value combination (exact match) from primary key and the fields in the matching rules into a single record before passing the entity data to cross-entity matching for enhanced performance and system sanity.</span></span>

## <a name="run-your-match-order"></a><span data-ttu-id="4c072-201">Запустите свой порядок поиска соответствий</span><span class="sxs-lookup"><span data-stu-id="4c072-201">Run your match order</span></span>

<span data-ttu-id="4c072-202">После определения правил сопоставления, включая правила сопоставления между сущностями и дедупликации, вы можете запустить порядок сопоставления.</span><span class="sxs-lookup"><span data-stu-id="4c072-202">After defining the match rules, including cross-entity matching and deduplication rules, you can run the match order.</span></span> <span data-ttu-id="4c072-203">На странице **Соответствие** выберите **Выполнить**, чтобы начать процесс.</span><span class="sxs-lookup"><span data-stu-id="4c072-203">On the **Match** page, select **Run** to start the process.</span></span> <span data-ttu-id="4c072-204">Выполнение алгоритма поиска соответствий может занять некоторое время.</span><span class="sxs-lookup"><span data-stu-id="4c072-204">The matching algorithm might take some time to complete.</span></span> <span data-ttu-id="4c072-205">Вы не можете изменить свойства на странице **Соответствия**, пока не завершится процесс поиска соответствий.</span><span class="sxs-lookup"><span data-stu-id="4c072-205">You can't change properties on the **Match** page until the match process completes.</span></span> <span data-ttu-id="4c072-206">Вы найдете сущность единого профиля клиента, которая была создан, на странице **Сущности**.</span><span class="sxs-lookup"><span data-stu-id="4c072-206">You'll find the unified customer profile entity that was created on the **Entities** page.</span></span> <span data-ttu-id="4c072-207">Ваша единая клиентская сущность называется **ConflationMatchPairs : CustomerInsights**.</span><span class="sxs-lookup"><span data-stu-id="4c072-207">Your unified customer entity is called **ConflationMatchPairs:CustomerInsights**.</span></span>

<span data-ttu-id="4c072-208">Для внесения дополнительных изменений и повторного выполнения шага вы можете отменить выполняющийся поиск совпадений.</span><span class="sxs-lookup"><span data-stu-id="4c072-208">To make additional changes and rerun the step, you can cancel a match in progress.</span></span> <span data-ttu-id="4c072-209">Выберите текст **Обновляется...** и выберите **Отменить задание** внизу боковой панели, которая появляется.</span><span class="sxs-lookup"><span data-stu-id="4c072-209">Select the **Refreshing ...** text and select **Cancel job** at the bottom of the side pane that appears.</span></span>

<span data-ttu-id="4c072-210">Когда процесс поиска совпадений завершен, текст **Обновляется...** изменится на **Успешно выполнено**, и вы можете снова использовать все функциональные возможности страницы.</span><span class="sxs-lookup"><span data-stu-id="4c072-210">When the match process is complete, the **Refreshing ...** text will change to **Successful** and you can use all functionality of the page again.</span></span>

<span data-ttu-id="4c072-211">Первый процесс сопоставления приводит к созданию единой главной сущности.</span><span class="sxs-lookup"><span data-stu-id="4c072-211">The first match process results in the creation of a unified master entity.</span></span> <span data-ttu-id="4c072-212">Все последующие поиски совпадений приводят к расширению этой сущности.</span><span class="sxs-lookup"><span data-stu-id="4c072-212">All subsequent match runs result in the expansion of that entity.</span></span>

> [!TIP]
> <span data-ttu-id="4c072-213">Есть [шесть типов статусов](system.md#status-types) для задач/процессов.</span><span class="sxs-lookup"><span data-stu-id="4c072-213">There are [six types of status](system.md#status-types) for tasks/processes.</span></span> <span data-ttu-id="4c072-214">Кроме того, большинство процессов [зависит от других последующих процессов](system.md#refresh-policies).</span><span class="sxs-lookup"><span data-stu-id="4c072-214">Additionally, most processes [depend on other downstream processes](system.md#refresh-policies).</span></span> <span data-ttu-id="4c072-215">Вы можете выбрать статус процесса, чтобы увидеть детали выполнения всего задания.</span><span class="sxs-lookup"><span data-stu-id="4c072-215">You can select the status of a process to see details on the progress of the entire job.</span></span> <span data-ttu-id="4c072-216">После выбора **См. сведения** для одной из задач задания вы найдете дополнительную информацию: время обработки, дату последней обработки, а также все ошибки и предупреждения, связанные с задачей.</span><span class="sxs-lookup"><span data-stu-id="4c072-216">After selecting **See details** for one of the job's tasks, you find additional information: processing time, the last processing date, and all errors and warnings associated with the task.</span></span>

## <a name="deduplication-output-as-an-entity"></a><span data-ttu-id="4c072-217">Выходные данные дедупликации как сущность</span><span class="sxs-lookup"><span data-stu-id="4c072-217">Deduplication output as an entity</span></span>
<span data-ttu-id="4c072-218">В дополнение к единой основной сущности, созданной как часть соответствия между сущностями, в процессе дедупликации также создается новая сущность для каждой сущности из порядка соответствия для идентификации дедуплицированных записей.</span><span class="sxs-lookup"><span data-stu-id="4c072-218">In addition to the unified master entity created as part of the cross entity matching, the deduplication process also generates a new entity for every entity from the match order to identify the deduplicated records.</span></span> <span data-ttu-id="4c072-219">Эти сущности можно найти вместе с **ConflationMatchPairs:CustomerInsights** в разделе **Система** на странице **Сущности** с именем **Deduplication_Datasource_Entity**.</span><span class="sxs-lookup"><span data-stu-id="4c072-219">These entities can be found along with the **ConflationMatchPairs:CustomerInsights** in the **System** section in the **Entities** page, with the name **Deduplication_Datasource_Entity**.</span></span>

<span data-ttu-id="4c072-220">Сущность выходных данных дедупликации содержит следующую информацию:</span><span class="sxs-lookup"><span data-stu-id="4c072-220">A deduplication output entity contains the following information:</span></span>
- <span data-ttu-id="4c072-221">Идентификаторы/ключи</span><span class="sxs-lookup"><span data-stu-id="4c072-221">IDs / Keys</span></span>
  - <span data-ttu-id="4c072-222">Поле первичного ключа и поле его альтернативного идентификатора.</span><span class="sxs-lookup"><span data-stu-id="4c072-222">Primary key field and its alternate IDs field.</span></span> <span data-ttu-id="4c072-223">Поле альтернативных идентификаторов состоит из всех альтернативных идентификаторов, определенных для записи.</span><span class="sxs-lookup"><span data-stu-id="4c072-223">Alternate IDs field consists of all the alternate IDs identified for a record.</span></span>
  - <span data-ttu-id="4c072-224">Поле Deduplication_GroupId показывает группу или кластер, идентифицированный внутри сущности, который группирует все похожие записи на основе указанных полей дедупликации.</span><span class="sxs-lookup"><span data-stu-id="4c072-224">Deduplication_GroupId field shows the group or cluster identified within an entity that groups all the similar records based on the specified deduplication fields.</span></span> <span data-ttu-id="4c072-225">Это используется для системной обработки.</span><span class="sxs-lookup"><span data-stu-id="4c072-225">This is  used for system processing purposes.</span></span> <span data-ttu-id="4c072-226">Если не указаны правила ручной дедупликации и применяются системные правила дедупликации, вы можете не найти это поле в сущности выходных данных дедупликации.</span><span class="sxs-lookup"><span data-stu-id="4c072-226">If there are no manual deduplication rules specified and system defined deduplication rules apply, you may not find this field in the deduplication output entity.</span></span>
  - <span data-ttu-id="4c072-227">Deduplication_WinnerId: это поле содержит идентификатор победителя из идентифицированных групп или кластеров.</span><span class="sxs-lookup"><span data-stu-id="4c072-227">Deduplication_WinnerId: This field contains the winner ID from the identified groups or clusters.</span></span> <span data-ttu-id="4c072-228">Если Deduplication_WinnerId совпадает со значением первичного ключа для записи, это означает, что запись является победившей.</span><span class="sxs-lookup"><span data-stu-id="4c072-228">If the Deduplication_WinnerId is same as the Primary key value for a record, it means that the record is the winner record.</span></span>
- <span data-ttu-id="4c072-229">Поля, используемые для определения правил дедупликации.</span><span class="sxs-lookup"><span data-stu-id="4c072-229">Fields used to define the deduplication rules.</span></span>
- <span data-ttu-id="4c072-230">Поля «Правило» и «Оценка», чтобы указать, какие из правил дедупликации были применены, и оценка, возвращаемая алгоритмом соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-230">Rule and Score fields to denote which of the deduplication rules got applied and the score returned by the matching algorithm.</span></span>

## <a name="review-and-validate-your-matches"></a><span data-ttu-id="4c072-231">Просмотр и подтверждение ваших совпадений</span><span class="sxs-lookup"><span data-stu-id="4c072-231">Review and validate your matches</span></span>

<span data-ttu-id="4c072-232">Оцените качество соответствующих пар и уточните их:</span><span class="sxs-lookup"><span data-stu-id="4c072-232">Evaluate the quality of your match pairs and refine it:</span></span>

- <span data-ttu-id="4c072-233">На странице **Совпадение** вы найдете две плитки, показывающие начальную информацию о ваших данных.</span><span class="sxs-lookup"><span data-stu-id="4c072-233">On the **Match** page, you'll find two tiles showing initial insights about your data.</span></span>

  - <span data-ttu-id="4c072-234">**Уникальные клиенты**: показывает количество уникальных профилей, идентифицированных системой.</span><span class="sxs-lookup"><span data-stu-id="4c072-234">**Unique customers**: shows the number of unique profiles that the system identified.</span></span>
  - <span data-ttu-id="4c072-235">**Совпадающие записи**: показывает количество совпадений во всех ваших парах совпадений.</span><span class="sxs-lookup"><span data-stu-id="4c072-235">**Matched records**: shows the number of matches across all of your match pairs.</span></span>

- <span data-ttu-id="4c072-236">В таблице **Порядок соответствия** вы можете оценить результаты каждой пары совпадений, сравнив количество записей, полученных из этой сущности пары совпадений, с процентом успешно сопоставленных записей.</span><span class="sxs-lookup"><span data-stu-id="4c072-236">In the **Match order** table, you can assess the results of each match pair by comparing the number of records that came from this match-pair entity against the percentage of successfully matched records.</span></span>

- <span data-ttu-id="4c072-237">В разделе **Правила** сущности в таблице **Порядок соответствия** вы найдете процент успешно сопоставленных записей на уровне правил.</span><span class="sxs-lookup"><span data-stu-id="4c072-237">In the **Rules** section of an entity in the **Match order** table, you'll find the percentage of successfully matched records at the rule level.</span></span> <span data-ttu-id="4c072-238">Выбрав символ таблицы рядом с правилом, вы можете просмотреть все записи на уровне правила.</span><span class="sxs-lookup"><span data-stu-id="4c072-238">By selecting the table symbol next to a rule, you can view all these records on the rule level.</span></span> <span data-ttu-id="4c072-239">Мы рекомендуем вам просмотреть подмножество записей, чтобы убедиться, что они были сопоставлены правильно.</span><span class="sxs-lookup"><span data-stu-id="4c072-239">We recommend that you review a subset of the records to validate that they were matched correctly.</span></span>

- <span data-ttu-id="4c072-240">Поэкспериментируйте с различными пороговыми значениями точности для ваших условий, чтобы определить оптимальное значение.</span><span class="sxs-lookup"><span data-stu-id="4c072-240">Experiment with different precision thresholds around your conditions to identify the optimal value.</span></span>

  1. <span data-ttu-id="4c072-241">Выберите многоточие (...) для правила соответствия пар, с которым вы хотите поэкспериментировать, и выберите **Изменить**.</span><span class="sxs-lookup"><span data-stu-id="4c072-241">Select the ellipsis (...) for the match pair rule that you want to experiment with and select **Edit**.</span></span>

  2. <span data-ttu-id="4c072-242">Выберите условие, с которой вы хотите экспериментировать.</span><span class="sxs-lookup"><span data-stu-id="4c072-242">Select the condition that you want to experiment with.</span></span> <span data-ttu-id="4c072-243">Каждый критерий представлен одной строкой на панели **Правило соответствия**.</span><span class="sxs-lookup"><span data-stu-id="4c072-243">Each criterion is represented by one row in the **Match rule** pane.</span></span>

  3. <span data-ttu-id="4c072-244">Что вы увидите на странице **Предварительный просмотр условий**, зависит от уровня точности, который вы выбрали для условия.</span><span class="sxs-lookup"><span data-stu-id="4c072-244">What you'll see on the **Criteria preview** page depends on the precision level you've selected for a condition.</span></span> <span data-ttu-id="4c072-245">Найдите количество совпавших и несовпавших записей для выбранного условия.</span><span class="sxs-lookup"><span data-stu-id="4c072-245">Find the number of matched and unmatched records for the selected condition.</span></span>

     <span data-ttu-id="4c072-246">Получите глубокое понимание влияния различных пороговых уровней.</span><span class="sxs-lookup"><span data-stu-id="4c072-246">Get a rich understanding of the effects of different threshold levels.</span></span> <span data-ttu-id="4c072-247">Вы можете сравнить, сколько записей будет сопоставлено для каждого из пороговых уровней, и просмотреть записи для каждого варианта.</span><span class="sxs-lookup"><span data-stu-id="4c072-247">You can compare how many records will be matched under each of the threshold levels, and view the records under each option.</span></span> <span data-ttu-id="4c072-248">Выберите каждую плитку и просмотрите данные в разделе таблицы.</span><span class="sxs-lookup"><span data-stu-id="4c072-248">Select each of the tiles and review the data in the table section.</span></span>

## <a name="optimize-your-matches"></a><span data-ttu-id="4c072-249">Оптимизируйте свои соответствия</span><span class="sxs-lookup"><span data-stu-id="4c072-249">Optimize your matches</span></span>

<span data-ttu-id="4c072-250">Повысьте качество, изменив некоторые параметры соответствия:</span><span class="sxs-lookup"><span data-stu-id="4c072-250">Increase the quality by reconfiguring some of your match parameters:</span></span>

- <span data-ttu-id="4c072-251">**Измените порядок поиска соответствий**, выбрав **Изменить** и изменив порядок поиска соответствий полей.</span><span class="sxs-lookup"><span data-stu-id="4c072-251">**Change the match order** by selecting **Edit** and change the match order fields.</span></span>

  > [!div class="mx-imgBorder"]
  > <span data-ttu-id="4c072-252">![Изменение порядка поиска соответствия данных](media/configure-data-match-order-edit.png "Изменение порядка поиска соответствия данных")</span><span class="sxs-lookup"><span data-stu-id="4c072-252">![Edit data match order](media/configure-data-match-order-edit.png "Edit data match order")</span></span>

- <span data-ttu-id="4c072-253">**Измените порядок ваших правил**, если вы определили несколько правил.</span><span class="sxs-lookup"><span data-stu-id="4c072-253">**Change the order of your rules** if you defined multiple rules.</span></span> <span data-ttu-id="4c072-254">Вы можете изменить порядок соответствия, выбрав параметры **Вверх** и **Вниз** в сетке правил соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-254">You can reorder the match rules by selecting the **Move Up** and **Move Down** options in the match rules grid.</span></span>

  > [!div class="mx-imgBorder"]
  > <span data-ttu-id="4c072-255">![Изменение порядка правил](media/configure-data-change-rule-order.png "Изменение порядка правил")</span><span class="sxs-lookup"><span data-stu-id="4c072-255">![Change rule order](media/configure-data-change-rule-order.png "Change rule order")</span></span>

- <span data-ttu-id="4c072-256">**Дублируйте свои правила**, если вы определили правило соответствия и хотели бы создать аналогичное правило с изменениями.</span><span class="sxs-lookup"><span data-stu-id="4c072-256">**Duplicate your rules** if you've defined a match rule and would like to create a similar rule with modifications.</span></span> <span data-ttu-id="4c072-257">Сделайте это, выбрав **Дублировать**.</span><span class="sxs-lookup"><span data-stu-id="4c072-257">Do so by selecting **Duplicate**.</span></span>

  > [!div class="mx-imgBorder"]
  > <span data-ttu-id="4c072-258">![Дублирование правила](media/configure-data-duplicate-rule.png "Дублирование правила")</span><span class="sxs-lookup"><span data-stu-id="4c072-258">![Duplicate a rule](media/configure-data-duplicate-rule.png "Duplicate a rule")</span></span>

- <span data-ttu-id="4c072-259">**Деактивировать правило**, чтобы сохранить правило соответствия, исключив его из процесса соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-259">**Deactivate a rule** to retain a match rule while excluding it from the matching process.</span></span>

  > [!div class="mx-imgBorder"]
  > <span data-ttu-id="4c072-260">![Деактивация правила](media/configure-data-deactivate-rule.png "Деактивация правила")</span><span class="sxs-lookup"><span data-stu-id="4c072-260">![Deactivate a rule](media/configure-data-deactivate-rule.png "Deactivate a rule")</span></span>

- <span data-ttu-id="4c072-261">**Измените ваши правила**, выбрав символ **Изменить**.</span><span class="sxs-lookup"><span data-stu-id="4c072-261">**Edit your rules** by selecting the **Edit** symbol.</span></span> <span data-ttu-id="4c072-262">Можно применить следующие изменения:</span><span class="sxs-lookup"><span data-stu-id="4c072-262">You can apply the following changes:</span></span>

  - <span data-ttu-id="4c072-263">Измените атрибуты для условия: выберите новые атрибуты в строке конкретного условия.</span><span class="sxs-lookup"><span data-stu-id="4c072-263">Change attributes for a condition: Select new attributes within the specific condition row.</span></span>
  - <span data-ttu-id="4c072-264">Измените порог для условия: отрегулируйте ползунок точности.</span><span class="sxs-lookup"><span data-stu-id="4c072-264">Change the threshold for a condition: Adjust the precision slider.</span></span>
  - <span data-ttu-id="4c072-265">Измените метод нормализации для условия: обновите метод нормализации.</span><span class="sxs-lookup"><span data-stu-id="4c072-265">Change the normalization method for a condition: Update the normalization method.</span></span>

## <a name="specify-your-custom-match-records"></a><span data-ttu-id="4c072-266">Укажите свои собственные записи соответствия</span><span class="sxs-lookup"><span data-stu-id="4c072-266">Specify your custom match records</span></span>

<span data-ttu-id="4c072-267">Вы можете указать условия, что отдельные записи должны всегда соответствовать или никогда не должны соответствовать.</span><span class="sxs-lookup"><span data-stu-id="4c072-267">You can specify conditions that certain records should always match or never match.</span></span> <span data-ttu-id="4c072-268">Эти правила могут быть загружены в пакетном режиме в процесс поиска совпадений.</span><span class="sxs-lookup"><span data-stu-id="4c072-268">These rules can be uploaded in bulk to the match process.</span></span>

1. <span data-ttu-id="4c072-269">Выберите параметр **Пользовательское соответствие** на экране **Порядок соответствия**.</span><span class="sxs-lookup"><span data-stu-id="4c072-269">Select the **Custom match** option on the **Match order** screen.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="4c072-270">![Создание настраиваемого соответствия](media/custom-match-create.png "Создание настраиваемого соответствия")</span><span class="sxs-lookup"><span data-stu-id="4c072-270">![Create a custom match](media/custom-match-create.png "Create a custom match")</span></span>

2. <span data-ttu-id="4c072-271">Если у вас нет загруженных сущностей, вы увидите новое диалоговое окно **Пользовательское соответствие**, которое требует от вас заполнить некоторые детали.</span><span class="sxs-lookup"><span data-stu-id="4c072-271">If you have no uploaded entities, you'll see a new **Custom match** dialog box that requires you to fill in some details.</span></span> <span data-ttu-id="4c072-272">Если вы уже предоставили эти данные ранее, перейдите к шагу 8.</span><span class="sxs-lookup"><span data-stu-id="4c072-272">If you've provided these details earlier, skip to step 8.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="4c072-273">![Диалоговое окно нового настраиваемого соответствия](media/custom-match-new-dialog-box.png "Диалоговое окно нового настраиваемого соответствия")</span><span class="sxs-lookup"><span data-stu-id="4c072-273">![New custom match dialog box](media/custom-match-new-dialog-box.png "New custom match dialog box")</span></span>

3. <span data-ttu-id="4c072-274">Выберите **Заполните шаблон**, чтобы получить файл шаблона, в котором можно указать, какие записи из каких сущностей всегда должны совпадать или никогда не должны совпадать.</span><span class="sxs-lookup"><span data-stu-id="4c072-274">Select **Fill in the template** to get a template file that can specify which records from which entities should always match or never match.</span></span> <span data-ttu-id="4c072-275">Вам нужно будет отдельно заполнить записи "всегда совпадают" и "никогда не совпадают" в двух разных файлах.</span><span class="sxs-lookup"><span data-stu-id="4c072-275">You'll need to separately fill in the "always match" records and "never match" records in two different files.</span></span>

4. <span data-ttu-id="4c072-276">Шаблон содержит поля для указания значений сущности и первичного ключа сущности, которые будут использоваться в пользовательском соответствии.</span><span class="sxs-lookup"><span data-stu-id="4c072-276">The template contains fields to specify the entity and the entity primary key values to be used in the custom match.</span></span> <span data-ttu-id="4c072-277">Например, если вы хотите, чтобы первичный ключ 12345 из сущности "Продажи" всегда совпадал с первичным ключом 34567 из сущности "Контакт", вам необходимо указать следующее:</span><span class="sxs-lookup"><span data-stu-id="4c072-277">For example, if you want primary key 12345 from Sales entity to always match with primary key 34567 from Contact entity, you'll need to specify as follows:</span></span>
    - <span data-ttu-id="4c072-278">Entity1: Продажи</span><span class="sxs-lookup"><span data-stu-id="4c072-278">Entity1: Sales</span></span>
    - <span data-ttu-id="4c072-279">Entity1Key: 12345</span><span class="sxs-lookup"><span data-stu-id="4c072-279">Entity1Key: 12345</span></span>
    - <span data-ttu-id="4c072-280">Entity2: Контакт</span><span class="sxs-lookup"><span data-stu-id="4c072-280">Entity2: Contact</span></span>
    - <span data-ttu-id="4c072-281">Entity2Key: 34567</span><span class="sxs-lookup"><span data-stu-id="4c072-281">Entity2Key: 34567</span></span>

   <span data-ttu-id="4c072-282">В одном файле шаблона можно указывать пользовательские записи совпадений из нескольких сущностей.</span><span class="sxs-lookup"><span data-stu-id="4c072-282">The same template file can specify custom match records from multiple entities.</span></span>
   
   <span data-ttu-id="4c072-283">Если вы хотите указать настраиваемое соответствие для дедупликации в сущности, укажите ту же сущность, что и Entity1 и Entity2, и установите разные значения первичного ключа.</span><span class="sxs-lookup"><span data-stu-id="4c072-283">If you want to specify custom matching for deduplication on an entity, provide the same entity as both Entity1 and Entity2 and set the different primary key values.</span></span>

5. <span data-ttu-id="4c072-284">После добавления всех переопределений, которые вы хотите применить, сохраните файл шаблона.</span><span class="sxs-lookup"><span data-stu-id="4c072-284">After adding all the overrides you want to apply, save the template file.</span></span>

6. <span data-ttu-id="4c072-285">Перейдите **Данные** > **Источники данных** и примите файлы шаблонов как новые сущности.</span><span class="sxs-lookup"><span data-stu-id="4c072-285">Go to **Data** > **Data sources** and ingest the template files as new entities.</span></span> <span data-ttu-id="4c072-286">После приема вы можете использовать их, чтобы указать конфигурацию соответствия.</span><span class="sxs-lookup"><span data-stu-id="4c072-286">Once ingested, you can use them to specify the Match configuration.</span></span>

7. <span data-ttu-id="4c072-287">После того как отправленные файлы и сущностей доступны, выберите параметр **Пользовательское соответствие** снова.</span><span class="sxs-lookup"><span data-stu-id="4c072-287">After uploading the files and entities are available, select the **Custom match** option again.</span></span> <span data-ttu-id="4c072-288">Вы увидите опции для указания сущностей, которые вы хотите включить.</span><span class="sxs-lookup"><span data-stu-id="4c072-288">You'll see options to specify the entities you want to include.</span></span> <span data-ttu-id="4c072-289">Выберите требуемые сущности из раскрывающегося меню.</span><span class="sxs-lookup"><span data-stu-id="4c072-289">Select the required entities from the drop-down menu.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="4c072-290">![Переопределения пользовательского соответствия](media/custom-match-overrides.png "Переопределения пользовательского соответствия")</span><span class="sxs-lookup"><span data-stu-id="4c072-290">![Custom match overrides](media/custom-match-overrides.png "Custom match overrides")</span></span>

8. <span data-ttu-id="4c072-291">Выберите сущности, которые вы хотите использовать для **Всегда должны соответствовать** и **Никогда не соответствуют**, выберите **Готово**.</span><span class="sxs-lookup"><span data-stu-id="4c072-291">Select the entities you want to use for **Always match** and **Never match**, select **Done**.</span></span>

9. <span data-ttu-id="4c072-292">Выберите **Сохранить** на странице **Соответствие** для пользовательской конфигурации соответствия, которую вы только что настроили.</span><span class="sxs-lookup"><span data-stu-id="4c072-292">Select **Save** on the **Match** page for the custom match configuration you just set up.</span></span>

10. <span data-ttu-id="4c072-293">Выберите **Выполнить** на странице **Соответствие**, чтобы начать процесс поиска соответствий, и пользовательская конфигурация соответствия будет введена в действие.</span><span class="sxs-lookup"><span data-stu-id="4c072-293">Select **Run** on the **Match** page to start the matching process, and the custom match configuration will be taken into effect.</span></span> <span data-ttu-id="4c072-294">Любые правила, подобранные системой, переопределяются набором конфигурации.</span><span class="sxs-lookup"><span data-stu-id="4c072-294">Any system matched rules are overridden by the configuration set.</span></span>

11. <span data-ttu-id="4c072-295">После завершения поиска соответствий вы можете проверить сущность **ConflationMatchPair**, чтобы подтвердить, что переопределения применяются в обогащенных соответствиях.</span><span class="sxs-lookup"><span data-stu-id="4c072-295">Once the matching is complete, you can verify the **ConflationMatchPair** entity to confirm that the overrides are applied in the conflation matches.</span></span>

## <a name="next-step"></a><span data-ttu-id="4c072-296">Следующий шаг</span><span class="sxs-lookup"><span data-stu-id="4c072-296">Next step</span></span>

<span data-ttu-id="4c072-297">После завершения процесса поиска соответствий хотя бы для одной пары соответствия вы можете разрешить возможные противоречия в своих данных, выполнив действия из темы [**Объединение**](merge-entities.md).</span><span class="sxs-lookup"><span data-stu-id="4c072-297">After completing the match process for at least one match pair, you may resolve possible contradictions in your data by going through the [**Merge**](merge-entities.md) topic.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]